!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).wrapGUI=n()}(this,function(){"use strict";var s=function(){},N={},d=[],c=[];function t(e,n){var t,o,r,i,l=c;for(i=arguments.length;2<i--;)d.push(arguments[i]);for(n&&null!=n.children&&(d.length||d.push(n.children),delete n.children);d.length;)if((o=d.pop())&&void 0!==o.pop)for(i=o.length;i--;)d.push(o[i]);else"boolean"==typeof o&&(o=null),(r="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(r=!1)),r&&t?l[l.length-1]+=o:l===c?l=[o]:l.push(o),t=r;var a=new s;return a.nodeName=e,a.children=l,a.attributes=null==n?void 0:n,a.key=null==n?void 0:n.key,void 0!==N.vnode&&N.vnode(a),a}function B(e,n){for(var t in n)e[t]=n[t];return e}function p(e,n){null!=e&&("function"==typeof e?e(n):e.current=n)}var n="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function e(e,n){return t(e.nodeName,B(B({},e.attributes),n),2<arguments.length?[].slice.call(arguments,2):e.children)}var u=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,o=[];function i(e){!e._dirty&&(e._dirty=!0)&&1==o.push(e)&&(N.debounceRendering||n)(r)}function r(){for(var e;e=o.pop();)e._dirty&&U(e)}function H(e,n){return e.normalizedNodeName===n||e.nodeName.toLowerCase()===n.toLowerCase()}function S(e){var n=B({},e.attributes);n.children=e.children;var t=e.nodeName.defaultProps;if(void 0!==t)for(var o in t)void 0===n[o]&&(n[o]=t[o]);return n}function z(e){var n=e.parentNode;n&&n.removeChild(e)}function f(e,n,t,o,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)p(t,null),p(o,e);else if("class"!==n||r)if("style"===n){if(o&&"string"!=typeof o&&"string"!=typeof t||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof t)for(var i in t)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"==typeof o[i]&&!1===u.test(i)?o[i]+"px":o[i]}}else if("dangerouslySetInnerHTML"===n)o&&(e.innerHTML=o.__html||"");else if("o"==n[0]&&"n"==n[1]){var l=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),o?t||e.addEventListener(n,h,l):e.removeEventListener(n,h,l),(e._listeners||(e._listeners={}))[n]=o}else if("list"!==n&&"type"!==n&&!r&&n in e){try{e[n]=null==o?"":o}catch(e){}null!=o&&!1!==o||"spellcheck"==n||e.removeAttribute(n)}else{var a=r&&n!==(n=n.replace(/^xlink:?/,""));null==o||!1===o?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.removeAttribute(n):"function"!=typeof o&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),o):e.setAttribute(n,o))}else e.className=o||""}function h(e){return this._listeners[e.type](N.event&&N.event(e)||e)}var F=[],T=0,g=!1,m=!1;function j(){for(var e;e=F.shift();)N.afterMount&&N.afterMount(e),e.componentDidMount&&e.componentDidMount()}function E(e,n,t,o,r,i){T++||(g=null!=r&&void 0!==r.ownerSVGElement,m=null!=e&&!("__preactattr_"in e));var l=$(e,n,t,o,i);return r&&l.parentNode!==r&&r.appendChild(l),--T||(m=!1,i||j()),l}function $(e,n,t,o,r){var i=e,l=g;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=n&&(e.nodeValue=n):(i=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),R(e,!0))),i.__preactattr_=!0,i;var a=n.nodeName;if("function"==typeof a)return function(e,n,t,o){var r=e&&e._component,i=r,l=e,a=r&&e._componentConstructor===n.nodeName,s=a,d=S(n);for(;r&&!s&&(r=r._parentComponent);)s=r.constructor===n.nodeName;r&&s&&(!o||r._component)?(O(r,d,3,t,o),e=r.base):(i&&!a&&(P(i),e=l=null),r=L(n.nodeName,d,t),e&&!r.nextBase&&(r.nextBase=e,l=null),O(r,d,1,t,o),e=r.base,l&&e!==l&&(l._component=null,R(l,!1)));return e}(e,n,t,o);if(g="svg"===a||"foreignObject"!==a&&g,a=String(a),(!e||!H(e,a))&&(i=function(e,n){var t=n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}(a,g),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),R(e,!0)}var s=i.firstChild,d=i.__preactattr_,c=n.children;if(null==d){d=i.__preactattr_={};for(var p=i.attributes,u=p.length;u--;)d[p[u].name]=p[u].value}return!m&&c&&1===c.length&&"string"==typeof c[0]&&null!=s&&void 0!==s.splitText&&null==s.nextSibling?s.nodeValue!=c[0]&&(s.nodeValue=c[0]):(c&&c.length||null!=s)&&function(e,n,t,o,r){var i,l,a,s,d,c=e.childNodes,p=[],u={},f=0,h=0,g=c.length,m=0,_=n?n.length:0;if(0!==g)for(var b=0;b<g;b++){var v=c[b],x=v.__preactattr_,y=_&&x?v._component?v._component.__key:x.key:null;null!=y?(f++,u[y]=v):(x||(void 0!==v.splitText?!r||v.nodeValue.trim():r))&&(p[m++]=v)}if(0!==_)for(var b=0;b<_;b++){s=n[b],d=null;var y=s.key;if(null!=y)f&&void 0!==u[y]&&(d=u[y],u[y]=void 0,f--);else if(h<m)for(i=h;i<m;i++)if(void 0!==p[i]&&(C=l=p[i],w=r,"string"==typeof(k=s)||"number"==typeof k?void 0!==C.splitText:"string"==typeof k.nodeName?!C._componentConstructor&&H(C,k.nodeName):w||C._componentConstructor===k.nodeName)){d=l,p[i]=void 0,i===m-1&&m--,i===h&&h++;break}d=$(d,s,t,o),a=c[b],d&&d!==e&&d!==a&&(null==a?e.appendChild(d):d===a.nextSibling?z(a):e.insertBefore(d,a))}var C,k,w;if(f)for(var b in u)void 0!==u[b]&&R(u[b],!1);for(;h<=m;)void 0!==(d=p[m--])&&R(d,!1)}(i,c,t,o,m||null!=d.dangerouslySetInnerHTML),function(e,n,t){var o;for(o in t)n&&null!=n[o]||null==t[o]||f(e,o,t[o],t[o]=void 0,g);for(o in n)"children"===o||"innerHTML"===o||o in t&&n[o]===("value"===o||"checked"===o?e[o]:t[o])||f(e,o,t[o],t[o]=n[o],g)}(i,n.attributes,d),g=l,i}function R(e,n){var t=e._component;t?P(t):(null!=e.__preactattr_&&p(e.__preactattr_.ref,null),!1!==n&&null!=e.__preactattr_||z(e),l(e))}function l(e){for(e=e.lastChild;e;){var n=e.previousSibling;R(e,!0),e=n}}var a=[];function L(e,n,t){var o,r=a.length;for(e.prototype&&e.prototype.render?(o=new e(n,t),b.call(o,n,t)):((o=new b(n,t)).constructor=e,o.render=_);r--;)if(a[r].constructor===e)return o.nextBase=a[r].nextBase,a.splice(r,1),o;return o}function _(e,n,t){return this.constructor(e,t)}function O(e,n,t,o,r){e._disable||(e._disable=!0,e.__ref=n.ref,e.__key=n.key,delete n.ref,delete n.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,o)),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,0!==t&&(1!==t&&!1===N.syncComponentUpdates&&e.base?i(e):U(e,1,r)),p(e.__ref,e))}function U(e,n,t,o){if(!e._disable){var r,i,l,a=e.props,s=e.state,d=e.context,c=e.prevProps||a,p=e.prevState||s,u=e.prevContext||d,f=e.base,h=e.nextBase,g=f||h,m=e._component,_=!1,b=u;if(e.constructor.getDerivedStateFromProps&&(s=B(B({},s),e.constructor.getDerivedStateFromProps(a,s)),e.state=s),f&&(e.props=c,e.state=p,e.context=u,2!==n&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(a,s,d)?_=!0:e.componentWillUpdate&&e.componentWillUpdate(a,s,d),e.props=a,e.state=s,e.context=d),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!_){r=e.render(a,s,d),e.getChildContext&&(d=B(B({},d),e.getChildContext())),f&&e.getSnapshotBeforeUpdate&&(b=e.getSnapshotBeforeUpdate(c,p));var v,x,y=r&&r.nodeName;if("function"==typeof y){var C=S(r);(i=m)&&i.constructor===y&&C.key==i.__key?O(i,C,1,d,!1):(v=i,e._component=i=L(y,C,d),i.nextBase=i.nextBase||h,i._parentComponent=e,O(i,C,0,d,!1),U(i,1,t,!0)),x=i.base}else l=g,(v=m)&&(l=e._component=null),(g||1===n)&&(l&&(l._component=null),x=E(l,r,d,t||!f,g&&g.parentNode,!0));if(g&&x!==g&&i!==m){var k=g.parentNode;k&&x!==k&&(k.replaceChild(x,g),v||(g._component=null,R(g,!1)))}if(v&&P(v),(e.base=x)&&!o){for(var w=e,H=e;H=H._parentComponent;)(w=H).base=x;x._component=w,x._componentConstructor=w.constructor}}for(!f||t?F.push(e):_||(e.componentDidUpdate&&e.componentDidUpdate(c,p,b),N.afterUpdate&&N.afterUpdate(e));e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);T||o||j()}}function P(e){N.beforeUnmount&&N.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var t=e._component;t?P(t):n&&(null!=n.__preactattr_&&p(n.__preactattr_.ref,null),z(e.nextBase=n),a.push(e),l(n)),p(e.__ref,null)}function b(e,n){this._dirty=!0,this.context=n,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}function v(e,n,t){return E(t,e,{},!1,n,!1)}function x(){return{}}B(b.prototype,{setState:function(e,n){this.prevState||(this.prevState=this.state),this.state=B(B({},this.state),"function"==typeof e?e(this.state,this.props):e),n&&this._renderCallbacks.push(n),i(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),U(this,2)},render:function(){}});var y={h:t,createElement:t,cloneElement:e,createRef:x,Component:b,render:v,rerender:r,options:N},C=Object.freeze({default:y,h:t,createElement:t,cloneElement:e,createRef:x,Component:b,render:v,rerender:r,options:N}),k=[],w=[];function M(e,n){if(n=n||{},void 0===e)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var t,o=!0===n.prepend?"prepend":"append",r=void 0!==n.container?n.container:document.querySelector("head"),i=k.indexOf(r);return-1===i&&(i=k.push(r)-1,w[i]={}),void 0!==w[i]&&void 0!==w[i][o]?t=w[i][o]:(t=w[i][o]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"==o?r.insertBefore(t,r.childNodes[0]):r.appendChild(t)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),t.styleSheet?t.styleSheet.cssText+=e:t.textContent+=e,t}var I=M,W=M;I.insertCss=W;var D,A,V=(function(e){var n=function(){function f(e,s,n,d){"object"==typeof s&&(n=s.depth,d=s.prototype,s.filter,s=s.circular);var c=[],p=[],u="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===n&&(n=1/0),function e(n,t){if(null===n)return null;if(0==t)return n;var o,r;if("object"!=typeof n)return n;if(f.__isArray(n))o=[];else if(f.__isRegExp(n))o=new RegExp(n.source,h(n)),n.lastIndex&&(o.lastIndex=n.lastIndex);else if(f.__isDate(n))o=new Date(n.getTime());else{if(u&&Buffer.isBuffer(n))return o=Buffer.allocUnsafe?Buffer.allocUnsafe(n.length):new Buffer(n.length),n.copy(o),o;void 0===d?(r=Object.getPrototypeOf(n),o=Object.create(r)):(o=Object.create(d),r=d)}if(s){var i=c.indexOf(n);if(-1!=i)return p[i];c.push(n),p.push(o)}for(var l in n){var a;r&&(a=Object.getOwnPropertyDescriptor(r,l)),a&&null==a.set||(o[l]=e(n[l],t-1))}return o}(e,n)}function n(e){return Object.prototype.toString.call(e)}function h(e){var n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n}return f.clonePrototype=function(e){if(null===e)return null;var n=function(){};return n.prototype=e,new n},f.__objToStr=n,f.__isDate=function(e){return"object"==typeof e&&"[object Date]"===n(e)},f.__isArray=function(e){return"object"==typeof e&&"[object Array]"===n(e)},f.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===n(e)},f.__getRegExpFlags=h,f}();e.exports&&(e.exports=n)}(D={exports:{}},D.exports),D.exports),Y=function(n,t){return n=n||{},Object.keys(t).forEach(function(e){void 0===n[e]&&(n[e]=V(t[e]))}),n},G=(A=C)&&A.default||A,q=function(n){function e(){for(var e in G.Component.apply(this,arguments),n)"render"!==e&&"function"==typeof n[e]&&(this[e]=n[e].bind(this));n.init&&n.init.call(this)}return(e.prototype=Object.assign(Object.create(G.Component.prototype),n)).constructor=e},J=function(e){return/^[0-9\.\s]*$/.test(e=""+e)?e+"px":e},K={fontFamily:"'Helvetica', sans-serif",fontSize:13,sliderHeight:22,controlBgColor:"#444",fieldBgColor:"#333",fieldHoverColor:"#383838",fieldActiveColor:"#383838",fieldBorderColor:"#232323",fieldHeight:30,sectionHeadingBgColor:"#222",sectionHeadingHoverColor:"#444",sectionHeadingColor:"#e8e8e8",sectionHeadingBorderColor:"#222",controlBorderColor:"#666",sliderThumbColor:"#888",fontColor:"#e8e8e8",sectionHeadingHeight:24,minLabelWidth:110,minControlWidth:130,visibilityFontColor:"rgba(0, 0, 0, 0.3)",focusBorderColor:"#888",controlBorderRadius:2},Q=G.h,X={name:"select",component:q({render:function(){var n=this,t=this.props.field,e=t.$config,o=this.props.className;return Q("div",{className:o+"__field "+o+"__field--select"},Q("label",{className:o+"__label",htmlFor:o+"-"+t.path},Q("span",{className:o+"__labelText"},e.label||t.name)," ",Q("span",{className:o+"__container"},Q("select",{name:t.path,id:o+"-"+t.path,onChange:function(e){return n.props.field.value=e.target.value}},t.options.map(function(e){return Q("option",{value:e,selected:e===t.value},e)})))))}}),css:function(e,n){return"\n      ."+e+"__field--select select {\n        font-family: inherit;\n        font-size: inherit;\n        height: "+n.sliderHeight+";\n        width: 100%;\n        color: inherit;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        background-color: "+n.controlBgColor+";\n        border: 1px solid "+n.controlBorderColor+";\n        outline: none;\n        margin: 0;\n        padding: 0 5px;\n        border-radius: "+n.controlBorderRadius+";\n        background-image: linear-gradient("+n.controlBorderColor+", "+n.controlBorderColor+"),\n          linear-gradient(-130deg, transparent 50%, "+n.controlBgColor+" 52%),\n          linear-gradient(-230deg, transparent 50%, "+n.controlBgColor+" 52%),\n          linear-gradient("+n.fontColor+" 42%, "+n.controlBgColor+" 42%);\n        background-repeat: no-repeat, no-repeat, no-repeat, no-repeat;\n        background-size: 1px 100%, 20px 16px, 20px 16px, 20px 60%;\n        background-position: right 20px center, right bottom, right bottom, right bottom;\n      }\n\n      ."+e+"__field--select select:focus {\n        "+n.focusBorder+"\n      }\n    "}},Z=function(e){var n,t=window.getComputedStyle(e),o=t.display,r=t.position,i=t.visibility,l=t.maxHeight,a=l.replace("px","").replace("%","");return"none"!==o&&"0"!==a?e.offsetHeight:(e.style.maxHeight="",e.style.position="absolute",e.style.visibility="hidden",e.style.display="block",n=e.offsetHeight,e.style.maxHeight=l,e.style.display=o,e.style.position=r,e.style.visibility=i,n)},ee=function(e,n){if("0"===e.style.maxHeight.replace("px","").replace("%","")){var t=Z(e)+"px";e.style.transition="max-height 0.1s ease-in-out",e.style.overflowY="hidden",e.style.maxHeight="0",e.style.display="block";var o=function(){e.style.transition="none",e.style.overflowY="visible",e.style.maxHeight="",e.removeEventListener("transitionend",o),n&&n()};e.addEventListener("transitionend",o),setTimeout(function(){e.style.maxHeight=t},20)}else{t=Z(e)+"px";e.style.transition="max-height 0.1s ease-in-out",e.style.overflowY="hidden",e.style.maxHeight=t,e.style.display="block";o=function(){e.style.transition="none",e.removeEventListener("transitionend",o),n&&n()};e.addEventListener("transitionend",o),setTimeout(function(){e.style.maxHeight="0"},20)}},ne=G.h,te={name:"section",component:q({init:function(){var e=this.props.field.$config.expanded;e=void 0===e||!!e,this.state={expanded:e}},toggleCollapsed:function(e){e.stopPropagation(),ee(this.contentsEl),this.setState({expanded:!this.state.expanded})},getRef:function(e){this.contentsEl=e,!1===this.state.expanded&&ee(this.contentsEl)},render:function(){var n=this,t=this.props.field,e=t.$config.label||t.name,o=this.props.className;return t.parentField||""!==e||(e="Controls"),ne("fieldset",{className:o+"__section "+(this.state.expanded?o+"__section--expanded":"")},ne("legend",{className:o+"__sectionHeading"},ne("button",{onClick:this.toggleCollapsed},e)),ne("div",{ref:this.getRef,className:o+"__sectionFields"},Object.keys(t.value.$displayFields).map(function(e){return ne(n.props.ControlComponent,{field:t.value.$path[e].$field})})))}}),css:function(e,n){return"\n      ."+e+"__section {\n        margin: 0;\n        margin-top: -1px;\n        padding: 0;\n        border: none;\n      }\n\n      ."+e+"__sectionHeading {\n        border: 1px solid "+n.sectionHeadingBorderColor+";\n        position: relative;\n        z-index: 1;\n        box-sizing: border-box;\n      }\n\n      ."+e+"__sectionFields {\n        margin-left: 4px;\n        box-sizing: border-box;\n      }\n\n      ."+e+"__sectionFields ."+e+"__field {\n        border-bottom: 1px solid "+n.fieldBorderColor+";\n        box-sizing: border-box;\n      }\n\n      ."+e+"__sectionFields ."+e+"__sectionFields {\n        border-right: none;\n        margin-right: 0;\n      }\n\n      ."+e+" > ."+e+"__section:first-child > ."+e+"__sectionHeading:first-child {\n        border-right: 1px solid "+n.sectionHeadingBorderColor+";\n      }\n\n      ."+e+"__sectionHeading {\n        padding: 0;\n        font-family: inherit;\n        user-select: none;\n        -moz-user-select: -moz-none;\n        text-indent: 5px;\n        cursor: pointer;\n        width: 100%;\n\n        color: "+n.sectionHeadingColor+";\n        background-color: "+n.sectionHeadingBgColor+";\n        height: "+n.sectionHeadingHeight+";\n        line-height: "+n.sectionHeadingHeight+";\n      }\n\n      ."+e+"__sectionHeading button:focus {\n        background-color: "+n.sectionHeadingHoverColor+";\n      }\n\n      ."+e+"__sectionHeading > button {\n        height: 100%;\n        vertical-align: middle;\n        font-size: 1.0em;\n        cursor: pointer;\n        text-align: left;\n        outline: none;\n        color: inherit;\n        font-size: inherit;\n        font-family: inherit;\n        background: transparent;\n        border: none;\n        border-radius: 0;\n        display: block;\n        width: 100%;\n      }\n\n      ."+e+"__sectionHeading:hover {\n        background-color: "+n.sectionHeadingHoverColor+";\n      }\n\n      ."+e+"__sectionHeading > button::before {\n        transform: translate(0, -1px) rotate(90deg);\n      }\n\n      ."+e+"__sectionHeading > button::before {\n        content: '▲';\n        display: inline-block;\n        transform-origin: 50% 50%;\n        margin-right: 0.5em;\n        font-size: 0.5em;\n        vertical-align: middle;\n      }\n\n      ."+e+"__section--expanded > ."+e+"__sectionHeading > button::before {\n        transform: none;\n        content: '▼';\n      }\n    "}},oe=G.h,re={name:"slider",component:q({render:function(){var n=this,e=this.props.field,t=e.$config,o=this.props.className;return oe("div",{className:o+"__field "+o+"__field--slider"},oe("label",{className:o+"__label",htmlFor:o+"-"+e.path},oe("span",{className:o+"__labelText"},t.label||e.name)," ",oe("span",{className:o+"__container"},oe("input",{id:o+"-"+e.path,name:e.path,type:"range",min:this.props.field.inverseMapping(e.min),max:this.props.field.inverseMapping(e.max),step:(this.props.field.inverseMapping(this.props.field.max)-this.props.field.inverseMapping(this.props.field.min))/this.props.field.steps,value:this.props.field.inverseMapping(e.value),onInput:function(e){return n.props.field.value=parseFloat(n.props.field.mapping(e.target.value))}}),oe("span",{className:o+"__sliderValue"},e.value.toFixed(4).replace(/\.?0*$/,"")))))}}),css:function(e,n){return"\n      ."+e+"__field--slider input[type=range] {\n        width: 100%;\n        height: "+n.sliderHeight+";\n        -webkit-appearance: none;\n        vertical-align: middle;\n        border-radius: "+n.controlBorderRadius+";\n        margin: 0;\n        cursor: resize-ew;\n        border: 1px solid "+n.controlBorderColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]:focus {\n        "+n.focusBorder+"\n      }\n\n      ."+e+"__field--slider input[type=range]::-webkit-slider-thumb {\n        height: "+n.sliderHeight+";\n        width: "+n.sliderHeight+";\n        background: "+n.sliderThumbColor+";\n        border-radius: 0;\n        cursor: ew-resize;\n        -webkit-appearance: none;\n      }\n\n      ."+e+"__field--slider input[type=range]::-moz-range-thumb {\n        height: "+n.sliderHeight+";\n        width: "+n.sliderHeight+";\n        border-radius: 0;\n        background: "+n.sliderThumbColor+";\n        cursor: ew-resize;\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-thumb {\n        height: "+n.sliderHeight+";\n        width: "+n.sliderHeight+";\n        border-radius: 0;\n        background: "+n.sliderThumbColor+";\n        cursor: ew-resize;\n      }\n\n      ."+e+"__field--slider input[type=range]::-webkit-slider-runnable-track {\n        height: "+n.sliderHeight+";\n        cursor: ew-resize;\n        background: "+n.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]::-moz-range-track {\n        height: "+n.sliderHeight+";\n        cursor: ew-resize;\n        background: "+n.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-track {\n        height: "+n.sliderHeight+";\n        cursor: ew-resize;\n        background: transparent;\n        border-color: transparent;\n        color: transparent;\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-fill-lower {\n        background: "+n.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]::-ms-fill-upper {\n        background: "+n.controlBgColor+";\n      }\n\n      ."+e+"__field--slider input[type=range]:focus::-ms-fill-lower {\n        background: "+n.controlBgColor+";\n        "+n.focusBorder+"\n      }\n\n      ."+e+"__field--slider input[type=range]:focus::-ms-fill-upper {\n        background: "+n.controlBgColor+";\n        "+n.focusBorder+"\n      }\n\n      ."+e+"__sliderValue {\n        position: absolute;\n        pointer-events: none;\n        top: 0;\n        z-index: 11;\n        line-height: "+n.fieldHeight+";\n        height: "+n.fieldHeight+";\n        display: inline-block;\n        right: 15px;\n        text-shadow:  1px  0   "+n.visibilityFontColor+",\n                      0    1px "+n.visibilityFontColor+",\n                     -1px  0   "+n.visibilityFontColor+",\n                      0   -1px "+n.visibilityFontColor+",\n                      1px  1px "+n.visibilityFontColor+",\n                      1px -1px "+n.visibilityFontColor+",\n                     -1px  1px "+n.visibilityFontColor+",\n                     -1px -1px "+n.visibilityFontColor+";\n      }\n    "}},ie=G.h,le={name:"checkbox",component:q({render:function(){var n=this,e=this.props.field,t=e.$config,o=this.props.className;return ie("div",{className:o+"__field "+o+"__field--checkbox"},ie("label",{className:o+"__label",htmlFor:o+"-"+e.path},ie("span",{className:o+"__labelText"},t.label||e.name)," ",ie("span",{className:o+"__container"},ie("input",{id:o+"-"+e.path,name:e.path,type:"checkbox",checked:e.value,onInput:function(e){return n.props.field.value=e.target.checked}}))))}}),css:function(e,n){return"\n      ."+e+"__field--checkbox input[type=checkbox] {\n        height: 20px;\n        width: 20px;\n        margin-bottom: 0.2em;\n      }\n\n      ."+e+"__field--checkbox input[type=checkbox]:focus {\n        "+n.focusBorder+"\n      }\n    "}},ae=G.h,se={name:"textinput",component:q({render:function(){var n=this,e=this.props.field,t=e.$config,o=this.props.className;return ae("div",{className:o+"__field "+o+"__field--text"},ae("label",{className:o+"__label",htmlFor:o+"-"+e.path},ae("span",{className:o+"__labelText"},t.label||e.name)," ",ae("span",{className:o+"__container"},ae("input",{id:o+"-"+e.path,name:e.path,type:"text",value:e.value,onInput:function(e){return n.props.field.value=e.target.value}}))))}}),css:function(e,n){return"\n      ."+e+"__field--text input[type=text] {\n        font-size: inherit;\n        font-family: inherit;\n        width: 100%;\n        margin: 0;\n        padding: 0 5px;\n        border: none;\n        height: "+n.sliderHeight+";\n        border-radius: "+n.controlBorderRadius+";\n        background-color: "+n.controlBgColor+";\n        border: 1px solid "+n.controlBorderColor+";\n        color: inherit;\n      }\n\n      ."+e+"__field--text input[type=text]:focus {\n        "+n.focusBorder+"\n      }\n    "}},de=G.h,ce={name:"button",component:q({render:function(){var e=this.props.field,n=e.$config,t=this.props.className;return de("div",{className:t+"__field "+t+"__field--button"},de("button",{onClick:e.value},n.label||e.name))}}),css:function(e,n){return"\n      ."+e+"__field--button button {\n        height: "+n.fieldHeight+";\n        font-size: inherit;\n        font-family: inherit;\n        outline: none;\n        cursor: pointer;\n        text-align: center;\n        display: block;\n        background: transparent;\n        color: inherit;\n        font-size: 1.0em;\n        width: 100%;\n        border: none;\n        border-radius: 0;\n      }\n\n      ."+e+"__field--button > button:hover {\n        background-color: "+n.fieldHoverColor+";\n      }\n\n      ."+e+"__field--button > button:active {\n        background-color: "+n.fieldActiveColor+";\n      }\n\n      ."+e+"__field--button > button:focus {\n        "+n.focusBorder+"\n      }\n\n      ."+e+"__field--button > button::before {\n        content: '';\n        width: 3px;\n        display: inline-block;\n        vertical-align: middle;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n      }\n    "}},pe=G.h,ue={name:"color",component:q({render:function(){var n=this,e=this.props.field,t=e.$config,o=this.props.className;return pe("div",{className:o+"__field "+o+"__field--color"},pe("label",{className:o+"__label",htmlFor:o+"-"+e.path},pe("span",{className:o+"__labelText"},t.label||e.name)," ",pe("span",{className:o+"__container"},pe("input",{id:o+"-"+e.path,name:e.path,type:"color",value:e.value,onInput:function(e){n.props.field.value=e.target.value}}))))}}),css:function(e,n){return"\n      ."+e+"__field--color input[type=color] {\n        margin: 0;\n        border: 1px solid #aaa;\n        width: 50px;\n        height: "+n.sliderHeight+";\n        border-radius: "+n.controlBorderRadius+";\n        padding: 0;\n      }\n\n      ."+e+"__field--color input[type=color]::-webkit-color-swatch-wrapper {\n        padding: 0px;\n        background-color: #888;\n      }\n\n      ."+e+"__field--color input[type=color]:focus {\n        "+n.focusBorder+"\n      }\n    "}},fe=G.h,he={name:"raw",component:q({getRef:function(e){this.el=e},getContent:function(e){return this.content=e.field.value,"function"==typeof this.content&&(this.content=this.content(fe,{field:e.field,state:e.state})),this.content},render:function(){var e=this.props.className;return fe("div",{className:e+"__field--raw "+e+"__field"},fe("div",{ref:this.getRef,className:e+"__rawContent"},this.getContent(this.props)))}}),css:function(e,n){return"\n      ."+e+"__field--raw {\n        height: auto;\n        padding: 0 7px 0 10px;\n        overflow: hidden;\n      }\n\n      ."+e+"__rawContent {\n        max-width: 100%;\n        margin: 0;\n        padding: 0;\n      }\n\n      ."+e+"__rawContent a {\n        color: inherit;\n      }\n\n      ."+e+"__rawContent::before {\n        background-color: #aaa;\n      }\n\n      ."+e+"__rawContent::before {\n        content: '';\n        width: 3px;\n        display: inline-block;\n        vertical-align: middle;\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n      }\n\n      ."+e+"__rawContent > p:first-child {\n        margin-top: 5px;\n      }\n\n      ."+e+"__rawContent > p:last-child{\n        margin-bottom: 5px;\n      }\n\n      ."+e+"__rawContent p {\n        line-height: 1.8;\n      }\n\n      ."+e+"__rawContent pre {\n        line-height: 1.3;\n        font-size: 0.8em;\n        margin: 0;\n      }\n    "}},ge=G.h,me={name:"tabs",component:q({init:function(){this.state={selectedTab:Object.keys(this.props.field.value.$displayFields)[0]}},getRef:function(e){this.contentsEl=e},selectTab:function(e,n){e.preventDefault(),this.setState({selectedTab:n})},render:function(){var r=this,e=this.props.field,i=this.props.className,n=e.value.$displayFields,t=n[this.state.selectedTab||Object.keys(n)[0]];return ge("div",{key:e.name,className:i+"__tabs"},ge("ul",{className:i+"__tabList"},Object.entries(e.value.$displayFields).filter(function(e){return"section"===e[1].type}).map(function(e){var n=e[0],t=e[1],o=t.$config.label||n;return ge("li",{className:i+"__tabItem "+(n===r.state.selectedTab?i+"__tabItem--active":"")},ge("a",{href:"#"+t.path,onClick:function(e){return r.selectTab(e,n)},key:n},o))})),ge("div",{ref:this.getRef,id:t.path,key:t.path,className:i+"__tabPanel"},Object.keys(t.value.$displayFields).map(function(e){return ge(r.props.ControlComponent,{key:e,field:t.value.$path[e].$field})})))}}),css:function(e,n){return"\n      ."+e+"__tabsHeader {\n        margin: 0;\n        margin-top: -1px;\n        padding: 0;\n        border: none;\n      }\n      ."+e+"__tabList {\n        background-color: #222;\n        border-bottom: 6px solid #555;\n        display: flex;\n        flex-wrap: wrap;\n        flex-direction: row;\n        margin: 0;\n        padding: 0;\n        padding-top: 6px;\n        align-items: flex-end;\n      }\n      ."+e+"__tabItem {\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        user-select: none;\n        list-style-type: none;\n        border-top-left-radius: 2px;\n        border-top-right-radius: 2px;\n        margin-left: 6px;\n        display: inline-block;\n        background-color: #333;\n        color: #ccc;\n        padding: 5px 7px;\n        padding-bottom: 3px;\n        margin-top: 5px;\n      }\n      ."+e+"__tabItem > a {\n        color: inherit;\n        text-decoration: none;\n      }\n      ."+e+"__tabItem:hover {\n        background-color: #444;\n      }\n      ."+e+"__tabItem--active {\n        background-color: #555;\n        color: #fff;\n        padding-bottom: 5px;\n        margin-top: 3px;\n      }\n    "}},_e=function(){var i={};function t(e,o){(o=Y(o||{},{containerCSS:"position:fixed;top:0;right:8px",style:!0,className:"controlPanel-"+Math.random().toString(36).substring(2,15),expanded:!0})).root=o.root||document.body;var n=o.className;e.$field.$config.expanded=o.expanded;var t=q({render:function(){return G.h(function(e){var n=i[e];if(!n)throw new Error('Unrecognized component, "'+e+'"');return n}(this.props.field.type).component,{ControlComponent:t,className:n,field:this.props.field,state:e,h:G.h})}}),r=q({state:{dummy:0},componentDidMount:function(){var n=this;this.props.state.$field.onChanges(function(e){n.setState({dummy:n.state.dummy+1})})},getRef:function(e){for(var n=["mousedown","mouseup","mousemove","touchstart","touchmove","touchend","wheel"],t=0;t<n.length;t++)e.addEventListener(n[t],function(e){e.stopPropagation()});o.containerCSS&&(e.style.cssText=o.containerCSS)},render:function(){return G.h("div",{className:""+n,ref:this.getRef},G.h(t,{field:this.props.state.$field}))}});return o.style&&I(function(t,o,r){return(o=Object.assign({},Y(o||{},K))).fontSize=J(o.fontSize),o.sliderHeight=J(o.sliderHeight),o.fieldHeight=J(o.fieldHeight),o.sectionHeadingHeight=J(o.sectionHeadingHeight),o.minLabelWidth=J(o.minLabelWidth),o.minControlWidth=J(o.minControlWidth),o.controlBorderRadius=J(o.controlBorderRadius),o.focusBorder="\n    outline: none;\n    border-color: "+o.focusBorderColor+";\n    box-shadow: 0 0 3px "+o.focusBorderColor+";\n  ","\n    ."+t+" {\n      color: "+o.fontColor+";\n      "+(o.fontSize?"font-size: "+o.fontSize:"")+";\n      "+(o.fontFamily?"font-family: "+o.fontFamily:"")+";\n      max-width: 100%;\n    }\n\n    ."+t+"__field {\n      position: relative;\n      background-color: "+o.fieldBgColor+";\n      border-right: 1px solid "+o.fieldBorderColor+";\n    }\n\n    ."+t+"__label {\n      display: block;\n      height: "+o.fieldHeight+";\n      line-height: "+o.fieldHeight+";\n      display: flex;\n      flex-direction: row;\n      background-color: "+o.fieldBgColor+";\n    }\n\n    ."+t+"__field:hover {\n      background-color: "+o.fieldHoverColor+";\n    }\n\n    ."+t+"__container {\n      display: flex;\n      flex-direction: row;\n      align-content: stretch;\n      justify-content: stretch;\n    \n      height: "+o.fieldHeight+";\n      flex: 1;\n      position: relative;\n      align-items: center;\n      position: relative;\n\n      min-width: "+o.minControlWidth+";\n      width: "+o.fieldHeight+";\n      padding-right: 8px;\n      text-indent: 8px;\n    }\n\n    ."+t+"__labelText {\n      user-select: none;\n      -moz-user-select: -moz-none;\n      text-indent: 8px;\n      margin-right: 4px;\n      display: inline-block;\n      min-width: "+o.minLabelWidth+";\n      line-height: "+o.fieldHeight+";\n    }\n\n    ."+t+"__field::before {\n      content: '';\n      width: 3px;\n      display: inline-block;\n      vertical-align: middle;\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n    }\n\n    ."+t+"__field--text::before { background-color: #49f; }\n    ."+t+"__field--color::before { background-color: #94f; }\n    ."+t+"__field--checkbox::before { background-color: #f49; }\n    ."+t+"__field--slider::before { background-color: #f84; }\n    ."+t+"__field--select::before { background-color: #8f4; }\n    ."+t+"__field--button > button::before { background-color: #8ff; }\n\n    "+Object.keys(r).map(function(e){var n=r[e].css;return n?n(t,o):""}).join("\n")+"\n  "}(n,o.theme,i)),G.render(G.h(r,{state:e}),o.root),e}return t.registerComponent=function(e){return i[e.name]=e,t},t.registerComponents=function(e){for(var n=0;n<e.length;n++)t.registerComponent(e[n]);return t},t}();return _e.registerComponents([X,te,re,le,se,ce,ue,he,me]),_e});