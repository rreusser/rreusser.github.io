!function(){return function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(t,e,n){"use strict";function r(t,e,n){return(r=c()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=c();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}(this,n)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function p(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e,n){return(e=b(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t){var e=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===_(e)?e:String(e)}function m(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t){"@babel/helpers - typeof";return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t){return t}function x(t){return null===t||void 0===t}function k(t){return null!==t&&"object"===_(t)}function C(t){return null!==t&&"object"===_(t)}function E(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function M(t,e){return Array.from(new Set([].concat(m(Object.keys(t)),m(Object.keys(e))))).reduce(function(n,r){var i=t[r],o=e[r];return C(i)&&C(o)?Object.assign(Object.assign({},n),v({},r,M(i,o))):Object.assign(Object.assign({},n),v({},r,r in e?o:i))},{})}function P(t){return!!k(t)&&"target"in t}var A={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(t){return"Invalid parameters for '".concat(t.name,"'")},nomatchingcontroller:function(t){return"No matching controller for '".concat(t.key,"'")},nomatchingview:function(t){return"No matching view for '".concat(JSON.stringify(t.params),"'")},notbindable:function(){return"Value is not bindable"},notcompatible:function(t){return"Not compatible with  plugin '".concat(t.id,"'")},propertynotfound:function(t){return"Property '".concat(t.name,"' not found")},shouldneverhappen:function(){return"This error should never happen"}},S=function(){function t(e){var n;h(this,t),this.message=null!==(n=A[e.type](w(e.context)))&&void 0!==n?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}return p(t,[{key:"toString",value:function(){return this.message}}],[{key:"alreadyDisposed",value:function(){return new t({type:"alreadydisposed"})}},{key:"notBindable",value:function(){return new t({type:"notbindable"})}},{key:"notCompatible",value:function(e,n){return new t({type:"notcompatible",context:{id:"".concat(e,".").concat(n)}})}},{key:"propertyNotFound",value:function(e){return new t({type:"propertynotfound",context:{name:e}})}},{key:"shouldNeverHappen",value:function(){return new t({type:"shouldneverhappen"})}}]),t}(),T=function(){function t(e,n){h(this,t),this.obj_=e,this.key=n}return p(t,[{key:"read",value:function(){return this.obj_[this.key]}},{key:"write",value:function(t){this.obj_[this.key]=t}},{key:"writeProperty",value:function(e,n){var r=this.read();if(!t.isBindable(r))throw S.notBindable();if(!(e in r))throw S.propertyNotFound(e);r[e]=n}}],[{key:"isBindable",value:function(t){return null!==t&&("object"===_(t)||"function"==typeof t)}}]),t}(),O=function(){function t(){h(this,t),this.observers_={}}return p(t,[{key:"on",value:function(t,e,n){var r,i=this.observers_[t];return i||(i=this.observers_[t]=[]),i.push({handler:e,key:null!==(r=null===n||void 0===n?void 0:n.key)&&void 0!==r?r:e}),this}},{key:"off",value:function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter(function(t){return t.key!==e})),this}},{key:"emit",value:function(t,e){var n=this.observers_[t];n&&n.forEach(function(t){t.handler(e)})}}]),t}(),V=function(){function t(e,n){var r;h(this,t),this.constraint_=null===n||void 0===n?void 0:n.constraint,this.equals_=null!==(r=null===n||void 0===n?void 0:n.equals)&&void 0!==r?r:function(t,e){return t===e},this.emitter=new O,this.rawValue_=e}return p(t,[{key:"constraint",get:function(){return this.constraint_}},{key:"rawValue",get:function(){return this.rawValue_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!==e&&void 0!==e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t,i=this.rawValue_;(!this.equals_(i,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,previousRawValue:i,rawValue:r,sender:this}))}}]),t}(),j=function(){function t(e){h(this,t),this.emitter=new O,this.value_=e}return p(t,[{key:"rawValue",get:function(){return this.value_},set:function(t){this.setRawValue(t,{forceEmit:!1,last:!0})}},{key:"setRawValue",value:function(t,e){var n=null!==e&&void 0!==e?e:{forceEmit:!1,last:!0},r=this.value_;(r!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,previousRawValue:r,rawValue:this.value_,sender:this}))}}]),t}(),D=function(){function t(e){h(this,t),this.emitter=new O,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}return p(t,[{key:"rawValue",get:function(){return this.value_.rawValue}},{key:"onValueBeforeChange_",value:function(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}},{key:"onValueChange_",value:function(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}]),t}();function N(t,e){var n=null===e||void 0===e?void 0:e.constraint,r=null===e||void 0===e?void 0:e.equals;return n||r?new V(t,e):new j(t)}var L=function(){function t(e){var n=this;h(this,t),this.emitter=new O,this.valMap_=e;var r=function(t){n.valMap_[t].emitter.on("change",function(){n.emitter.emit("change",{key:t,sender:n})})};for(var i in this.valMap_)r(i)}return p(t,[{key:"get",value:function(t){return this.valMap_[t].rawValue}},{key:"set",value:function(t,e){this.valMap_[t].rawValue=e}},{key:"value",value:function(t){return this.valMap_[t]}}],[{key:"createCore",value:function(t){return Object.keys(t).reduce(function(e,n){return Object.assign(e,v({},n,N(t[n])))},{})}},{key:"fromObject",value:function(e){return new t(this.createCore(e))}}]),t}(),z=function(){function t(e){h(this,t),this.values=L.fromObject({max:e.max,min:e.min})}return p(t,[{key:"constrain",value:function(t){var e=this.values.get("max"),n=this.values.get("min");return Math.min(Math.max(t,n),e)}}]),t}(),R=function(){function t(e){h(this,t),this.values=L.fromObject({max:e.max,min:e.min})}return p(t,[{key:"constrain",value:function(t){var e=this.values.get("max"),n=this.values.get("min"),r=t;return x(n)||(r=Math.max(r,n)),x(e)||(r=Math.min(r,e)),r}}]),t}(),B=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,t),this.step=e,this.origin=n}return p(t,[{key:"constrain",value:function(t){var e=this.origin%this.step;return e+Math.round((t-e)/this.step)*this.step}}]),t}(),I=function(){function t(e){h(this,t),this.text=e}return p(t,[{key:"evaluate",value:function(){return Number(this.text)}},{key:"toString",value:function(){return this.text}}]),t}(),F={"**":function(t,e){return Math.pow(t,e)},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e},"&":function(t,e){return t&e},"^":function(t,e){return t^e},"|":function(t,e){return t|e}},U=function(){function t(e,n,r){h(this,t),this.left=n,this.operator=e,this.right=r}return p(t,[{key:"evaluate",value:function(){var t=F[this.operator];if(!t)throw new Error("unexpected binary operator: '".concat(this.operator));return t(this.left.evaluate(),this.right.evaluate())}},{key:"toString",value:function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}]),t}(),q={"+":function(t){return t},"-":function(t){return-t},"~":function(t){return~t}},H=function(){function t(e,n){h(this,t),this.operator=e,this.expression=n}return p(t,[{key:"evaluate",value:function(){var t=q[this.operator];if(!t)throw new Error("unexpected unary operator: '".concat(this.operator));return t(this.expression.evaluate())}},{key:"toString",value:function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}]),t}();function Y(t){return function(e,n){for(var r=0;r<t.length;r++){var i=t[r](e,n);if(""!==i)return i}return""}}function K(t,e){var n,r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function G(t,e){var n,r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function W(t,e){var n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";var r=function(t,e){var n=G(t,e);if(""!==n)return n;var r=t.substr(e,1);if(e+=1,"-"!==r&&"+"!==r)return"";var i=G(t,e);return""===i?"":r+i}(t,e);return""===r?"":n+r}function X(t,e){var n=t.substr(e,1);if("0"===n)return n;var r=function(t,e){var n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=r.length,""===r?"":r+G(t,e)}var $=Y([function(t,e){var n=X(t,e);if(e+=n.length,""===n)return"";var r=t.substr(e,1);if(e+=r.length,"."!==r)return"";var i=G(t,e);return n+r+i+W(t,e+=i.length)},function(t,e){var n=t.substr(e,1);if(e+=n.length,"."!==n)return"";var r=G(t,e);return e+=r.length,""===r?"":n+r+W(t,e)},function(t,e){var n=X(t,e);return e+=n.length,""===n?"":n+W(t,e)}]);var Q=Y([Y([function(t,e){var n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";var r=function(t,e){var n,r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){var n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";var r=function(t,e){var n,r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){var n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";var r=function(t,e){var n,r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r}]),$]);function Z(t,e){var n;return null!==(n=function(t,e){var n=Q(t,e);return e+=n.length,""===n?null:{evaluable:new I(n),cursor:e}}(t,e))&&void 0!==n?n:function(t,e){var n=t.substr(e,1);if(e+=n.length,"("!==n)return null;var r=et(t,e);if(!r)return null;e=r.cursor,e+=K(t,e).length;var i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}(t,e)}function J(t,e,n){n+=K(e,n).length;var r=t.filter(function(t){return e.startsWith(t,n)})[0];return r?(n+=r.length,{cursor:n+=K(e,n).length,operator:r}):null}var tt=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(t,e){return function(t,e){return function(n,r){var i=t(n,r);if(!i)return null;r=i.cursor;for(var o=i.evaluable;;){var a=J(e,n,r);if(!a)break;r=a.cursor;var u=t(n,r);if(!u)return null;r=u.cursor,o=new U(a.operator,o,u.evaluable)}return o?{cursor:r,evaluable:o}:null}}(t,e)},function t(e,n){var r=Z(e,n);if(r)return r;var i=e.substr(n,1);if(n+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;var o=t(e,n);return o?{cursor:n=o.cursor,evaluable:new H(i,o.evaluable)}:null});function et(t,e){return e+=K(t,e).length,tt(t,e)}function nt(t){var e,n=function(t){var e=et(t,0);return e?e.cursor+K(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null===n||void 0===n?void 0:n.evaluate())&&void 0!==e?e:null}function rt(t){if("number"==typeof t)return t;if("string"==typeof t){var e=nt(t);if(!x(e))return e}return 0}function it(t){return String(t)}function ot(t){return function(e){return e.toFixed(Math.max(Math.min(t,20),0))}}function at(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function ut(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function st(t,e,n){return Math.min(Math.max(t,e),n)}function lt(t,e){return(t%e+e)%e}function ct(t){var e;return null!==(e=t.step)&&void 0!==e?e:1}function ft(t,e){var n,r=Math.abs(null!==(n=t.step)&&void 0!==n?n:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function ht(t,e){return x(t.step)?null:new B(t.step,e)}function dt(t){return x(t.max)||x(t.min)?x(t.max)&&x(t.min)?null:new R({max:t.max,min:t.min}):new z({max:t.max,min:t.min})}function pt(t,e){var n,r,i;return{formatter:null!==(n=t.format)&&void 0!==n?n:ot(function(t,e){return x(t.step)?Math.max(ut(e),2):ut(t.step)}(t,e)),keyScale:null!==(r=t.keyScale)&&void 0!==r?r:ct(t),pointerScale:null!==(i=t.pointerScale)&&void 0!==i?i:ft(t,e)}}function vt(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function bt(t){return{constraint:t.constraint,textProps:L.fromObject(pt(t.params,t.initialValue))}}var mt=function(){function t(e){h(this,t),this.controller=e}return p(t,[{key:"element",get:function(){return this.controller.view.element}},{key:"disabled",get:function(){return this.controller.viewProps.get("disabled")},set:function(t){this.controller.viewProps.set("disabled",t)}},{key:"hidden",get:function(){return this.controller.viewProps.get("hidden")},set:function(t){this.controller.viewProps.set("hidden",t)}},{key:"dispose",value:function(){this.controller.viewProps.set("disposed",!0)}},{key:"importState",value:function(t){return this.controller.importState(t)}},{key:"exportState",value:function(){return this.controller.exportState()}}]),t}(),gt=p(function t(e){h(this,t),this.target=e}),yt=function(t){a(n,gt);var e=s(n);function n(t,r,i){var o;return h(this,n),(o=e.call(this,t)).value=r,o.last=null===i||void 0===i||i,o}return p(n)}(),_t=function(t){a(n,gt);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).expanded=r,i}return p(n)}(),wt=function(t){a(n,gt);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).index=r,i}return p(n)}(),xt=function(t){a(n,gt);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).native=r,i}return p(n)}(),kt=function(t){a(n,mt);var e=s(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).onValueChange_=r.onValueChange_.bind(l(r)),r.emitter_=new O,r.controller.value.emitter.on("change",r.onValueChange_),r}return p(n,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"key",get:function(){return this.controller.value.binding.target.key}},{key:"tag",get:function(){return this.controller.tag},set:function(t){this.controller.tag=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}},{key:"refresh",value:function(){this.controller.value.fetch()}},{key:"onValueChange_",value:function(t){var e=this.controller.value;this.emitter_.emit("change",new yt(this,w(e.binding.target.read()),t.options.last))}}]),n}(),Ct=function(){function t(e,n){h(this,t),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new O}return p(t,[{key:"rawValue",get:function(){return this.value_.rawValue},set:function(t){this.value_.rawValue=t}},{key:"setRawValue",value:function(t,e){this.value_.setRawValue(t,e)}},{key:"fetch",value:function(){this.value_.rawValue=this.binding.read()}},{key:"push",value:function(){this.binding.write(this.value_.rawValue)}},{key:"onValueBeforeChange_",value:function(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}},{key:"onValueChange_",value:function(t){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}]),t}();function Et(t){return function(e){return function(n){if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};var r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}}function Mt(t){return{custom:function(e){return Et(e)(t)},boolean:Et(function(t){return"boolean"==typeof t?t:void 0})(t),number:Et(function(t){return"number"==typeof t?t:void 0})(t),string:Et(function(t){return"string"==typeof t?t:void 0})(t),function:Et(function(t){return"function"==typeof t?t:void 0})(t),constant:function(e){return Et(function(t){return t===e?e:void 0})(t)},raw:Et(function(t){return t})(t),object:function(e){return Et(function(t){var n;if(null!==(n=t)&&"object"===_(n))return function(t,e){return w(Object.keys(e).reduce(function(n,r){if(void 0!==n){var i=(0,e[r])(t[r]);return i.succeeded?Object.assign(Object.assign({},n),v({},r,i.value)):void 0}},{}))}(t,e)})(t)},array:function(e){return Et(function(t){var n;if(Array.isArray(t))return n=e,t.reduce(function(t,e){if(void 0!==t){var r=n(e);if(r.succeeded&&void 0!==r.value)return[].concat(m(t),[r.value])}},[])})(t)}}}var Pt={optional:Mt(!0),required:Mt(!1)};function At(t,e){var n=e(Pt),r=Pt.required.object(n)(t);return r.succeeded?r.value:void 0}function St(t,e,n,r){if(e&&!e(t))return!1;var i=At(t,n);return!!i&&r(i)}function Tt(t,e){var n;return M(null!==(n=null===t||void 0===t?void 0:t())&&void 0!==n?n:{},e)}function Ot(t){return"value"in t}function Vt(t){return!!(k(t)&&"binding"in t)&&P(t.binding)}var jt="http://www.w3.org/2000/svg";function Dt(t){t.offsetHeight}function Nt(t){return void 0!==t.ontouchstart}function Lt(){return w(globalThis).document}var zt={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Rt(t,e){var n=t.createElementNS(jt,"svg");return n.innerHTML=zt[e],n}function Bt(t,e,n){t.insertBefore(e,t.children[n])}function It(t){t.parentElement&&t.parentElement.removeChild(t)}function Ft(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function Ut(t){return t.relatedTarget?w(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function qt(t,e){t.emitter.on("change",function(t){e(t.rawValue)}),e(t.rawValue)}function Ht(t,e,n){qt(t.value(e),n)}var Yt="tp";function Kt(t){return function(e,n){return[Yt,"-",t,"v",e?"_".concat(e):"",n?"-".concat(n):""].join("")}}var Gt=Kt("lbl");var Wt=p(function t(e,n){var r=this;h(this,t),this.element=e.createElement("div"),this.element.classList.add(Gt()),n.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add(Gt("l")),Ht(n.props,"label",function(t){x(t)?r.element.classList.add(Gt(void 0,"nol")):(r.element.classList.remove(Gt(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(i),i.appendChild(function(t,e){var n=t.createDocumentFragment();return e.split("\n").map(function(e){return t.createTextNode(e)}).forEach(function(e,r){r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)}),n}(e,t)))}),this.element.appendChild(i),this.labelElement=i;var o=e.createElement("div");o.classList.add(Gt("v")),this.element.appendChild(o),this.valueElement=o}),Xt=function(){function t(e,n){h(this,t),this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new Wt(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}return p(t,[{key:"importProps",value:function(t){var e=this;return St(t,null,function(t){return{label:t.optional.string}},function(t){return e.props.set("label",t.label),!0})}},{key:"exportProps",value:function(){return Tt(null,{label:this.props.get("label")})}}]),t}();var $t=Kt(""),Qt={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},Zt=function(){function t(e){var n=this;h(this,t),this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;var r=this.view.element;this.blade.value("positions").emitter.on("change",function(){["veryfirst","first","last","verylast"].forEach(function(t){r.classList.remove($t(void 0,Qt[t]))}),n.blade.get("positions").forEach(function(t){r.classList.add($t(void 0,Qt[t]))})}),this.viewProps.handleDispose(function(){It(r)})}return p(t,[{key:"parent",get:function(){return this.parent_},set:function(t){this.parent_=t,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}},{key:"importState",value:function(t){var e=this;return St(t,null,function(t){return{disabled:t.required.boolean,hidden:t.required.boolean}},function(t){return e.viewProps.importState(t),!0})}},{key:"exportState",value:function(){return Tt(null,Object.assign({},this.viewProps.exportState()))}}]),t}(),Jt=function(t){a(n,Zt);var e=s(n);function n(t,r){var i;if(h(this,n),r.value!==r.valueController.value)throw S.shouldNeverHappen();var o=r.valueController.viewProps,a=new Xt(t,{blade:r.blade,props:r.props,valueController:r.valueController});return(i=e.call(this,Object.assign(Object.assign({},r),{view:new Wt(t,{props:r.props,viewProps:o}),viewProps:o}))).labelController=a,i.value=r.value,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),i}return p(n,[{key:"importState",value:function(t){var e=this;return St(t,function(r){var i,a,u;return o(f(n.prototype),"importState",e).call(e,r)&&e.labelController.importProps(r)&&(null===(u=null===(a=(i=e.valueController).importProps)||void 0===a?void 0:a.call(i,t))||void 0===u||u)},function(t){return{value:t.optional.raw}},function(t){return t.value&&(e.value.rawValue=t.value),!0})}},{key:"exportState",value:function(){var t,e,r,i=this;return Tt(function(){return o(f(n.prototype),"exportState",i).call(i)},Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),null!==(r=null===(e=(t=this.valueController).exportProps)||void 0===e?void 0:e.call(t))&&void 0!==r?r:{}))}}]),n}();function te(t){var e=Object.assign({},t);return delete e.value,e}var ee=function(t){a(n,Jt);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t,r)).tag=r.tag,i}return p(n,[{key:"importState",value:function(t){var e=this;return St(t,function(r){return o(f(n.prototype),"importState",e).call(e,te(t))},function(t){return{tag:t.optional.string}},function(t){return e.tag=t.tag,!0})}},{key:"exportState",value:function(){var t=this;return Tt(function(){return te(o(f(n.prototype),"exportState",t).call(t))},{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}]),n}();var ne=function(t){a(n,ee);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"importState",value:function(t){var e=this;return St(t,function(t){return o(f(n.prototype),"importState",e).call(e,t)},function(t){return{binding:t.required.object({value:t.required.raw})}},function(t){return e.value.binding.inject(t.binding.value),e.value.fetch(),!0})}}]),n}();function re(t){return Ot(t)&&function(t){if(!("binding"in t))return!1;var e=t.binding;return P(e)&&"read"in e&&"write"in e}(t.value)}function ie(t,e){for(;t.length<e;)t.push(void 0)}function oe(t,e){var n=[].concat(m(function(t){var e=t.indexOf(void 0);return w(e<0?t:t.slice(0,e))}(t)),[e]);return n.length>t.length?n.splice(0,n.length-t.length):ie(n,t.length),n}var ae=function(){function t(e){var n,r;h(this,t),this.emitter=new O,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=N((n=e.bufferSize,ie(r=[],n),r)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}return p(t,[{key:"rawValue",get:function(){return this.value_.rawValue},set:function(t){this.value_.rawValue=t}},{key:"setRawValue",value:function(t,e){this.value_.setRawValue(t,e)}},{key:"fetch",value:function(){this.value_.rawValue=oe(this.value_.rawValue,this.binding.read())}},{key:"onTick_",value:function(){this.fetch()}},{key:"onValueBeforeChange_",value:function(t){this.emitter.emit("beforechange",Object.assign(Object.assign({},t),{sender:this}))}},{key:"onValueChange_",value:function(t){this.emitter.emit("change",Object.assign(Object.assign({},t),{sender:this}))}}]),t}();var ue=function(t){a(n,ee);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"exportState",value:function(){var t=this;return Tt(function(){return o(f(n.prototype),"exportState",t).call(t)},{binding:{readonly:!0}})}}]),n}();function se(t){return Ot(t)&&function(t){if(!("binding"in t))return!1;var e=t.binding;return P(e)&&"read"in e&&!("write"in e)}(t.value)}var le=function(t){a(n,mt);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"title",get:function(){var t;return null!==(t=this.controller.buttonController.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller.buttonController.props.set("title",t)}},{key:"on",value:function(t,e){var n=this,r=e.bind(this);return this.controller.buttonController.emitter.on(t,function(t){r(new xt(n,t.nativeEvent))}),this}},{key:"off",value:function(t,e){return this.controller.buttonController.emitter.off(t,e),this}}]),n}();function ce(t,e){return function(n){!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}function fe(t,e){qt(t,function(t){e.textContent=null!==t&&void 0!==t?t:""})}var he=Kt("btn"),de=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(he()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("button");r.classList.add(he("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;var i=e.createElement("div");i.classList.add(he("t")),fe(n.props.value("title"),i),this.buttonElement.appendChild(i)}),pe=function(){function t(e,n){h(this,t),this.emitter=new O,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new de(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return p(t,[{key:"importProps",value:function(t){var e=this;return St(t,null,function(t){return{title:t.optional.string}},function(t){return e.props.set("title",t.title),!0})}},{key:"exportProps",value:function(){return Tt(null,{title:this.props.get("title")})}},{key:"onClick_",value:function(t){this.emitter.emit("click",{nativeEvent:t,sender:this})}}]),t}(),ve=function(t){a(n,Zt);var e=s(n);function n(t,r){var i;h(this,n);var o=new pe(t,{props:r.buttonProps,viewProps:r.viewProps}),a=new Xt(t,{blade:r.blade,props:r.labelProps,valueController:o});return(i=e.call(this,{blade:r.blade,view:a.view,viewProps:r.viewProps})).buttonController=o,i.labelController=a,i}return p(n,[{key:"importState",value:function(t){var e=this;return St(t,function(t){return o(f(n.prototype),"importState",e).call(e,t)&&e.buttonController.importProps(t)&&e.labelController.importProps(t)},function(){return{}},function(){return!0})}},{key:"exportState",value:function(){var t=this;return Tt(function(){return o(f(n.prototype),"exportState",t).call(t)},Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}]),n}(),be=function(){function t(e){h(this,t);var n=i(e.split("-"),2),r=n[0],o=n[1],a=r.split(".");this.major=parseInt(a[0],10),this.minor=parseInt(a[1],10),this.patch=parseInt(a[2],10),this.prerelease=null!==o&&void 0!==o?o:null}return p(t,[{key:"toString",value:function(){var t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}]),t}(),me=new be("2.0.3");function ge(t){return Object.assign({core:me},t)}var ye=ge({id:"button",type:"blade",accept:function(t){var e=At(t,function(t){return{title:t.required.string,view:t.required.constant("button"),label:t.optional.string}});return e?{params:e}:null},controller:function(t){return new ve(t.document,{blade:t.blade,buttonProps:L.fromObject({title:t.params.title}),labelProps:L.fromObject({label:t.params.label}),viewProps:t.viewProps})},api:function(t){return t.controller instanceof ve?new le(t.controller):null}});var _e=function(){function t(e,n){h(this,t),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new O,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}return p(t,[{key:"children",get:function(){var t=this;return this.controller_.rack.children.map(function(e){return t.pool_.createApi(e)})}},{key:"addBinding",value:function(t,e,n){var r=null!==n&&void 0!==n?n:{},i=this.controller_.element.ownerDocument,o=this.pool_.createBinding(i,function(t,e){if(!T.isBindable(t))throw S.notBindable();return new T(t,e)}(t,e),r),a=this.pool_.createBindingApi(o);return this.add(a,r.index)}},{key:"addFolder",value:function(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}(this,t)}},{key:"addButton",value:function(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}(this,t)}},{key:"addTab",value:function(t){return function(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}(this,t)}},{key:"add",value:function(t,e){var n=t.controller;return this.controller_.rack.add(n,e),t}},{key:"remove",value:function(t){this.controller_.rack.remove(t.controller)}},{key:"addBlade",value:function(t){var e=this.controller_.element.ownerDocument,n=this.pool_.createBlade(e,t),r=this.pool_.createApi(n);return this.add(r,t.index)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}},{key:"refresh",value:function(){this.children.forEach(function(t){var e;k(e=t)&&"refresh"in e&&"function"==typeof e.refresh&&t.refresh()})}},{key:"onRackValueChange_",value:function(t){var e=t.bladeController,n=this.pool_.createApi(e),r=Vt(e.value)?e.value.binding:null;this.emitter_.emit("change",new yt(n,r?r.target.read():e.value.rawValue,t.options.last))}}]),t}(),we=function(t){a(n,mt);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t)).rackApi_=new _e(t.rackController,r),i}return p(n,[{key:"refresh",value:function(){this.rackApi_.refresh()}}]),n}(),xe=function(t){a(n,Zt);var e=s(n);function n(t){var r;return h(this,n),(r=e.call(this,{blade:t.blade,view:t.view,viewProps:t.rackController.viewProps})).rackController=t.rackController,r}return p(n,[{key:"importState",value:function(t){var e=this;return St(t,function(t){return o(f(n.prototype),"importState",e).call(e,t)},function(t){return{children:t.required.array(t.required.raw)}},function(t){return e.rackController.rack.children.every(function(e,n){return e.importState(t.children[n])})})}},{key:"exportState",value:function(){var t=this;return Tt(function(){return o(f(n.prototype),"exportState",t).call(t)},{children:this.rackController.rack.children.map(function(t){return t.exportState()})})}}]),n}();function ke(t){return"rackController"in t}var Ce=function(){function t(e){h(this,t),this.emitter=new O,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}return p(t,[{key:"items",get:function(){return this.items_}},{key:"allItems",value:function(){return Array.from(this.cache_)}},{key:"find",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(this.allItems());try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t(r))return r}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"includes",value:function(t){return this.cache_.has(t)}},{key:"add",value:function(t,e){var n=this;if(this.includes(t))throw S.shouldNeverHappen();var r=void 0!==e?e:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);var i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(function(t){n.cache_.add(t)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})}},{key:"remove",value:function(t){var e=this,n=this.items_.indexOf(t);if(!(n<0)){this.items_.splice(n,1),this.cache_.delete(t);var r=this.extract_(t);r&&(r.allItems().forEach(function(t){e.cache_.delete(t)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:t,root:this,target:this})}}},{key:"onSubListAdd_",value:function(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}},{key:"onSubListRemove_",value:function(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}]),t}();function Ee(t){return ke(t)?t.rackController.rack.bcSet_:null}var Me=function(){function t(e){var n,r;h(this,t),this.emitter=new O,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=null!==(n=e.blade)&&void 0!==n?n:null,null===(r=this.blade_)||void 0===r||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Ce(Ee),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return p(t,[{key:"children",get:function(){return this.bcSet_.items}},{key:"add",value:function(t,e){var n;null===(n=t.parent)||void 0===n||n.remove(t),t.parent=this,this.bcSet_.add(t,e)}},{key:"remove",value:function(t){t.parent=null,this.bcSet_.remove(t)}},{key:"find",value:function(t){return this.bcSet_.allItems().filter(t)}},{key:"onSetAdd_",value:function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,root:e,sender:this}),e){var n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),Ot(n))n.value.emitter.on("change",this.onChildValueChange_);else if(ke(n)){var r=n.rackController.rack;if(r){var i=r.emitter;i.on("layout",this.onRackLayout_),i.on("valuechange",this.onRackValueChange_)}}}}},{key:"onSetRemove_",value:function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,root:e,sender:this}),e){var n=t.item;if(Ot(n))n.value.emitter.off("change",this.onChildValueChange_);else if(ke(n)){var r=n.rackController.rack;if(r){var i=r.emitter;i.off("layout",this.onRackLayout_),i.off("valuechange",this.onRackValueChange_)}}}}},{key:"updatePositions_",value:function(){var t=this,e=this.bcSet_.items.filter(function(t){return!t.viewProps.get("hidden")}),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(function(e){var i=[];e===n&&(i.push("first"),t.blade_&&!t.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),e===r&&(i.push("last"),t.blade_&&!t.blade_.get("positions").includes("verylast")||i.push("verylast")),e.blade.set("positions",i)})}},{key:"onChildPositionsChange_",value:function(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildViewPropsChange_",value:function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onChildDispose_",value:function(){var t=this;this.bcSet_.items.filter(function(t){return t.viewProps.get("disposed")}).forEach(function(e){t.bcSet_.remove(e)})}},{key:"onChildValueChange_",value:function(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Ot(r)&&r.value===e)return r}return null}(this.find(Ot),t.sender);if(!e)throw S.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:e,options:t.options,sender:this})}},{key:"onRackLayout_",value:function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}},{key:"onRackValueChange_",value:function(t){this.emitter.emit("valuechange",{bladeController:t.bladeController,options:t.options,sender:this})}},{key:"onBladePositionsChange_",value:function(){this.updatePositions_()}}]),t}(),Pe=function(){function t(e){var n=this;h(this,t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;var r=new Me({blade:e.root?void 0:e.blade,viewProps:e.viewProps});r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.rack=r,this.viewProps.handleDispose(function(){for(var t=n.rack.children.length-1;t>=0;t--){n.rack.children[t].viewProps.set("disposed",!0)}})}return p(t,[{key:"onRackAdd_",value:function(t){t.root&&Bt(this.element,t.bladeController.view.element,t.index)}},{key:"onRackRemove_",value:function(t){t.root&&It(t.bladeController.view.element)}}]),t}();function Ae(){return new L({positions:N([],{equals:E})})}var Se=function(t){a(n,L);var e=s(n);function n(t){return h(this,n),e.call(this,t)}return p(n,[{key:"styleExpanded",get:function(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}},{key:"styleHeight",get:function(){if(!this.styleExpanded)return"0";var t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!x(t)?"".concat(t,"px"):"auto"}},{key:"bindExpandedClass",value:function(t,e){var n=this,r=function(){n.styleExpanded?t.classList.add(e):t.classList.remove(e)};Ht(this,"expanded",r),Ht(this,"temporaryExpanded",r)}},{key:"cleanUpTransition",value:function(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}],[{key:"create",value:function(t){var e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null};return new n(L.createCore(e))}}]),n}();function Te(t,e){e.style.height=t.styleHeight}function Oe(t,e){t.value("expanded").emitter.on("beforechange",function(){if(t.set("completed",!1),x(t.get("expandedHeight"))){var n=(r=t,s=0,a=function(){r.set("expandedHeight",null),r.set("temporaryExpanded",!0),Dt(i),s=i.clientHeight,r.set("temporaryExpanded",null),Dt(i)},u=(o=i=e).style.transition,o.style.transition="none",a(),o.style.transition=u,s);n>0&&t.set("expandedHeight",n)}var r,i,o,a,u,s;t.set("shouldFixHeight",!0),Dt(e)}),t.emitter.on("change",function(){Te(t,e)}),Te(t,e),e.addEventListener("transitionend",function(e){"height"===e.propertyName&&t.cleanUpTransition()})}var Ve=function(t){a(n,we);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t,r)).emitter_=new O,i.controller.foldable.value("expanded").emitter.on("change",function(t){i.emitter_.emit("fold",new _t(l(i),t.sender.rawValue))}),i.rackApi_.on("change",function(t){i.emitter_.emit("change",t)}),i}return p(n,[{key:"expanded",get:function(){return this.controller.foldable.get("expanded")},set:function(t){this.controller.foldable.set("expanded",t)}},{key:"title",get:function(){return this.controller.props.get("title")},set:function(t){this.controller.props.set("title",t)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addBinding",value:function(t,e,n){return this.rackApi_.addBinding(t,e,n)}},{key:"addFolder",value:function(t){return this.rackApi_.addFolder(t)}},{key:"addButton",value:function(t){return this.rackApi_.addButton(t)}},{key:"addTab",value:function(t){return this.rackApi_.addTab(t)}},{key:"add",value:function(t,e){return this.rackApi_.add(t,e)}},{key:"remove",value:function(t){this.rackApi_.remove(t)}},{key:"addBlade",value:function(t){return this.rackApi_.addBlade(t)}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}]),n}(),je=Kt("cnt"),De=p(function t(e,n){var r,i=this;h(this,t),this.className_=Kt(null!==(r=n.viewName)&&void 0!==r?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),je()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ht(this.foldable_,"completed",ce(this.element,this.className_(void 0,"cpl")));var o=e.createElement("button");o.classList.add(this.className_("b")),Ht(n.props,"title",function(t){x(t)?i.element.classList.add(i.className_(void 0,"not")):i.element.classList.remove(i.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;var a=e.createElement("div");a.classList.add(this.className_("i")),this.element.appendChild(a);var u=e.createElement("div");u.classList.add(this.className_("t")),fe(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;var s=e.createElement("div");s.classList.add(this.className_("m")),this.buttonElement.appendChild(s);var l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}),Ne=function(t){a(n,xe);var e=s(n);function n(t,r){var i,o;h(this,n);var a=Se.create(null===(o=r.expanded)||void 0===o||o),u=new De(t,{foldable:a,props:r.props,viewName:r.root?"rot":void 0,viewProps:r.viewProps});return(i=e.call(this,Object.assign(Object.assign({},r),{rackController:new Pe({blade:r.blade,element:u.containerElement,root:r.root,viewProps:r.viewProps}),view:u}))).onTitleClick_=i.onTitleClick_.bind(l(i)),i.props=r.props,i.foldable=a,Oe(i.foldable,i.view.containerElement),i.rackController.rack.emitter.on("add",function(){i.foldable.cleanUpTransition()}),i.rackController.rack.emitter.on("remove",function(){i.foldable.cleanUpTransition()}),i.view.buttonElement.addEventListener("click",i.onTitleClick_),i}return p(n,[{key:"document",get:function(){return this.view.element.ownerDocument}},{key:"importState",value:function(t){var e=this;return St(t,function(t){return o(f(n.prototype),"importState",e).call(e,t)},function(t){return{expanded:t.required.boolean,title:t.optional.string}},function(t){return e.foldable.set("expanded",t.expanded),e.props.set("title",t.title),!0})}},{key:"exportState",value:function(){var t=this;return Tt(function(){return o(f(n.prototype),"exportState",t).call(t)},{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}},{key:"onTitleClick_",value:function(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}]),n}(),Le=ge({id:"folder",type:"blade",accept:function(t){var e=At(t,function(t){return{title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}});return e?{params:e}:null},controller:function(t){return new Ne(t.document,{blade:t.blade,expanded:t.params.expanded,props:L.fromObject({title:t.params.title}),viewProps:t.viewProps})},api:function(t){return t.controller instanceof Ne?new Ve(t.controller,t.pool):null}}),ze=Kt("");function Re(t,e){return ce(t,ze(void 0,e))}var Be=function(t){a(n,L);var e=s(n);function n(t){var r,o;h(this,n),(r=e.call(this,t)).onDisabledChange_=r.onDisabledChange_.bind(l(r)),r.onParentChange_=r.onParentChange_.bind(l(r)),r.onParentGlobalDisabledChange_=r.onParentGlobalDisabledChange_.bind(l(r));var a,u=i((a=N(r.getGlobalDisabled_()),[new D(a),function(t,e){a.setRawValue(t,e)}]),2);return r.globalDisabled_=u[0],r.setGlobalDisabled_=u[1],r.value("disabled").emitter.on("change",r.onDisabledChange_),r.value("parent").emitter.on("change",r.onParentChange_),null===(o=r.get("parent"))||void 0===o||o.globalDisabled.emitter.on("change",r.onParentGlobalDisabledChange_),r}return p(n,[{key:"globalDisabled",get:function(){return this.globalDisabled_}},{key:"bindClassModifiers",value:function(t){qt(this.globalDisabled_,Re(t,"disabled")),Ht(this,"hidden",Re(t,"hidden"))}},{key:"bindDisabled",value:function(t){qt(this.globalDisabled_,function(e){t.disabled=e})}},{key:"bindTabIndex",value:function(t){qt(this.globalDisabled_,function(e){t.tabIndex=e?-1:0})}},{key:"handleDispose",value:function(t){this.value("disposed").emitter.on("change",function(e){e&&t()})}},{key:"importState",value:function(t){this.set("disabled",t.disabled),this.set("hidden",t.hidden)}},{key:"exportState",value:function(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}},{key:"getGlobalDisabled_",value:function(){var t=this.get("parent");return!!t&&t.globalDisabled.rawValue||this.get("disabled")}},{key:"updateGlobalDisabled_",value:function(){this.setGlobalDisabled_(this.getGlobalDisabled_())}},{key:"onDisabledChange_",value:function(){this.updateGlobalDisabled_()}},{key:"onParentGlobalDisabledChange_",value:function(){this.updateGlobalDisabled_()}},{key:"onParentChange_",value:function(t){var e,n=t.previousRawValue;null===n||void 0===n||n.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),null===(e=this.get("parent"))||void 0===e||e.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}],[{key:"create",value:function(t){var e,r,i,o=null!==t&&void 0!==t?t:{};return new n(L.createCore({disabled:null!==(e=o.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(r=o.hidden)&&void 0!==r&&r,parent:null!==(i=o.parent)&&void 0!==i?i:null}))}}]),n}(),Ie=Kt("tbp"),Fe=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(Ie()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Ie("c")),this.element.appendChild(r),this.containerElement=r}),Ue=Kt("tbi"),qe=p(function t(e,n){var r=this;h(this,t),this.element=e.createElement("div"),this.element.classList.add(Ue()),n.viewProps.bindClassModifiers(this.element),Ht(n.props,"selected",function(t){t?r.element.classList.add(Ue(void 0,"sel")):r.element.classList.remove(Ue(void 0,"sel"))});var i=e.createElement("button");i.classList.add(Ue("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;var o=e.createElement("div");o.classList.add(Ue("t")),fe(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}),He=function(){function t(e,n){h(this,t),this.emitter=new O,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new qe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return p(t,[{key:"onClick_",value:function(){this.emitter.emit("click",{sender:this})}}]),t}(),Ye=function(t){a(n,xe);var e=s(n);function n(t,r){var i;h(this,n);var o=new Fe(t,{viewProps:r.viewProps});return(i=e.call(this,Object.assign(Object.assign({},r),{rackController:new Pe({blade:r.blade,element:o.containerElement,viewProps:r.viewProps}),view:o}))).onItemClick_=i.onItemClick_.bind(l(i)),i.ic_=new He(t,{props:r.itemProps,viewProps:Be.create()}),i.ic_.emitter.on("click",i.onItemClick_),i.props=r.props,Ht(i.props,"selected",function(t){i.itemController.props.set("selected",t),i.viewProps.set("hidden",!t)}),i}return p(n,[{key:"itemController",get:function(){return this.ic_}},{key:"importState",value:function(t){var e=this;return St(t,function(t){return o(f(n.prototype),"importState",e).call(e,t)},function(t){return{selected:t.required.boolean,title:t.required.string}},function(t){return e.ic_.props.set("selected",t.selected),e.ic_.props.set("title",t.title),!0})}},{key:"exportState",value:function(){var t=this;return Tt(function(){return o(f(n.prototype),"exportState",t).call(t)},{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}},{key:"onItemClick_",value:function(){this.props.set("selected",!0)}}]),n}(),Ke=function(t){a(n,we);var e=s(n);function n(t,r){var i;return h(this,n),(i=e.call(this,t,r)).emitter_=new O,i.onSelect_=i.onSelect_.bind(l(i)),i.pool_=r,i.rackApi_.on("change",function(t){i.emitter_.emit("change",t)}),i.controller.tab.selectedIndex.emitter.on("change",i.onSelect_),i}return p(n,[{key:"pages",get:function(){return this.rackApi_.children}},{key:"addPage",value:function(t){var e=this.controller.view.element.ownerDocument,n=new Ye(e,{blade:Ae(),itemProps:L.fromObject({selected:!1,title:t.title}),props:L.fromObject({selected:!1}),viewProps:Be.create()}),r=this.pool_.createApi(n);return this.rackApi_.add(r,t.index)}},{key:"removePage",value:function(t){this.rackApi_.remove(this.rackApi_.children[t])}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}},{key:"onSelect_",value:function(t){this.emitter_.emit("select",new wt(this,t.rawValue))}}]),n}(),Ge=function(t){a(n,we);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"title",get:function(){var t;return null!==(t=this.controller.itemController.props.get("title"))&&void 0!==t?t:""},set:function(t){this.controller.itemController.props.set("title",t)}},{key:"selected",get:function(){return this.controller.props.get("selected")},set:function(t){this.controller.props.set("selected",t)}},{key:"children",get:function(){return this.rackApi_.children}},{key:"addButton",value:function(t){return this.rackApi_.addButton(t)}},{key:"addFolder",value:function(t){return this.rackApi_.addFolder(t)}},{key:"addTab",value:function(t){return this.rackApi_.addTab(t)}},{key:"add",value:function(t,e){this.rackApi_.add(t,e)}},{key:"remove",value:function(t){this.rackApi_.remove(t)}},{key:"addBinding",value:function(t,e,n){return this.rackApi_.addBinding(t,e,n)}},{key:"addBlade",value:function(t){return this.rackApi_.addBlade(t)}}]),n}(),We=-1,Xe=function(){function t(){h(this,t),this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=N(!0),this.selectedIndex=N(We),this.items_=[]}return p(t,[{key:"add",value:function(t,e){var n=null!==e&&void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),t.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}},{key:"remove",value:function(t){var e=this.items_.indexOf(t);e<0||(this.items_.splice(e,1),t.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}},{key:"keepSelection_",value:function(){if(0===this.items_.length)return this.selectedIndex.rawValue=We,void(this.empty.rawValue=!0);var t=this.items_.findIndex(function(t){return t.rawValue});t<0?(this.items_.forEach(function(t,e){t.rawValue=0===e}),this.selectedIndex.rawValue=0):(this.items_.forEach(function(e,n){e.rawValue=n===t}),this.selectedIndex.rawValue=t),this.empty.rawValue=!1}},{key:"onItemSelectedChange_",value:function(t){if(t.rawValue){var e=this.items_.findIndex(function(e){return e===t.sender});this.items_.forEach(function(t,n){t.rawValue=n===e}),this.selectedIndex.rawValue=e}else this.keepSelection_()}}]),t}(),$e=Kt("tab"),Qe=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add($e(),je()),n.viewProps.bindClassModifiers(this.element),qt(n.empty,ce(this.element,$e(void 0,"nop")));var r=e.createElement("div");r.classList.add($e("t")),this.element.appendChild(r),this.itemsElement=r;var i=e.createElement("div");i.classList.add($e("i")),this.element.appendChild(i);var o=e.createElement("div");o.classList.add($e("c")),this.element.appendChild(o),this.contentsElement=o}),Ze=function(t){a(n,xe);var e=s(n);function n(t,r){var i;h(this,n);var o=new Xe,a=new Qe(t,{empty:o.empty,viewProps:r.viewProps});(i=e.call(this,{blade:r.blade,rackController:new Pe({blade:r.blade,element:a.contentsElement,viewProps:r.viewProps}),view:a})).onRackAdd_=i.onRackAdd_.bind(l(i)),i.onRackRemove_=i.onRackRemove_.bind(l(i));var u=i.rackController.rack;return u.emitter.on("add",i.onRackAdd_),u.emitter.on("remove",i.onRackRemove_),i.tab=o,i}return p(n,[{key:"add",value:function(t,e){this.rackController.rack.add(t,e)}},{key:"remove",value:function(t){this.rackController.rack.remove(this.rackController.rack.children[t])}},{key:"onRackAdd_",value:function(t){if(t.root){var e=t.bladeController;Bt(this.view.itemsElement,e.itemController.view.element,t.index),e.itemController.viewProps.set("parent",this.viewProps),this.tab.add(e.props.value("selected"))}}},{key:"onRackRemove_",value:function(t){if(t.root){var e=t.bladeController;It(e.itemController.view.element),e.itemController.viewProps.set("parent",null),this.tab.remove(e.props.value("selected"))}}}]),n}(),Je=ge({id:"tab",type:"blade",accept:function(t){var e=At(t,function(t){return{pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}});return e&&0!==e.pages.length?{params:e}:null},controller:function(t){var e=new Ze(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(function(n){var r=new Ye(t.document,{blade:Ae(),itemProps:L.fromObject({selected:!1,title:n.title}),props:L.fromObject({selected:!1}),viewProps:Be.create()});e.add(r)}),e},api:function(t){return t.controller instanceof Ze?new Ke(t.controller,t.pool):t.controller instanceof Ye?new Ge(t.controller,t.pool):null}});function tn(t,e){var n=t.accept(e.params);if(!n)return null;var r=At(e.params,function(t){return{disabled:t.optional.boolean,hidden:t.optional.boolean}});return t.controller({blade:Ae(),document:e.document,params:w(Object.assign(Object.assign({},n.params),{disabled:null===r||void 0===r?void 0:r.disabled,hidden:null===r||void 0===r?void 0:r.hidden})),viewProps:Be.create({disabled:null===r||void 0===r?void 0:r.disabled,hidden:null===r||void 0===r?void 0:r.hidden})})}var en=function(t){a(n,kt);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"options",get:function(){return this.controller.valueController.props.get("options")},set:function(t){this.controller.valueController.props.set("options",t)}}]),n}(),nn=function(){function t(){h(this,t),this.disabled=!1,this.emitter=new O}return p(t,[{key:"dispose",value:function(){}},{key:"tick",value:function(){this.disabled||this.emitter.emit("tick",{sender:this})}}]),t}(),rn=function(){function t(e,n){h(this,t),this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new O,this.interval_=n,this.setTimer_()}return p(t,[{key:"disabled",get:function(){return this.disabled_},set:function(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}},{key:"dispose",value:function(){this.clearTimer_()}},{key:"clearTimer_",value:function(){if(null!==this.timerId_){var t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}}},{key:"setTimer_",value:function(){if(this.clearTimer_(),!(this.interval_<=0)){var t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}}},{key:"onTick_",value:function(){this.disabled_||this.emitter.emit("tick",{sender:this})}}]),t}(),on=function(){function t(e){h(this,t),this.constraints=e}return p(t,[{key:"constrain",value:function(t){return this.constraints.reduce(function(t,e){return e.constrain(t)},t)}}]),t}();function an(t,e){if(t instanceof e)return t;if(t instanceof on){var n=t.constraints.reduce(function(t,n){return t||(n instanceof e?n:null)},null);if(n)return n}return null}var un=function(){function t(e){h(this,t),this.values=L.fromObject({options:e})}return p(t,[{key:"constrain",value:function(t){var e=this.values.get("options");return 0===e.length?t:e.filter(function(e){return e.value===t}).length>0?t:e[0].value}}]),t}();function sn(t){var e,n=Pt;return Array.isArray(t)?null===(e=At({items:t},function(t){return{items:t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))}}))||void 0===e?void 0:e.items:"object"===_(t)?n.required.raw(t).value:void 0}function ln(t){if(Array.isArray(t))return t;var e=[];return Object.keys(t).forEach(function(n){e.push({text:n,value:t[n]})}),e}function cn(t){return x(t)?null:new un(ln(w(t)))}var fn=Kt("lst"),hn=function(){function t(e,n){var r=this;h(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(fn()),n.viewProps.bindClassModifiers(this.element);var i=e.createElement("select");i.classList.add(fn("s")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;var o=e.createElement("div");o.classList.add(fn("m")),o.appendChild(Rt(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Ht(this.props_,"options",function(t){Ft(r.selectElement),t.forEach(function(t){var n=e.createElement("option");n.textContent=t.text,r.selectElement.appendChild(n)}),r.update_()})}return p(t,[{key:"update_",value:function(){var t=this.props_.get("options").map(function(t){return t.value});this.selectElement.selectedIndex=t.indexOf(this.value_.rawValue)}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),dn=function(){function t(e,n){h(this,t),this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new hn(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return p(t,[{key:"onSelectChange_",value:function(t){var e=w(t.currentTarget);this.value.rawValue=this.props.get("options")[e.selectedIndex].value}},{key:"importProps",value:function(t){var e=this;return St(t,null,function(t){return{options:t.required.custom(sn)}},function(t){return e.props.set("options",ln(t.options)),!0})}},{key:"exportProps",value:function(){return Tt(null,{options:this.props.get("options")})}}]),t}(),pn=Kt("pop"),vn=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(pn()),n.viewProps.bindClassModifiers(this.element),qt(n.shows,ce(this.element,pn(void 0,"v")))}),bn=p(function t(e,n){h(this,t),this.shows=N(!1),this.viewProps=n.viewProps,this.view=new vn(e,{shows:this.shows,viewProps:this.viewProps})}),mn=Kt("txt"),gn=function(){function t(e,n){h(this,t),this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(mn()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);var r=e.createElement("input");r.classList.add(mn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}return p(t,[{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),t}(),yn=function(){function t(e,n){h(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new gn(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return p(t,[{key:"onInputChange_",value:function(t){var e=w(t.currentTarget).value,n=this.parser_(e);x(n)||(this.value.rawValue=n),this.view.refresh()}}]),t}();function _n(t){return"false"!==t&&!!t}function wn(t){return function(t){return String(t)}(t)}var xn=ot(0);function kn(t){return xn(t)+"%"}function Cn(t){return String(t)}function En(t){return t}function Mn(t){var e=t.primary,n=t.secondary,r=t.forward,i=t.backward,o=!1;function a(t){o||(o=!0,t(),o=!1)}e.emitter.on("change",function(t){a(function(){n.setRawValue(r(e.rawValue,n.rawValue),t.options)})}),n.emitter.on("change",function(t){a(function(){e.setRawValue(i(e.rawValue,n.rawValue),t.options)}),a(function(){n.setRawValue(r(e.rawValue,n.rawValue),t.options)})}),a(function(){n.setRawValue(r(e.rawValue,n.rawValue),{forceEmit:!1,last:!0})})}function Pn(t,e){var n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function An(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function Sn(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Tn(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function On(t,e){var n,r,i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-((null!==(n=i&&i.scrollX)&&void 0!==n?n:0)+o.left),y:t.pageY-((null!==(r=i&&i.scrollY)&&void 0!==r?r:0)+o.top)}}var Vn=function(){function t(e){h(this,t),this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new O,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}return p(t,[{key:"computePosition_",value:function(t){var e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}},{key:"onMouseDown_",value:function(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(On(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseMove_",value:function(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(On(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onDocumentMouseUp_",value:function(t){var e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(On(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}},{key:"onTouchStart_",value:function(t){t.preventDefault();var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchMove_",value:function(t){var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}},{key:"onTouchEnd_",value:function(t){var e,n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:t.shiftKey})}}]),t}(),jn=Kt("txt"),Dn=function(){function t(e,n){h(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(jn(),jn(void 0,"num")),n.arrayPosition&&this.element.classList.add(jn(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(jn("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(jn()),this.inputElement.classList.add(jn("i"));var i=e.createElement("div");i.classList.add(jn("k")),this.element.appendChild(i),this.knobElement=i;var o=e.createElementNS(jt,"svg");o.classList.add(jn("g")),this.knobElement.appendChild(o);var a=e.createElementNS(jt,"path");a.classList.add(jn("gb")),o.appendChild(a),this.guideBodyElem_=a;var u=e.createElementNS(jt,"path");u.classList.add(jn("gh")),o.appendChild(u),this.guideHeadElem_=u;var s=e.createElement("div");s.classList.add(Kt("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}return p(t,[{key:"onDraggingChange_",value:function(t){if(null!==t.rawValue){this.element.classList.add(jn(void 0,"drg"));var e=t.rawValue/this.props_.get("pointerScale"),n=e+(e>0?-1:e<0?1:0),r=st(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M ".concat(n+r,",0 L").concat(n,",4 L").concat(n+r,",8"),"M ".concat(e,",-1 L").concat(e,",9")].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L".concat(e,",4"));var i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left="".concat(e,"px")}else this.element.classList.remove(jn(void 0,"drg"))}},{key:"refresh",value:function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}},{key:"onChange_",value:function(){this.refresh()}}]),t}(),Nn=function(){function t(e,n){var r;h(this,t),this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=null!==(r=n.sliderProps)&&void 0!==r?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=N(null),this.view=new Dn(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);var i=new Vn(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}return p(t,[{key:"constrainValue_",value:function(t){var e,n,r=null===(e=this.sliderProps_)||void 0===e?void 0:e.get("min"),i=null===(n=this.sliderProps_)||void 0===n?void 0:n.get("max"),o=t;return void 0!==r&&(o=Math.max(o,r)),void 0!==i&&(o=Math.min(o,i)),o}},{key:"onInputChange_",value:function(t){var e=w(t.currentTarget).value,n=this.parser_(e);x(n)||(this.value.rawValue=this.constrainValue_(n)),this.view.refresh()}},{key:"onInputKeyDown_",value:function(t){var e=Pn(this.props.get("keyScale"),An(t));0!==e&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+e),{forceEmit:!1,last:!1})}},{key:"onInputKeyUp_",value:function(t){0!==Pn(this.props.get("keyScale"),An(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},{key:"onPointerDown_",value:function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}},{key:"computeDraggingValue_",value:function(t){if(!t.point)return null;var e=t.point.x-t.bounds.width/2;return this.constrainValue_(this.originRawValue_+e*this.props.get("pointerScale"))}},{key:"onPointerMove_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}},{key:"onPointerUp_",value:function(t){var e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}]),t}(),Ln=Kt("sld"),zn=function(){function t(e,n){h(this,t),this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Ln()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(Ln("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;var i=e.createElement("div");i.classList.add(Ln("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}return p(t,[{key:"update_",value:function(){var t=st(at(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width="".concat(t,"%")}},{key:"onChange_",value:function(){this.update_()}}]),t}(),Rn=function(){function t(e,n){h(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new zn(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}return p(t,[{key:"handlePointerEvent_",value:function(t,e){t.point&&this.value.setRawValue(at(st(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("min"),this.props.get("max")),e)}},{key:"onPointerDownOrMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Pn(this.props.get("keyScale"),Sn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){0!==Pn(this.props.get("keyScale"),Sn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),Bn=Kt("sldtxt"),In=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(Bn());var r=e.createElement("div");r.classList.add(Bn("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(Bn("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}),Fn=function(){function t(e,n){h(this,t),this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new Rn(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new Nn(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new In(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return p(t,[{key:"sliderController",get:function(){return this.sliderC_}},{key:"textController",get:function(){return this.textC_}},{key:"importProps",value:function(t){var e=this;return St(t,null,function(t){return{max:t.required.number,min:t.required.number}},function(t){var n=e.sliderC_.props;return n.set("max",t.max),n.set("min",t.min),!0})}},{key:"exportProps",value:function(){var t=this.sliderC_.props;return Tt(null,{max:t.get("max"),min:t.get("min")})}}]),t}();function Un(t){return{sliderProps:new L({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new L({formatter:N(t.formatter),keyScale:t.keyScale,pointerScale:N(t.pointerScale)})}}var qn={containerUnitSize:"cnt-usz"};function Hn(t){return"--".concat(qn[t])}function Yn(t){return vt(t)}function Kn(t){if(C(t))return At(t,Yn)}function Gn(t,e){if(t){var n=[],r=ht(t,e);r&&n.push(r);var i=dt(t);return i&&n.push(i),new on(n)}}function Wn(t){if("inline"===t||"popup"===t)return t}function Xn(t,e){t.write(e)}var $n=Kt("ckb"),Qn=function(){function t(e,n){h(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add($n()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("label");r.classList.add($n("l")),this.element.appendChild(r),this.labelElement=r;var i=e.createElement("input");i.classList.add($n("i")),i.type="checkbox",this.labelElement.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);var o=e.createElement("div");o.classList.add($n("w")),this.labelElement.appendChild(o);var a=Rt(e,"check");o.appendChild(a),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}return p(t,[{key:"update_",value:function(){this.inputElement.checked=this.value.rawValue}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),Zn=function(){function t(e,n){h(this,t),this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Qn(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}return p(t,[{key:"onInputChange_",value:function(t){var e=w(t.currentTarget);this.value.rawValue=e.checked,t.preventDefault(),t.stopPropagation()}},{key:"onLabelMouseDown_",value:function(t){t.preventDefault()}}]),t}();var Jn=ge({id:"input-bool",type:"input",accept:function(t,e){if("boolean"!=typeof t)return null;var n=At(e,function(t){return{options:t.optional.custom(sn),readonly:t.optional.constant(!1)}});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return _n},constraint:function(t){return e=t.params,n=[],(r=cn(e.options))&&n.push(r),new on(n);var e,n,r},writer:function(t){return Xn}},controller:function(t){var e=t.document,n=t.value,r=t.constraint,i=r&&an(r,un);return i?new dn(e,{props:new L({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new Zn(e,{value:n,viewProps:t.viewProps})},api:function(t){return"boolean"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof dn?new en(t.controller):null}}),tr=Kt("col"),er=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(tr()),n.foldable.bindExpandedClass(this.element,tr(void 0,"expanded")),Ht(n.foldable,"completed",ce(this.element,tr(void 0,"cpl")));var r=e.createElement("div");r.classList.add(tr("h")),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(tr("s")),r.appendChild(i),this.swatchElement=i;var o=e.createElement("div");if(o.classList.add(tr("t")),r.appendChild(o),this.textElement=o,"inline"===n.pickerLayout){var a=e.createElement("div");a.classList.add(tr("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null});function nr(t,e,n){var r,i,o,a=lt(t,360),u=st(e/100,0,1),s=st(n/100,0,1),l=s*u,c=l*(1-Math.abs(a/60%2-1)),f=s-l;return a>=0&&a<60?(r=l,i=c,o=0):a>=60&&a<120?(r=c,i=l,o=0):a>=120&&a<180?(r=0,i=l,o=c):a>=180&&a<240?(r=0,i=c,o=l):a>=240&&a<300?(r=c,i=0,o=l):(r=l,i=0,o=c),[255*(r+f),255*(i+f),255*(o+f)]}function rr(t){return[t[0],t[1],t[2]]}function ir(t,e){return[t[0],t[1],t[2],e]}var or={hsl:{hsl:function(t,e,n){return[t,e,n]},hsv:function(t,e,n){var r=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==r?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){var r,i,o,a=(t%360+360)%360,u=st(e/100,0,1),s=st(n/100,0,1),l=(1-Math.abs(2*s-1))*u,c=l*(1-Math.abs(a/60%2-1)),f=s-l/2;return a>=0&&a<60?(r=l,i=c,o=0):a>=60&&a<120?(r=c,i=l,o=0):a>=120&&a<180?(r=0,i=l,o=c):a>=180&&a<240?(r=0,i=c,o=l):a>=240&&a<300?(r=c,i=0,o=l):(r=l,i=0,o=c),[255*(r+f),255*(i+f),255*(o+f)]}},hsv:{hsl:function(t,e,n){var r=100-Math.abs(n*(200-e)/100-100);return[t,0!==r?e*n/r:0,n*(200-e)/200]},hsv:function(t,e,n){return[t,e,n]},rgb:nr},rgb:{hsl:function(t,e,n){var r=st(t/255,0,1),i=st(e/255,0,1),o=st(n/255,0,1),a=Math.max(r,i,o),u=Math.min(r,i,o),s=a-u,l=0,c=0,f=(u+a)/2;return 0!==s&&(c=s/(1-Math.abs(a+u-1)),l=(l=r===a?(i-o)/s:i===a?2+(o-r)/s:4+(r-i)/s)/6+(l<0?1:0)),[360*l,100*c,100*f]},hsv:function(t,e,n){var r=st(t/255,0,1),i=st(e/255,0,1),o=st(n/255,0,1),a=Math.max(r,i,o),u=a-Math.min(r,i,o);return[0===u?0:a===r?((i-o)/u%6+6)%6*60:a===i?60*((o-r)/u+2):60*((r-i)/u+4),100*(0===a?0:u/a),100*a]},rgb:function(t,e,n){return[t,e,n]}}};function ar(t,e){return["float"===e?1:"rgb"===t?255:360,"float"===e?1:"rgb"===t?255:100,"float"===e?1:"rgb"===t?255:100]}function ur(t,e,n){var r,i,o,a=ar(e,n);return["rgb"===e?st(t[0],0,a[0]):(i=t[0],o=a[0],i===o?o:lt(i,o)),st(t[1],0,a[1]),st(t[2],0,a[2]),st(null!==(r=t[3])&&void 0!==r?r:1,0,1)]}function sr(t,e,n,r){var i=ar(e,n),o=ar(e,r);return t.map(function(t,e){return t/i[e]*o[e]})}function lr(t,e,n){var r,i=sr(t,e.mode,e.type,"int");return sr((r=or[e.mode])[n.mode].apply(r,m(i)),n.mode,"int",n.type)}var cr=function(){function t(e,n){h(this,t),this.type="int",this.mode=n,this.comps_=ur(e,n,this.type)}return p(t,[{key:"getComponents",value:function(t){return ir(lr(rr(this.comps_),{mode:this.mode,type:this.type},{mode:null!==t&&void 0!==t?t:this.mode,type:this.type}),this.comps_[3])}},{key:"toRgbaObject",value:function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}],[{key:"black",value:function(){return new t([0,0,0],"rgb")}}]),t}(),fr=Kt("colp"),hr=function(){function t(e,n){h(this,t),this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(fr()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(fr("hsv"));var i=e.createElement("div");i.classList.add(fr("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);var o=e.createElement("div");o.classList.add(fr("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);var a=e.createElement("div");if(a.classList.add(fr("rgb")),this.textsView_=n.textsView,a.appendChild(this.textsView_.element),this.element.appendChild(a),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};var u=e.createElement("div");u.classList.add(fr("a"));var s=e.createElement("div");s.classList.add(fr("ap")),s.appendChild(this.alphaViews_.palette.element),u.appendChild(s);var l=e.createElement("div");l.classList.add(fr("at")),l.appendChild(this.alphaViews_.text.element),u.appendChild(l),this.element.appendChild(u)}}return p(t,[{key:"allFocusableElements",get:function(){var t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement].concat(m(this.textsView_.inputViews.map(function(t){return t.inputElement})));return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}]),t}();function dr(t){return"int"===t?"int":"float"===t?"float":void 0}function pr(t){return At(t,function(t){return{color:t.optional.object({alpha:t.optional.boolean,type:t.optional.custom(dr)}),expanded:t.optional.boolean,picker:t.optional.custom(Wn),readonly:t.optional.constant(!1)}})}function vr(t){return t?.1:1}function br(t){var e;return null===(e=t.color)||void 0===e?void 0:e.type}var mr=function(){function t(e,n){h(this,t),this.type="float",this.mode=n,this.comps_=ur(e,n,this.type)}return p(t,[{key:"getComponents",value:function(t){return ir(lr(rr(this.comps_),{mode:this.mode,type:this.type},{mode:null!==t&&void 0!==t?t:this.mode,type:this.type}),this.comps_[3])}},{key:"toRgbaObject",value:function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}]),t}(),gr={int:function(t,e){return new cr(t,e)},float:function(t,e){return new mr(t,e)}};function yr(t,e,n){return gr[n](t,e)}function _r(t,e){if(t.type===e)return t;if(function(t){return"int"===t.type}(t)&&"float"===e)return r=(n=t).getComponents(),i=ar(n.mode,"int"),new mr([at(r[0],0,i[0],0,1),at(r[1],0,i[1],0,1),at(r[2],0,i[2],0,1),r[3]],n.mode);var n,r,i;if(function(t){return"float"===t.type}(t)&&"int"===e)return function(t){var e=t.getComponents(),n=ar(t.mode,"int");return new cr([Math.round(at(e[0],0,1,0,n[0])),Math.round(at(e[1],0,1,0,n[1])),Math.round(at(e[2],0,1,0,n[2])),e[3]],t.mode)}(t);throw S.shouldNeverHappen()}function wr(t,e){var n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}var xr={deg:function(t){return t},grad:function(t){return 360*t/400},rad:function(t){return 360*t/(2*Math.PI)},turn:function(t){return 360*t}};function kr(t){var e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);var n=parseFloat(e[1]),r=e[2];return xr[r](n)}function Cr(t){var e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[wr(e[1],255),wr(e[2],255),wr(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Er(t){var e=Cr(t);return e?new cr(e,"rgb"):null}function Mr(t){var e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[wr(e[1],255),wr(e[2],255),wr(e[3],255),wr(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Pr(t){var e=Mr(t);return e?new cr(e,"rgb"):null}function Ar(t){var e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[kr(e[1]),wr(e[2],100),wr(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Sr(t){var e=Ar(t);return e?new cr(e,"hsl"):null}function Tr(t){var e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[kr(e[1]),wr(e[2],100),wr(e[3],100),wr(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Or(t){var e=Tr(t);return e?new cr(e,"hsl"):null}function Vr(t){var e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];var n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function jr(t){var e=Vr(t);return e?new cr(e,"rgb"):null}function Dr(t){var e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),at(parseInt(e[4]+e[4],16),0,255,0,1)];var n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),at(parseInt(n[4],16),0,255,0,1)]:null}function Nr(t){var e=Dr(t);return e?new cr(e,"rgb"):null}function Lr(t){var e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;var n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function zr(t){return function(e){var n=Lr(e);return n?yr(n,"rgb",t):null}}function Rr(t){var e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;var n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Br(t){return function(e){var n=Rr(e);return n?yr(n,"rgb",t):null}}var Ir=[{parser:Vr,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Dr,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Cr,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Mr,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Ar,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Tr,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Lr,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Rr,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Fr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"int",n=function(t){return Ir.reduce(function(e,n){var r=n.parser,i=n.result;return e||(r(t)?i:null)},null)}(t);return n?"hex"===n.notation&&"float"!==e?Object.assign(Object.assign({},n),{type:"int"}):"func"===n.notation?Object.assign(Object.assign({},n),{type:e}):null:null}function Ur(t){var e=[jr,Nr,Er,Pr,Sr,Or];"int"===t&&e.push(zr("int"),Br("int")),"float"===t&&e.push(zr("float"),Br("float"));var n=function(t){return function(e){return t.reduce(function(t,n){return null!==t?t:n(e)},null)}}(e);return function(e){var r=n(e);return r?_r(r,t):null}}function qr(t){var e=Ur("int");if("string"!=typeof t)return cr.black();var n=e(t);return null!==n&&void 0!==n?n:cr.black()}function Hr(t){var e=st(Math.floor(t),0,255).toString(16);return 1===e.length?"0".concat(e):e}function Yr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=rr(t.getComponents("rgb")).map(Hr).join("");return"".concat(e).concat(n)}function Kr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=t.getComponents("rgb"),r=[n[0],n[1],n[2],255*n[3]].map(Hr).join("");return"".concat(e).concat(r)}function Gr(t){var e=ot(0),n=rr(_r(t,"int").getComponents("rgb")).map(function(t){return e(t)});return"rgb(".concat(n.join(", "),")")}function Wr(t){var e=ot(2),n=ot(0),r=_r(t,"int").getComponents("rgb").map(function(t,r){return(3===r?e:n)(t)});return"rgba(".concat(r.join(", "),")")}function Xr(t,e){var n=ot("float"===e?2:0),r=["r","g","b"],i=rr(_r(t,e).getComponents("rgb")).map(function(t,e){return"".concat(r[e],": ").concat(n(t))});return"{".concat(i.join(", "),"}")}function $r(t,e){var n=ot(2),r=ot("float"===e?2:0),i=["r","g","b","a"],o=_r(t,e).getComponents("rgb").map(function(t,e){var o=3===e?n:r;return"".concat(i[e],": ").concat(o(t))});return"{".concat(o.join(", "),"}")}var Qr=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Yr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Kr},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Gr},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Wr},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){var e=[ot(0),kn,kn],n=rr(_r(t,"int").getComponents("hsl")).map(function(t,n){return e[n](t)});return"hsl(".concat(n.join(", "),")")}},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:function(t){var e=[ot(0),kn,kn,ot(2)],n=_r(t,"int").getComponents("hsl").map(function(t,n){return e[n](t)});return"hsla(".concat(n.join(", "),")")}}].concat(m(["int","float"].reduce(function(t,e){return[].concat(m(t),[{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:function(t){return function(e){return Xr(e,t)}}(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:function(t){return function(e){return $r(e,t)}}(e)}])},[])));function Zr(t){return Qr.reduce(function(e,n){return e||(r=n.format,i=t,r.alpha===i.alpha&&r.mode===i.mode&&r.notation===i.notation&&r.type===i.type?n.stringifier:null);var r,i},null)}var Jr=Kt("apl"),ti=function(){function t(e,n){h(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Jr()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var r=e.createElement("div");r.classList.add(Jr("b")),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(Jr("c")),r.appendChild(i),this.colorElem_=i;var o=e.createElement("div");o.classList.add(Jr("m")),this.element.appendChild(o),this.markerElem_=o;var a=e.createElement("div");a.classList.add(Jr("p")),this.markerElem_.appendChild(a),this.previewElem_=a,this.update_()}return p(t,[{key:"update_",value:function(){var t=this.value.rawValue,e=t.getComponents("rgb"),n=new cr([e[0],e[1],e[2],0],"rgb"),r=new cr([e[0],e[1],e[2],255],"rgb"),i=["to right",Wr(n),Wr(r)];this.colorElem_.style.background="linear-gradient(".concat(i.join(","),")"),this.previewElem_.style.backgroundColor=Wr(t);var o=at(e[3],0,1,0,100);this.markerElem_.style.left="".concat(o,"%")}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),ei=function(){function t(e,n){h(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ti(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return p(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=t.point.x/t.bounds.width,r=i(this.value.rawValue.getComponents("hsv"),3),o=r[0],a=r[1],u=r[2];this.value.setRawValue(new cr([o,a,u,n],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Pn(vr(!0),Sn(t));if(0!==e){var n=i(this.value.rawValue.getComponents("hsv"),4),r=n[0],o=n[1],a=n[2],u=n[3];this.value.setRawValue(new cr([r,o,a,u+e],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(t){0!==Pn(vr(!0),Sn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),ni=Kt("coltxt");var ri=function(){function t(e,n){var r=this;h(this,t),this.element=e.createElement("div"),this.element.classList.add(ni()),n.viewProps.bindClassModifiers(this.element);var i=e.createElement("div");i.classList.add(ni("m")),this.modeElem_=function(t){var e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}].reduce(function(e,n){var r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e},t.createDocumentFragment())),e}(e),this.modeElem_.classList.add(ni("ms")),i.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);var o=e.createElement("div");o.classList.add(ni("mm")),o.appendChild(Rt(e,"dropdown")),i.appendChild(o),this.element.appendChild(i);var a=e.createElement("div");a.classList.add(ni("w")),this.element.appendChild(a),this.inputsElem_=a,this.inputViews_=n.inputViews,this.applyInputViews_(),qt(n.mode,function(t){r.modeElem_.value=t})}return p(t,[{key:"modeSelectElement",get:function(){return this.modeElem_}},{key:"inputViews",get:function(){return this.inputViews_},set:function(t){this.inputViews_=t,this.applyInputViews_()}},{key:"applyInputViews_",value:function(){var t=this;Ft(this.inputsElem_);var e=this.element.ownerDocument;this.inputViews_.forEach(function(n){var r=e.createElement("div");r.classList.add(ni("c")),r.appendChild(n.element),t.inputsElem_.appendChild(r)})}}]),t}();function ii(t,e,n){return new Nn(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",parser:e.parser,props:L.fromObject({formatter:(r=e.colorType,ot("float"===r?2:0)),keyScale:vr(!1),pointerScale:"float"===e.colorType?.01:1}),value:N(0,{constraint:function(t,e,n){var r=ar(t,e)[n];return new z({min:0,max:r})}(e.colorMode,e.colorType,n)}),viewProps:e.viewProps});var r}var oi=function(){function t(e,n){h(this,t),this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=N(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new ri(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return p(t,[{key:"createComponentControllers_",value:function(t){var e=this.colorMode.rawValue;return function(t){return"hex"!==t}(e)?function(t,e){var n={colorMode:e.colorMode,colorType:e.colorType,parser:nt,viewProps:e.viewProps};return[0,1,2].map(function(r){var i=ii(t,n,r);return Mn({primary:e.value,secondary:i.value,forward:function(t){return _r(t,e.colorType).getComponents(e.colorMode)[r]},backward:function(t,n){var i=e.colorMode,o=_r(t,e.colorType).getComponents(i);return o[r]=n,_r(yr(ir(rr(o),o[3]),i,e.colorType),"int")}}),i})}(t,{colorMode:e,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):function(t,e){var n=new yn(t,{parser:Ur("int"),props:L.fromObject({formatter:Yr}),value:N(cr.black()),viewProps:e.viewProps});return Mn({primary:e.value,secondary:n.value,forward:function(t){return new cr(rr(t.getComponents()),t.mode)},backward:function(t,e){return new cr(ir(rr(e.getComponents(t.mode)),t.getComponents()[3]),t.mode)}}),[n]}(t,{value:this.value,viewProps:this.viewProps})}},{key:"onModeSelectChange_",value:function(t){var e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(function(t){return t.view})}}]),t}(),ai=Kt("hpl"),ui=function(){function t(e,n){h(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ai()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var r=e.createElement("div");r.classList.add(ai("c")),this.element.appendChild(r);var i=e.createElement("div");i.classList.add(ai("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return p(t,[{key:"update_",value:function(){var t=i(this.value.rawValue.getComponents("hsv"),1)[0];this.markerElem_.style.backgroundColor=Gr(new cr([t,100,100],"hsv"));var e=at(t,0,360,0,100);this.markerElem_.style.left="".concat(e,"%")}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),si=function(){function t(e,n){h(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new ui(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return p(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=at(st(t.point.x,0,t.bounds.width),0,t.bounds.width,0,360),r=i(this.value.rawValue.getComponents("hsv"),4),o=r[1],a=r[2],u=r[3];this.value.setRawValue(new cr([n,o,a,u],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){var e=Pn(vr(!1),Sn(t));if(0!==e){var n=i(this.value.rawValue.getComponents("hsv"),4),r=n[0],o=n[1],a=n[2],u=n[3];this.value.setRawValue(new cr([r+e,o,a,u],"hsv"),{forceEmit:!1,last:!1})}}},{key:"onKeyUp_",value:function(t){0!==Pn(vr(!1),Sn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),li=Kt("svp"),ci=64,fi=function(){function t(e,n){h(this,t),this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(li()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);var r=e.createElement("canvas");r.height=ci,r.width=ci,r.classList.add(li("c")),this.element.appendChild(r),this.canvasElement=r;var i=e.createElement("div");i.classList.add(li("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}return p(t,[{key:"update_",value:function(){var t,e,n=(t=this.canvasElement,(e=t.ownerDocument.defaultView)&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null);if(n){for(var r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,a=n.getImageData(0,0,i,o),u=a.data,s=0;s<o;s++)for(var l=0;l<i;l++){var c=at(l,0,i,0,100),f=at(s,0,o,100,0),h=nr(r[0],c,f),d=4*(s*i+l);u[d]=h[0],u[d+1]=h[1],u[d+2]=h[2],u[d+3]=255}n.putImageData(a,0,0);var p=at(r[1],0,100,0,100);this.markerElem_.style.left="".concat(p,"%");var v=at(r[2],0,100,100,0);this.markerElem_.style.top="".concat(v,"%")}}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),hi=function(){function t(e,n){h(this,t),this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new fi(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}return p(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=at(t.point.x,0,t.bounds.width,0,100),r=at(t.point.y,0,t.bounds.height,100,0),o=i(this.value.rawValue.getComponents("hsv"),4),a=o[0],u=o[3];this.value.setRawValue(new cr([a,n,r,u],"hsv"),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onKeyDown_",value:function(t){Tn(t.key)&&t.preventDefault();var e=i(this.value.rawValue.getComponents("hsv"),4),n=e[0],r=e[1],o=e[2],a=e[3],u=vr(!1),s=Pn(u,Sn(t)),l=Pn(u,An(t));0===s&&0===l||this.value.setRawValue(new cr([n,r+s,o+l,a],"hsv"),{forceEmit:!1,last:!1})}},{key:"onKeyUp_",value:function(t){var e=vr(!1),n=Pn(e,Sn(t)),r=Pn(e,An(t));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),di=function(){function t(e,n){h(this,t),this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new si(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new hi(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new ei(e,{value:this.value,viewProps:this.viewProps}),text:new Nn(e,{parser:nt,props:L.fromObject({pointerScale:.01,keyScale:.1,formatter:ot(2)}),value:N(0,{constraint:new z({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Mn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:function(t){return t.getComponents()[3]},backward:function(t,e){var n=t.getComponents();return n[3]=e,new cr(n,t.mode)}}),this.textsC_=new oi(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new hr(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}return p(t,[{key:"textsController",get:function(){return this.textsC_}}]),t}(),pi=Kt("colsw"),vi=function(){function t(e,n){h(this,t),this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(pi()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(pi("sw")),this.element.appendChild(r),this.swatchElem_=r;var i=e.createElement("button");i.classList.add(pi("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}return p(t,[{key:"update_",value:function(){var t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Kr(t)}},{key:"onValueChange_",value:function(){this.update_()}}]),t}(),bi=p(function t(e,n){h(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new vi(e,{value:this.value,viewProps:this.viewProps})}),mi=function(){function t(e,n){var r=this;h(this,t),this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Se.create(n.expanded),this.swatchC_=new bi(e,{value:this.value,viewProps:this.viewProps});var i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new yn(e,{parser:n.parser,props:L.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new er(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===n.pickerLayout?new bn(e,{viewProps:this.viewProps}):null;var o=new di(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(function(t){t.addEventListener("blur",r.onPopupChildBlur_),t.addEventListener("keydown",r.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),Mn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t},backward:function(t,e){return e}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Oe(this.foldable_,this.view.pickerElement))}return p(t,[{key:"textController",get:function(){return this.textC_}},{key:"onButtonBlur_",value:function(t){if(this.popC_){var e=this.view.element,n=w(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=Ut(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!Nt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}]),t}();function gi(t){return rr(t.getComponents("rgb")).reduce(function(t,e){return t<<8|255&Math.floor(e)},0)}function yi(t){return t.getComponents("rgb").reduce(function(t,e,n){return t<<8|255&Math.floor(3===n?255*e:e)},0)>>>0}function _i(t){return"number"!=typeof t?cr.black():new cr([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function wi(t){return"number"!=typeof t?cr.black():new cr([(e=t)>>24&255,e>>16&255,e>>8&255,at(255&e,0,255,0,1)],"rgb");var e}function xi(t,e){return"object"===_(t)&&!x(t)&&(e in t&&"number"==typeof t[e])}function ki(t){return xi(t,"r")&&xi(t,"g")&&xi(t,"b")}function Ci(t){return ki(t)&&xi(t,"a")}function Ei(t){return ki(t)}function Mi(t,e){if(t.mode!==e.mode)return!1;if(t.type!==e.type)return!1;for(var n=t.getComponents(),r=e.getComponents(),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Pi(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function Ai(t,e){return function(n,r){t?function(t,e,n){var r=_r(e,n).toRgbaObject();t.writeProperty("r",r.r),t.writeProperty("g",r.g),t.writeProperty("b",r.b),t.writeProperty("a",r.a)}(n,r,e):function(t,e,n){var r=_r(e,n).toRgbaObject();t.writeProperty("r",r.r),t.writeProperty("g",r.g),t.writeProperty("b",r.b)}(n,r,e)}}var Si=ge({id:"input-color-number",type:"input",accept:function(t,e){if("number"!=typeof t)return null;if(!function(t){return"color"in t||"color"===t.view}(e))return null;var n,r,i=pr(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{supportsAlpha:(n=e,!(null===(r=null===n||void 0===n?void 0:n.color)||void 0===r||!r.alpha))})}:null},binding:{reader:function(t){return t.params.supportsAlpha?wi:_i},equals:Mi,writer:function(t){return e=t.params.supportsAlpha,n=e?yi:gi,function(t,e){Xn(t,n(e))};var e,n}},controller:function(t){var e,n,r;return new mi(t.document,{colorType:"int",expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:(r=t.params.supportsAlpha,r?function(t){return Kr(t,"0x")}:function(t){return Yr(t,"0x")}),parser:Ur("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Ti(t){return function(e){return _r(function(t,e){if(!Ei(t))return _r(cr.black(),e);if("int"===e){var n=Pi(t);return new cr(n,"rgb")}if("float"===e){var r=Pi(t);return new mr(r,"rgb")}return _r(cr.black(),"int")}(e,t),"int")}}var Oi=ge({id:"input-color-object",type:"input",accept:function(t,e){var n;if(!Ei(t))return null;var r=pr(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:null!==(n=br(e))&&void 0!==n?n:"int"})}:null},binding:{reader:function(t){return Ti(t.params.colorType)},equals:Mi,writer:function(t){return Ai(Ci(t.initialValue),t.params.colorType)}},controller:function(t){var e,n,r=Ci(t.initialValue);return new mi(t.document,{colorType:t.params.colorType,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:function(t,e){return function(n){return t?$r(n,e):Xr(n,e)}}(r,t.params.colorType),parser:Ur("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),Vi=ge({id:"input-color-string",type:"input",accept:function(t,e){if("string"!=typeof t)return null;if("text"===e.view)return null;var n=Fr(t,br(e));if(!n)return null;var r=Zr(n);if(!r)return null;var i=pr(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:function(){return qr},equals:Mi,writer:function(t){var e,n,r=(e=t.params.format,(n=Zr(e))?function(t,e){Xn(t,n(e))}:null);if(!r)throw S.notBindable();return r}},controller:function(t){var e,n;return new mi(t.document,{colorType:t.params.format.type,expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,formatter:t.params.stringifier,parser:Ur("int"),pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}}),ji=function(){function t(e){h(this,t),this.components=e.components,this.asm_=e.assembly}return p(t,[{key:"constrain",value:function(t){var e=this,n=this.asm_.toComponents(t).map(function(t,n){var r,i;return null!==(i=null===(r=e.components[n])||void 0===r?void 0:r.constrain(t))&&void 0!==i?i:t});return this.asm_.fromComponents(n)}}]),t}(),Di=Kt("pndtxt"),Ni=p(function t(e,n){var r=this;h(this,t),this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(Di()),this.textViews.forEach(function(t){var n=e.createElement("div");n.classList.add(Di("a")),n.appendChild(t.element),r.element.appendChild(n)})});var Li=function(){function t(e,n){var r=this;h(this,t),this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map(function(t,r){return function(t,e,n){return new Nn(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:N(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(e,n,r)}),this.acs_.forEach(function(t,e){Mn({primary:r.value,secondary:t.value,forward:function(t){return n.assembly.toComponents(t)[e]},backward:function(t,r){var i=n.assembly.toComponents(t);return i[e]=r,n.assembly.fromComponents(i)}})}),this.view=new Ni(e,{textViews:this.acs_.map(function(t){return t.view})})}return p(t,[{key:"textControllers",get:function(){return this.acs_}}]),t}(),zi=function(t){a(n,kt);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"max",get:function(){return this.controller.valueController.sliderController.props.get("max")},set:function(t){this.controller.valueController.sliderController.props.set("max",t)}},{key:"min",get:function(){return this.controller.valueController.sliderController.props.get("min")},set:function(t){this.controller.valueController.sliderController.props.set("min",t)}}]),n}();var Ri=ge({id:"input-number",type:"input",accept:function(t,e){if("number"!=typeof t)return null;var n=At(e,function(t){return Object.assign(Object.assign({},vt(t)),{options:t.optional.custom(sn),readonly:t.optional.constant(!1)})});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return rt},constraint:function(t){return function(t,e){var n=[],r=ht(t,e);r&&n.push(r);var i=dt(t);i&&n.push(i);var o=cn(t.options);return o&&n.push(o),new on(n)}(t.params,t.initialValue)},writer:function(t){return Xn}},controller:function(t){var e=t.value,n=t.constraint,r=n&&an(n,un);if(r)return new dn(t.document,{props:new L({options:r.values.value("options")}),value:e,viewProps:t.viewProps});var i=pt(t.params,e.rawValue),o=n&&an(n,z);return o?new Fn(t.document,Object.assign(Object.assign({},Un(Object.assign(Object.assign({},i),{keyScale:N(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:nt,value:e,viewProps:t.viewProps})):new Nn(t.document,{parser:nt,props:L.fromObject(i),value:e,viewProps:t.viewProps})},api:function(t){return"number"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof Fn?new zi(t.controller):t.controller.valueController instanceof dn?new en(t.controller):null}}),Bi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,t),this.x=e,this.y=n}return p(t,[{key:"getComponents",value:function(){return[this.x,this.y]}},{key:"toObject",value:function(){return{x:this.x,y:this.y}}}],[{key:"isObject",value:function(t){if(x(t))return!1;var e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}}]),t}(),Ii={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return r(Bi,m(t))}},Fi=Kt("p2d"),Ui=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(Fi()),n.viewProps.bindClassModifiers(this.element),qt(n.expanded,ce(this.element,Fi(void 0,"expanded")));var r=e.createElement("div");r.classList.add(Fi("h")),this.element.appendChild(r);var i=e.createElement("button");i.classList.add(Fi("b")),i.appendChild(Rt(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;var o=e.createElement("div");if(o.classList.add(Fi("t")),r.appendChild(o),this.textElement=o,"inline"===n.pickerLayout){var a=e.createElement("div");a.classList.add(Fi("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}),qi=Kt("p2dp"),Hi=function(){function t(e,n){h(this,t),this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(qi()),"popup"===n.layout&&this.element.classList.add(qi(void 0,"p")),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("div");r.classList.add(qi("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;var i=e.createElementNS(jt,"svg");i.classList.add(qi("g")),this.padElement.appendChild(i),this.svgElem_=i;var o=e.createElementNS(jt,"line");o.classList.add(qi("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);var a=e.createElementNS(jt,"line");a.classList.add(qi("ax")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","0"),a.setAttributeNS(null,"x2","50%"),a.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(a);var u=e.createElementNS(jt,"line");u.classList.add(qi("l")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(u),this.lineElem_=u;var s=e.createElement("div");s.classList.add(qi("m")),this.padElement.appendChild(s),this.markerElem_=s,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}return p(t,[{key:"allFocusableElements",get:function(){return[this.padElement]}},{key:"update_",value:function(){var t=i(this.value.rawValue.getComponents(),2),e=t[0],n=t[1],r=this.props_.get("max"),o=at(e,-r,+r,0,100),a=at(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-a:a;this.lineElem_.setAttributeNS(null,"x2","".concat(o,"%")),this.lineElem_.setAttributeNS(null,"y2","".concat(u,"%")),this.markerElem_.style.left="".concat(o,"%"),this.markerElem_.style.top="".concat(u,"%")}},{key:"onValueChange_",value:function(){this.update_()}},{key:"onPropsChange_",value:function(){this.update_()}},{key:"onFoldableChange_",value:function(){this.update_()}}]),t}();function Yi(t,e,n){return[Pn(e[0],Sn(t)),Pn(e[1],An(t))*(n?1:-1)]}var Ki=function(){function t(e,n){h(this,t),this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Hi(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}return p(t,[{key:"handlePointerEvent_",value:function(t,e){if(t.point){var n=this.props.get("max"),r=at(t.point.x,0,t.bounds.width,-n,+n),i=at(this.props.get("invertsY")?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Bi(r,i),e)}}},{key:"onPointerDown_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerMove_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}},{key:"onPointerUp_",value:function(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}},{key:"onPadKeyDown_",value:function(t){Tn(t.key)&&t.preventDefault();var e=i(Yi(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY")),2),n=e[0],r=e[1];0===n&&0===r||this.value.setRawValue(new Bi(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}},{key:"onPadKeyUp_",value:function(t){var e=i(Yi(t,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY")),2),n=e[0],r=e[1];0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}]),t}(),Gi=function(){function t(e,n){var r,i,o=this;h(this,t),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=Se.create(n.expanded),this.popC_="popup"===n.pickerLayout?new bn(e,{viewProps:this.viewProps}):null;var a=new Ki(e,{layout:n.pickerLayout,props:new L({invertsY:N(n.invertsY),max:N(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach(function(t){t.addEventListener("blur",o.onPopupChildBlur_),t.addEventListener("keydown",o.onPopupChildKeydown_)}),this.pickerC_=a,this.textC_=new Li(e,{assembly:Ii,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Ui(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Mn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:function(t){return t},backward:function(t,e){return e}})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Oe(this.foldable_,this.view.pickerElement))}return p(t,[{key:"textController",get:function(){return this.textC_}},{key:"onPadButtonBlur_",value:function(t){if(this.popC_){var e=this.view.element,n=w(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}}},{key:"onPadButtonClick_",value:function(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}},{key:"onPopupChildBlur_",value:function(t){if(this.popC_){var e=this.popC_.view.element,n=Ut(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!Nt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}}},{key:"onPopupChildKeydown_",value:function(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}]),t}();function Wi(t){return Bi.isObject(t)?new Bi(t.x,t.y):new Bi}function Xi(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function $i(t,e){var n,r;if(!x(t.min)||!x(t.max))return Math.max(Math.abs(null!==(n=t.min)&&void 0!==n?n:0),Math.abs(null!==(r=t.max)&&void 0!==r?r:0));var i=ct(t);return Math.max(10*Math.abs(i),10*Math.abs(e))}var Qi=ge({id:"input-point2d",type:"input",accept:function(t,e){if(!Bi.isObject(t))return null;var n=At(e,function(t){return Object.assign(Object.assign({},Yn(t)),{expanded:t.optional.boolean,picker:t.optional.custom(Wn),readonly:t.optional.constant(!1),x:t.optional.custom(Kn),y:t.optional.object(Object.assign(Object.assign({},Yn(t)),{inverted:t.optional.boolean}))})});return n?{initialValue:t,params:n}:null},binding:{reader:function(){return Wi},constraint:function(t){return e=t.params,n=t.initialValue,new ji({assembly:Ii,components:[Gn(Object.assign(Object.assign({},e),e.x),n.x),Gn(Object.assign(Object.assign({},e),e.y),n.y)]});var e,n},equals:Bi.equals,writer:function(){return Xi}},controller:function(t){var e,n,r=t.document,i=t.value,o=t.constraint,a=[t.params.x,t.params.y];return new Gi(r,{axes:i.rawValue.getComponents().map(function(e,n){var r;return bt({constraint:o.components[n],initialValue:e,params:M(t.params,null!==(r=a[n])&&void 0!==r?r:{})})}),expanded:null!==(e=t.params.expanded)&&void 0!==e&&e,invertsY:function(t){if(!("y"in t))return!1;var e=t.y;return!!e&&"inverted"in e&&!!e.inverted}(t.params),max:function(t,e){var n,r,i=$i(M(t,null!==(n=t.x)&&void 0!==n?n:{}),e.x),o=$i(M(t,null!==(r=t.y)&&void 0!==r?r:{}),e.y);return Math.max(i,o)}(t.params,i.rawValue),parser:nt,pickerLayout:null!==(n=t.params.picker)&&void 0!==n?n:"popup",value:i,viewProps:t.viewProps})}}),Zi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;h(this,t),this.x=e,this.y=n,this.z=r}return p(t,[{key:"getComponents",value:function(){return[this.x,this.y,this.z]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z}}}],[{key:"isObject",value:function(t){if(x(t))return!1;var e=t.x,n=t.y,r=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}}]),t}(),Ji={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return r(Zi,m(t))}};function to(t){return Zi.isObject(t)?new Zi(t.x,t.y,t.z):new Zi}function eo(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}var no=ge({id:"input-point3d",type:"input",accept:function(t,e){if(!Zi.isObject(t))return null;var n=At(e,function(t){return Object.assign(Object.assign({},Yn(t)),{readonly:t.optional.constant(!1),x:t.optional.custom(Kn),y:t.optional.custom(Kn),z:t.optional.custom(Kn)})});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return to},constraint:function(t){return e=t.params,n=t.initialValue,new ji({assembly:Ji,components:[Gn(Object.assign(Object.assign({},e),e.x),n.x),Gn(Object.assign(Object.assign({},e),e.y),n.y),Gn(Object.assign(Object.assign({},e),e.z),n.z)]});var e,n},equals:Zi.equals,writer:function(t){return eo}},controller:function(t){var e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new Li(t.document,{assembly:Ji,axes:e.rawValue.getComponents().map(function(e,i){var o;return bt({constraint:n.components[i],initialValue:e,params:M(t.params,null!==(o=r[i])&&void 0!==o?o:{})})}),parser:nt,value:e,viewProps:t.viewProps})}}),ro=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;h(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return p(t,[{key:"getComponents",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"toObject",value:function(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}],[{key:"isObject",value:function(t){if(x(t))return!1;var e=t.x,n=t.y,r=t.z,i=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i}},{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}}]),t}(),io={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return r(ro,m(t))}};function oo(t){return ro.isObject(t)?new ro(t.x,t.y,t.z,t.w):new ro}function ao(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}var uo=ge({id:"input-point4d",type:"input",accept:function(t,e){if(!ro.isObject(t))return null;var n=At(e,function(t){return Object.assign(Object.assign({},Yn(t)),{readonly:t.optional.constant(!1),w:t.optional.custom(Kn),x:t.optional.custom(Kn),y:t.optional.custom(Kn),z:t.optional.custom(Kn)})});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return oo},constraint:function(t){return e=t.params,n=t.initialValue,new ji({assembly:io,components:[Gn(Object.assign(Object.assign({},e),e.x),n.x),Gn(Object.assign(Object.assign({},e),e.y),n.y),Gn(Object.assign(Object.assign({},e),e.z),n.z),Gn(Object.assign(Object.assign({},e),e.w),n.w)]});var e,n},equals:ro.equals,writer:function(t){return ao}},controller:function(t){var e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new Li(t.document,{assembly:io,axes:e.rawValue.getComponents().map(function(e,i){var o;return bt({constraint:n.components[i],initialValue:e,params:M(t.params,null!==(o=r[i])&&void 0!==o?o:{})})}),parser:nt,value:e,viewProps:t.viewProps})}});var so=ge({id:"input-string",type:"input",accept:function(t,e){if("string"!=typeof t)return null;var n=At(e,function(t){return{readonly:t.optional.constant(!1),options:t.optional.custom(sn)}});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Cn},constraint:function(t){return e=t.params,n=[],(r=cn(e.options))&&n.push(r),new on(n);var e,n,r},writer:function(t){return Xn}},controller:function(t){var e=t.document,n=t.value,r=t.constraint,i=r&&an(r,un);return i?new dn(e,{props:new L({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new yn(e,{parser:function(t){return t},props:L.fromObject({formatter:En}),value:n,viewProps:t.viewProps})},api:function(t){return"string"!=typeof t.controller.value.rawValue?null:t.controller.valueController instanceof dn?new en(t.controller):null}}),lo={monitor:{defaultInterval:200,defaultRows:3}},co=Kt("mll"),fo=function(){function t(e,n){h(this,t),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(co()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("textarea");r.classList.add(co("i")),r.style.height="calc(var(".concat(Hn("containerUnitSize"),") * ").concat(n.rows,")"),r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return p(t,[{key:"update_",value:function(){var t=this,e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(function(e){void 0!==e&&r.push(t.formatter_(e))}),e.textContent=r.join("\n"),n&&(e.scrollTop=e.scrollHeight)}},{key:"onValueUpdate_",value:function(){this.update_()}}]),t}(),ho=p(function t(e,n){h(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new fo(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}),po=Kt("sgl"),vo=function(){function t(e,n){h(this,t),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(po()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("input");r.classList.add(po("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return p(t,[{key:"update_",value:function(){var t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}},{key:"onValueUpdate_",value:function(){this.update_()}}]),t}(),bo=p(function t(e,n){h(this,t),this.value=n.value,this.viewProps=n.viewProps,this.view=new vo(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}),mo=ge({id:"monitor-bool",type:"monitor",accept:function(t,e){if("boolean"!=typeof t)return null;var n=At(e,function(t){return{readonly:t.required.constant(!0),rows:t.optional.number}});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return _n}},controller:function(t){var e;return 1===t.value.rawValue.length?new bo(t.document,{formatter:wn,value:t.value,viewProps:t.viewProps}):new ho(t.document,{formatter:wn,rows:null!==(e=t.params.rows)&&void 0!==e?e:lo.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}}),go=function(t){a(n,kt);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n,[{key:"max",get:function(){return this.controller.valueController.props.get("max")},set:function(t){this.controller.valueController.props.set("max",t)}},{key:"min",get:function(){return this.controller.valueController.props.get("min")},set:function(t){this.controller.valueController.props.set("min",t)}}]),n}(),yo=Kt("grl"),_o=function(){function t(e,n){h(this,t),this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(yo()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var r=e.createElementNS(jt,"svg");r.classList.add(yo("g")),r.style.height="calc(var(".concat(Hn("containerUnitSize"),") * ").concat(n.rows,")"),this.element.appendChild(r),this.svgElem_=r;var i=e.createElementNS(jt,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;var o=e.createElement("div");o.classList.add(yo("t"),Kt("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}return p(t,[{key:"graphElement",get:function(){return this.svgElem_}},{key:"update_",value:function(){var t=this.element,e=t.clientWidth,n=t.clientHeight,r=this.value.rawValue.length-1,i=this.props_.get("min"),o=this.props_.get("max"),a=[];this.value.rawValue.forEach(function(t,u){if(void 0!==t){var s=at(u,0,r,0,e),l=at(t,i,o,n,0);a.push([s,l].join(","))}}),this.lineElem_.setAttributeNS(null,"points",a.join(" "));var u=this.tooltipElem_,s=this.value.rawValue[this.cursor_.rawValue];if(void 0!==s){var l=at(this.cursor_.rawValue,0,r,0,e),c=at(s,i,o,n,0);u.style.left="".concat(l,"px"),u.style.top="".concat(c,"px"),u.textContent="".concat(this.formatter_(s)),u.classList.contains(yo("t","a"))||(u.classList.add(yo("t","a"),yo("t","in")),Dt(u),u.classList.remove(yo("t","in")))}else u.classList.remove(yo("t","a"))}},{key:"onValueUpdate_",value:function(){this.update_()}},{key:"onCursorChange_",value:function(){this.update_()}}]),t}(),wo=function(){function t(e,n){if(h(this,t),this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=N(-1),this.view=new _o(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),Nt(e)){var r=new Vn(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}return p(t,[{key:"importProps",value:function(t){var e=this;return St(t,null,function(t){return{max:t.required.number,min:t.required.number}},function(t){return e.props.set("max",t.max),e.props.set("min",t.min),!0})}},{key:"exportProps",value:function(){return Tt(null,{max:this.props.get("max"),min:this.props.get("min")})}},{key:"onGraphMouseLeave_",value:function(){this.cursor_.rawValue=-1}},{key:"onGraphMouseMove_",value:function(t){var e=this.view.element.clientWidth;this.cursor_.rawValue=Math.floor(at(t.offsetX,0,e,0,this.value.rawValue.length))}},{key:"onGraphPointerDown_",value:function(t){this.onGraphPointerMove_(t)}},{key:"onGraphPointerMove_",value:function(t){t.data.point?this.cursor_.rawValue=Math.floor(at(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.rawValue=-1}},{key:"onGraphPointerUp_",value:function(){this.cursor_.rawValue=-1}}]),t}();function xo(t){return x(t.format)?ot(2):t.format}function ko(t){return"graph"===t.view}var Co=ge({id:"monitor-number",type:"monitor",accept:function(t,e){if("number"!=typeof t)return null;var n=At(e,function(t){return{format:t.optional.function,max:t.optional.number,min:t.optional.number,readonly:t.required.constant(!0),rows:t.optional.number,view:t.optional.string}});return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:function(t){return ko(t)?64:1},reader:function(t){return rt}},controller:function(t){return ko(t.params)?function(t){var e,n,r;return new wo(t.document,{formatter:xo(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:lo.monitor.defaultRows,props:L.fromObject({max:null!==(n=t.params.max)&&void 0!==n?n:100,min:null!==(r=t.params.min)&&void 0!==r?r:0}),value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new bo(t.document,{formatter:xo(t.params),value:t.value,viewProps:t.viewProps}):new ho(t.document,{formatter:xo(t.params),rows:null!==(e=t.params.rows)&&void 0!==e?e:lo.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}(t)},api:function(t){return t.controller.valueController instanceof wo?new go(t.controller):null}}),Eo=ge({id:"monitor-string",type:"monitor",accept:function(t,e){if("string"!=typeof t)return null;var n=At(e,function(t){return{multiline:t.optional.boolean,readonly:t.required.constant(!0),rows:t.optional.number}});return n?{initialValue:t,params:n}:null},binding:{reader:function(t){return Cn}},controller:function(t){var e,n=t.value;return n.rawValue.length>1||t.params.multiline?new ho(t.document,{formatter:En,rows:null!==(e=t.params.rows)&&void 0!==e?e:lo.monitor.defaultRows,value:n,viewProps:t.viewProps}):new bo(t.document,{formatter:En,value:n,viewProps:t.viewProps})}}),Mo=function(){function t(){h(this,t),this.map_=new Map}return p(t,[{key:"get",value:function(t){var e;return null!==(e=this.map_.get(t))&&void 0!==e?e:null}},{key:"has",value:function(t){return this.map_.has(t)}},{key:"add",value:function(t,e){var n=this;return this.map_.set(t,e),t.viewProps.handleDispose(function(){n.map_.delete(t)}),e}}]),t}(),Po=function(){function t(e){h(this,t),this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}return p(t,[{key:"read",value:function(){return this.reader_(this.target.read())}},{key:"write",value:function(t){this.writer_(this.target,t)}},{key:"inject",value:function(t){this.write(this.reader_(t))}}]),t}();var Ao=function(){function t(e){h(this,t),this.target=e.target,this.reader_=e.reader}return p(t,[{key:"read",value:function(){return this.reader_(this.target.read())}}]),t}();function So(t,e){var n,r,i,o=t.accept(e.target.read(),e.params);if(x(o))return null;var a,u,s={target:e.target,initialValue:o.initialValue,params:o.params},l=At(e.params,function(t){return{bufferSize:t.optional.number,disabled:t.optional.boolean,hidden:t.optional.boolean,interval:t.optional.number,label:t.optional.string}}),c=t.binding.reader(s),f=null!==(r=null!==(n=null===l||void 0===l?void 0:l.bufferSize)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))&&void 0!==r?r:1,h=new ae({binding:new Ao({reader:c,target:e.target}),bufferSize:f,ticker:(a=e.document,u=null===l||void 0===l?void 0:l.interval,0===u?new nn:new rn(a,null!==u&&void 0!==u?u:lo.monitor.defaultInterval))}),d=t.controller({document:e.document,params:o.params,value:h,viewProps:Be.create({disabled:null===l||void 0===l?void 0:l.disabled,hidden:null===l||void 0===l?void 0:l.hidden})});return d.viewProps.bindDisabled(h.ticker),d.viewProps.handleDispose(function(){h.ticker.dispose()}),new ue(e.document,{blade:Ae(),props:L.fromObject({label:"label"in e.params?null!==(i=null===l||void 0===l?void 0:l.label)&&void 0!==i?i:null:e.target.key}),value:h,valueController:d})}var To=function(){function t(e){h(this,t),this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}return p(t,[{key:"getAll",value:function(){return[].concat(m(this.pluginsMap_.blades),m(this.pluginsMap_.inputs),m(this.pluginsMap_.monitors))}},{key:"register",value:function(t,e){if(!(n=e.core)||n.major!==me.major)throw S.notCompatible(t,e.id);var n;"blade"===e.type?this.pluginsMap_.blades.unshift(e):"input"===e.type?this.pluginsMap_.inputs.unshift(e):"monitor"===e.type&&this.pluginsMap_.monitors.unshift(e)}},{key:"createInput_",value:function(t,e,n){return this.pluginsMap_.inputs.reduce(function(r,i){return null!==r&&void 0!==r?r:function(t,e){var n,r=t.accept(e.target.read(),e.params);if(x(r))return null;var i={target:e.target,initialValue:r.initialValue,params:r.params},o=At(e.params,function(t){return{disabled:t.optional.boolean,hidden:t.optional.boolean,label:t.optional.string,tag:t.optional.string}}),a=t.binding.reader(i),u=t.binding.constraint?t.binding.constraint(i):void 0,s=new Po({reader:a,target:e.target,writer:t.binding.writer(i)}),l=new Ct(N(a(r.initialValue),{constraint:u,equals:t.binding.equals}),s),c=t.controller({constraint:u,document:e.document,initialValue:r.initialValue,params:r.params,value:l,viewProps:Be.create({disabled:null===o||void 0===o?void 0:o.disabled,hidden:null===o||void 0===o?void 0:o.hidden})});return new ne(e.document,{blade:Ae(),props:L.fromObject({label:"label"in e.params?null!==(n=null===o||void 0===o?void 0:o.label)&&void 0!==n?n:null:e.target.key}),tag:null===o||void 0===o?void 0:o.tag,value:l,valueController:c})}(i,{document:t,target:e,params:n})},null)}},{key:"createMonitor_",value:function(t,e,n){return this.pluginsMap_.monitors.reduce(function(r,i){return null!==r&&void 0!==r?r:So(i,{document:t,params:n,target:e})},null)}},{key:"createBinding",value:function(t,e,n){if(x(e.read()))throw new S({context:{key:e.key},type:"nomatchingcontroller"});var r=this.createInput_(t,e,n);if(r)return r;var i=this.createMonitor_(t,e,n);if(i)return i;throw new S({context:{key:e.key},type:"nomatchingcontroller"})}},{key:"createBlade",value:function(t,e){var n=this.pluginsMap_.blades.reduce(function(n,r){return null!==n&&void 0!==n?n:tn(r,{document:t,params:e})},null);if(!n)throw new S({type:"nomatchingview",context:{params:e}});return n}},{key:"createInputBindingApi_",value:function(t){var e=this.pluginsMap_.inputs.reduce(function(e,n){var r,i;return e||(null!==(i=null===(r=n.api)||void 0===r?void 0:r.call(n,{controller:t}))&&void 0!==i?i:null)},null);return this.apiCache_.add(t,null!==e&&void 0!==e?e:new kt(t))}},{key:"createMonitorBindingApi_",value:function(t){var e=this.pluginsMap_.monitors.reduce(function(e,n){var r,i;return e||(null!==(i=null===(r=n.api)||void 0===r?void 0:r.call(n,{controller:t}))&&void 0!==i?i:null)},null);return this.apiCache_.add(t,null!==e&&void 0!==e?e:new kt(t))}},{key:"createBindingApi",value:function(t){if(this.apiCache_.has(t))return this.apiCache_.get(t);if(re(t))return this.createInputBindingApi_(t);if(se(t))return this.createMonitorBindingApi_(t);throw S.shouldNeverHappen()}},{key:"createApi",value:function(t){var e=this;if(this.apiCache_.has(t))return this.apiCache_.get(t);if(function(t){return Ot(t)&&Vt(t.value)}(t))return this.createBindingApi(t);var n=this.pluginsMap_.blades.reduce(function(n,r){return null!==n&&void 0!==n?n:r.api({controller:t,pool:e})},null);if(!n)throw S.shouldNeverHappen();return this.apiCache_.add(t,n)}}]),t}(),Oo=new Mo;var Vo=function(t){a(n,mt);var e=s(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).emitter_=new O,r.controller.value.emitter.on("change",function(t){r.emitter_.emit("change",new yt(l(r),t.rawValue))}),r}return p(n,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"options",get:function(){return this.controller.valueController.props.get("options")},set:function(t){this.controller.valueController.props.set("options",t)}},{key:"value",get:function(){return this.controller.value.rawValue},set:function(t){this.controller.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}]),n}(),jo=function(t){a(n,mt);var e=s(n);function n(){return h(this,n),e.apply(this,arguments)}return p(n)}(),Do=function(t){a(n,mt);var e=s(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).emitter_=new O,r.controller.value.emitter.on("change",function(t){r.emitter_.emit("change",new yt(l(r),t.rawValue))}),r}return p(n,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"max",get:function(){return this.controller.valueController.sliderController.props.get("max")},set:function(t){this.controller.valueController.sliderController.props.set("max",t)}},{key:"min",get:function(){return this.controller.valueController.sliderController.props.get("min")},set:function(t){this.controller.valueController.sliderController.props.set("min",t)}},{key:"value",get:function(){return this.controller.value.rawValue},set:function(t){this.controller.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}]),n}(),No=function(t){a(n,mt);var e=s(n);function n(t){var r;return h(this,n),(r=e.call(this,t)).emitter_=new O,r.controller.value.emitter.on("change",function(t){r.emitter_.emit("change",new yt(l(r),t.rawValue))}),r}return p(n,[{key:"label",get:function(){return this.controller.labelController.props.get("label")},set:function(t){this.controller.labelController.props.set("label",t)}},{key:"formatter",get:function(){return this.controller.valueController.props.get("formatter")},set:function(t){this.controller.valueController.props.set("formatter",t)}},{key:"value",get:function(){return this.controller.value.rawValue},set:function(t){this.controller.value.rawValue=t}},{key:"on",value:function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t)},{key:e}),this}},{key:"off",value:function(t,e){return this.emitter_.off(t,e),this}}]),n}(),Lo={id:"list",type:"blade",core:me,accept:function(t){var e=At(t,function(t){return{options:t.required.custom(sn),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}});return e?{params:e}:null},controller:function(t){var e=new un(ln(t.params.options)),n=N(t.params.value,{constraint:e}),r=new dn(t.document,{props:new L({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:L.fromObject({label:t.params.label}),value:n,valueController:r})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof dn?new Vo(t.controller):null}},zo=function(t){a(n,Ve);var e=s(n);function n(t,r){return h(this,n),e.call(this,t,r)}return p(n,[{key:"element",get:function(){return this.controller.view.element}}]),n}(),Ro=function(t){a(n,Ne);var e=s(n);function n(t,r){return h(this,n),e.call(this,t,{expanded:r.expanded,blade:r.blade,props:r.props,root:!0,viewProps:r.viewProps})}return p(n)}(),Bo=Kt("spr"),Io=p(function t(e,n){h(this,t),this.element=e.createElement("div"),this.element.classList.add(Bo()),n.viewProps.bindClassModifiers(this.element);var r=e.createElement("hr");r.classList.add(Bo("r")),this.element.appendChild(r)}),Fo=function(t){a(n,Zt);var e=s(n);function n(t,r){return h(this,n),e.call(this,Object.assign(Object.assign({},r),{view:new Io(t,{viewProps:r.viewProps})}))}return p(n)}(),Uo={id:"separator",type:"blade",core:me,accept:function(t){var e=At(t,function(t){return{view:t.required.constant("separator")}});return e?{params:e}:null},controller:function(t){return new Fo(t.document,{blade:t.blade,viewProps:t.viewProps})},api:function(t){return t.controller instanceof Fo?new jo(t.controller):null}},qo={id:"slider",type:"blade",core:me,accept:function(t){var e=At(t,function(t){return{max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}});return e?{params:e}:null},controller:function(t){var e,n,r=null!==(e=t.params.value)&&void 0!==e?e:0,i=new z({max:t.params.max,min:t.params.min}),o=N(r,{constraint:i}),a=new Fn(t.document,Object.assign(Object.assign({},Un({formatter:null!==(n=t.params.format)&&void 0!==n?n:it,keyScale:N(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:ft(t.params,r)})),{parser:nt,value:o,viewProps:t.viewProps}));return new Jt(t.document,{blade:t.blade,props:L.fromObject({label:t.params.label}),value:o,valueController:a})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof Fn?new Do(t.controller):null}},Ho={id:"text",type:"blade",core:me,accept:function(t){var e=At(t,function(t){return{parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}});return e?{params:e}:null},controller:function(t){var e,n=N(t.params.value),r=new yn(t.document,{parser:t.params.parse,props:L.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:function(t){return String(t)}}),value:n,viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:L.fromObject({label:t.params.label}),value:n,valueController:r})},api:function(t){return t.controller instanceof Jt&&t.controller.valueController instanceof yn?new No(t.controller):null}};var Yo=function(t){a(n,zo);var e=s(n);function n(t){var r,i,o;h(this,n);var a=null!==t&&void 0!==t?t:{},u=null!==(i=a.document)&&void 0!==i?i:Lt(),s=function(){var t=new To(Oo);return[Qi,no,uo,so,Ri,Vi,Oi,Si,Jn,mo,Eo,Co,ye,Le,Je].forEach(function(e){t.register("core",e)}),t}(),l=new Ro(u,{expanded:a.expanded,blade:Ae(),props:L.fromObject({title:a.title}),viewProps:Be.create()});return(r=e.call(this,l,s)).pool_=s,r.containerElem_=null!==(o=a.container)&&void 0!==o?o:function(t){var e=t.createElement("div");return e.classList.add(Kt("dfw")()),t.body&&t.body.appendChild(e),e}(u),r.containerElem_.appendChild(r.element),r.doc_=u,r.usesDefaultWrapper_=!a.container,r.setUpDefaultPlugins_(),r}return p(n,[{key:"document",get:function(){if(!this.doc_)throw S.alreadyDisposed();return this.doc_}},{key:"dispose",value:function(){var t=this.containerElem_;if(!t)throw S.alreadyDisposed();if(this.usesDefaultWrapper_){var e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,o(f(n.prototype),"dispose",this).call(this)}},{key:"registerPlugin",value:function(t){var e=this;t.css&&function(t,e,n){if(!t.querySelector("style[data-tp-style=".concat(e,"]"))){var r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}}(this.document,"plugin-".concat(t.id),t.css),("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(function(n){e.pool_.register(t.id,n)})}},{key:"setUpDefaultPlugins_",value:function(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[Lo,Uo,qo,Je,Ho]})}}]),n}(),Ko=new be("4.0.3");n.BladeApi=mt,n.ButtonApi=le,n.FolderApi=Ve,n.ListBladeApi=Vo,n.ListInputBindingApi=en,n.Pane=Yo,n.Semver=be,n.SeparatorBladeApi=jo,n.SliderBladeApi=Do,n.SliderInputBindingApi=zi,n.TabApi=Ke,n.TabPageApi=Ge,n.TextBladeApi=No,n.TpChangeEvent=yt,n.VERSION=Ko},{}],2:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function n(t){var n;return 1===t.length&&(n=t,t=function(t,r){return e(n(t),r)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}var r=n(e),i=r.right,o=r.left;function a(t,e){return[t,e]}function u(t){return null===t?NaN:+t}function s(t,e){var n,r,i=t.length,o=0,a=-1,s=0,l=0;if(null==e)for(;++a<i;)isNaN(n=u(t[a]))||(l+=(r=n-s)*(n-(s+=r/++o)));else for(;++a<i;)isNaN(n=u(e(t[a],a,t)))||(l+=(r=n-s)*(n-(s+=r/++o)));if(o>1)return l/(o-1)}function l(t,e){var n=s(t,e);return n?Math.sqrt(n):n}function c(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}var f=Array.prototype,h=f.slice,d=f.map;function p(t){return function(){return t}}function v(t){return t}function b(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}var m=Math.sqrt(50),g=Math.sqrt(10),y=Math.sqrt(2);function _(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=m?10:o>=g?5:o>=y?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=m?10:o>=g?5:o>=y?2:1)}function w(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=m?i*=10:o>=g?i*=5:o>=y&&(i*=2),e<t?-i:i}function x(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function k(t,e,n){if(null==n&&(n=u),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function C(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}function E(t){if(!(i=t.length))return[];for(var e=-1,n=C(t,M),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function M(t){return t.length}t.bisect=i,t.bisectRight=i,t.bisectLeft=o,t.ascending=e,t.bisector=n,t.cross=function(t,e,n){var r,i,o,u,s=t.length,l=e.length,c=new Array(s*l);for(null==n&&(n=a),r=o=0;r<s;++r)for(u=t[r],i=0;i<l;++i,++o)c[o]=n(u,e[i]);return c},t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=l,t.extent=c,t.histogram=function(){var t=v,e=c,n=x;function r(r){var o,a,u=r.length,s=new Array(u);for(o=0;o<u;++o)s[o]=t(r[o],o,r);var l=e(s),c=l[0],f=l[1],h=n(s,c,f);Array.isArray(h)||(h=w(c,f,h),h=b(Math.ceil(c/h)*h,f,h));for(var d=h.length;h[0]<=c;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var p,v=new Array(d+1);for(o=0;o<=d;++o)(p=v[o]=[]).x0=o>0?h[o-1]:c,p.x1=o<d?h[o]:f;for(o=0;o<u;++o)c<=(a=s[o])&&a<=f&&v[i(h,a,0,d)].push(r[o]);return v}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:p(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:p([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?p(h.call(t)):p(t),r):n},r},t.thresholdFreedmanDiaconis=function(t,n,r){return t=d.call(t,u).sort(e),Math.ceil((r-n)/(2*(k(t,.75)-k(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*l(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=x,t.max=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},t.mean=function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=u(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=u(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},t.median=function(t,n){var r,i=t.length,o=-1,a=[];if(null==n)for(;++o<i;)isNaN(r=u(t[o]))||a.push(r);else for(;++o<i;)isNaN(r=u(n(t[o],o,t)))||a.push(r);return k(a.sort(e),.5)},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n},t.min=C,t.pairs=function(t,e){null==e&&(e=a);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return o},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.quantile=k,t.range=b,t.scan=function(t,n){if(r=t.length){var r,i,o=0,a=0,u=t[a];for(null==n&&(n=e);++o<r;)(n(i=t[o],u)<0||0!==n(u,u))&&(u=i,a=o);return 0===n(u,u)?a:void 0}},t.shuffle=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.sum=function(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o},t.ticks=function(t,e,n){var r,i,o,a,u=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=_(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o},t.tickIncrement=_,t.tickStep=w,t.transpose=E,t.variance=s,t.zip=function(){return E(arguments)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],3:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e=Array.prototype.slice;function n(t){return t}var r=1,i=2,o=3,a=4,u=1e-6;function s(t){return"translate("+(t+.5)+",0)"}function l(t){return"translate(0,"+(t+.5)+")"}function c(){return!this.__axis}function f(t,f){var h=[],d=null,p=null,v=6,b=6,m=3,g=t===r||t===a?-1:1,y=t===a||t===i?"x":"y",_=t===r||t===o?s:l;function w(e){var s=null==d?f.ticks?f.ticks.apply(f,h):f.domain():d,l=null==p?f.tickFormat?f.tickFormat.apply(f,h):n:p,w=Math.max(v,0)+m,x=f.range(),k=+x[0]+.5,C=+x[x.length-1]+.5,E=(f.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}:function(t){return function(e){return+t(e)}})(f.copy()),M=e.selection?e.selection():e,P=M.selectAll(".domain").data([null]),A=M.selectAll(".tick").data(s,f).order(),S=A.exit(),T=A.enter().append("g").attr("class","tick"),O=A.select("line"),V=A.select("text");P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(T),O=O.merge(T.append("line").attr("stroke","currentColor").attr(y+"2",g*v)),V=V.merge(T.append("text").attr("fill","currentColor").attr(y,g*w).attr("dy",t===r?"0em":t===o?"0.71em":"0.32em")),e!==M&&(P=P.transition(e),A=A.transition(e),O=O.transition(e),V=V.transition(e),S=S.transition(e).attr("opacity",u).attr("transform",function(t){return isFinite(t=E(t))?_(t):this.getAttribute("transform")}),T.attr("opacity",u).attr("transform",function(t){var e=this.parentNode.__axis;return _(e&&isFinite(e=e(t))?e:E(t))})),S.remove(),P.attr("d",t===a||t==i?b?"M"+g*b+","+k+"H0.5V"+C+"H"+g*b:"M0.5,"+k+"V"+C:b?"M"+k+","+g*b+"V0.5H"+C+"V"+g*b:"M"+k+",0.5H"+C),A.attr("opacity",1).attr("transform",function(t){return _(E(t))}),O.attr(y+"2",g*v),V.attr(y,g*w).text(l),M.filter(c).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===i?"start":t===a?"end":"middle"),M.each(function(){this.__axis=E})}return w.scale=function(t){return arguments.length?(f=t,w):f},w.ticks=function(){return h=e.call(arguments),w},w.tickArguments=function(t){return arguments.length?(h=null==t?[]:e.call(t),w):h.slice()},w.tickValues=function(t){return arguments.length?(d=null==t?null:e.call(t),w):d&&d.slice()},w.tickFormat=function(t){return arguments.length?(p=t,w):p},w.tickSize=function(t){return arguments.length?(v=b=+t,w):v},w.tickSizeInner=function(t){return arguments.length?(v=+t,w):v},w.tickSizeOuter=function(t){return arguments.length?(b=+t,w):b},w.tickPadding=function(t){return arguments.length?(m=+t,w):m},w}t.axisTop=function(t){return f(r,t)},t.axisRight=function(t){return f(i,t)},t.axisBottom=function(t){return f(o,t)},t.axisLeft=function(t){return f(a,t)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],4:[function(t,e,n){var r,i;r=this,i=function(t,e,n,r,i,o){"use strict";function a(t){return function(){return t}}function u(){e.event.stopImmediatePropagation()}function s(){e.event.preventDefault(),e.event.stopImmediatePropagation()}var l={name:"drag"},c={name:"space"},f={name:"handle"},h={name:"center"},d={name:"x",handles:["e","w"].map(w),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},p={name:"y",handles:["n","s"].map(w),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},v={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(w),input:function(t){return t},output:function(t){return t}},b={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},m={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},g={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},y={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},_={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function w(t){return{type:t}}function x(){return!e.event.button}function k(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function C(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function E(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function M(t){var v,M=k,P=x,A=n.dispatch(T,"start","brush","end"),S=6;function T(n){var r=n.property("__brush",N).selectAll(".overlay").data([w("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",b.overlay).merge(r).each(function(){var t=C(this).extent;e.select(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),n.selectAll(".selection").data([w("selection")]).enter().append("rect").attr("class","selection").attr("cursor",b.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=n.selectAll(".handle").data(t.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return b[t.type]}),n.each(O).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",D)}function O(){var t=e.select(this),n=C(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-S/2:n[0][0]-S/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-S/2:n[0][1]-S/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+S:S}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+S:S})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function V(t,e){return t.__brush.emitter||new j(t,e)}function j(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function D(){if(e.event.touches){if(e.event.changedTouches.length<e.event.touches.length)return s()}else if(v)return;if(P.apply(this,arguments)){var n,i,a,w,x,k,M,A,S,T,j,D,N,L=this,z=e.event.target.__data__.type,R="selection"===(e.event.metaKey?z="overlay":z)?l:e.event.altKey?h:f,B=t===p?null:y[z],I=t===d?null:_[z],F=C(L),U=F.extent,q=F.selection,H=U[0][0],Y=U[0][1],K=U[1][0],G=U[1][1],W=B&&I&&e.event.shiftKey,X=e.mouse(L),$=X,Q=V(L,arguments).beforestart();"overlay"===z?F.selection=q=[[n=t===p?H:X[0],a=t===d?Y:X[1]],[x=t===p?K:n,M=t===d?G:a]]:(n=q[0][0],a=q[0][1],x=q[1][0],M=q[1][1]),i=n,w=a,k=x,A=M;var Z=e.select(L).attr("pointer-events","none"),J=Z.selectAll(".overlay").attr("cursor",b[z]);if(e.event.touches)Z.on("touchmove.brush",et,!0).on("touchend.brush touchcancel.brush",rt,!0);else{var tt=e.select(e.event.view).on("keydown.brush",function(){switch(e.event.keyCode){case 16:W=B&&I;break;case 18:R===f&&(B&&(x=k-S*B,n=i+S*B),I&&(M=A-T*I,a=w+T*I),R=h,nt());break;case 32:R!==f&&R!==h||(B<0?x=k-S:B>0&&(n=i-S),I<0?M=A-T:I>0&&(a=w-T),R=c,J.attr("cursor",b.selection),nt());break;default:return}s()},!0).on("keyup.brush",function(){switch(e.event.keyCode){case 16:W&&(D=N=W=!1,nt());break;case 18:R===h&&(B<0?x=k:B>0&&(n=i),I<0?M=A:I>0&&(a=w),R=f,nt());break;case 32:R===c&&(e.event.altKey?(B&&(x=k-S*B,n=i+S*B),I&&(M=A-T*I,a=w+T*I),R=h):(B<0?x=k:B>0&&(n=i),I<0?M=A:I>0&&(a=w),R=f),J.attr("cursor",b[z]),nt());break;default:return}s()},!0).on("mousemove.brush",et,!0).on("mouseup.brush",rt,!0);r.dragDisable(e.event.view)}u(),o.interrupt(L),O.call(L),Q.start()}function et(){var t=e.mouse(L);!W||D||N||(Math.abs(t[0]-$[0])>Math.abs(t[1]-$[1])?N=!0:D=!0),$=t,j=!0,s(),nt()}function nt(){var t;switch(S=$[0]-X[0],T=$[1]-X[1],R){case c:case l:B&&(S=Math.max(H-n,Math.min(K-x,S)),i=n+S,k=x+S),I&&(T=Math.max(Y-a,Math.min(G-M,T)),w=a+T,A=M+T);break;case f:B<0?(S=Math.max(H-n,Math.min(K-n,S)),i=n+S,k=x):B>0&&(S=Math.max(H-x,Math.min(K-x,S)),i=n,k=x+S),I<0?(T=Math.max(Y-a,Math.min(G-a,T)),w=a+T,A=M):I>0&&(T=Math.max(Y-M,Math.min(G-M,T)),w=a,A=M+T);break;case h:B&&(i=Math.max(H,Math.min(K,n-S*B)),k=Math.max(H,Math.min(K,x+S*B))),I&&(w=Math.max(Y,Math.min(G,a-T*I)),A=Math.max(Y,Math.min(G,M+T*I)))}k<i&&(B*=-1,t=n,n=x,x=t,t=i,i=k,k=t,z in m&&J.attr("cursor",b[z=m[z]])),A<w&&(I*=-1,t=a,a=M,M=t,t=w,w=A,A=t,z in g&&J.attr("cursor",b[z=g[z]])),F.selection&&(q=F.selection),D&&(i=q[0][0],k=q[1][0]),N&&(w=q[0][1],A=q[1][1]),q[0][0]===i&&q[0][1]===w&&q[1][0]===k&&q[1][1]===A||(F.selection=[[i,w],[k,A]],O.call(L),Q.brush())}function rt(){if(u(),e.event.touches){if(e.event.touches.length)return;v&&clearTimeout(v),v=setTimeout(function(){v=null},500),Z.on("touchmove.brush touchend.brush touchcancel.brush",null)}else r.dragEnable(e.event.view,j),tt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Z.attr("pointer-events","all"),J.attr("cursor",b.overlay),F.selection&&(q=F.selection),E(q)&&(F.selection=null,O.call(L)),Q.end()}}function N(){var e=this.__brush||{selection:null};return e.extent=M.apply(this,arguments),e.dim=t,e}return T.move=function(e,n){e.selection?e.on("start.brush",function(){V(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){V(this,arguments).end()}).tween("brush",function(){var e=this,r=e.__brush,o=V(e,arguments),a=r.selection,u=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=i.interpolate(a,u);function l(t){r.selection=1===t&&E(u)?null:s(t),O.call(e),o.brush()}return a&&u?l:l(1)}):e.each(function(){var e=arguments,r=this.__brush,i=t.input("function"==typeof n?n.apply(this,e):n,r.extent),a=V(this,e).beforestart();o.interrupt(this),r.selection=null==i||E(i)?null:i,O.call(this),a.start().brush().end()})},j.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(n){e.customEvent(new function(t,e,n){this.target=t,this.type=e,this.selection=n}(T,n,t.output(this.state.selection)),A.apply,A,[n,this.that,this.args])}},T.extent=function(t){return arguments.length?(M="function"==typeof t?t:a([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),T):M},T.filter=function(t){return arguments.length?(P="function"==typeof t?t:a(!!t),T):P},T.handleSize=function(t){return arguments.length?(S=+t,T):S},T.on=function(){var t=A.on.apply(A,arguments);return t===A?T:t},T}t.brush=function(){return M(v)},t.brushX=function(){return M(d)},t.brushY=function(){return M(p)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-selection"),t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-drag","d3-interpolate","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-dispatch":9,"d3-drag":10,"d3-interpolate":18,"d3-selection":24,"d3-transition":29}],5:[function(t,e,n){var r,i;r=this,i=function(t,e,n){"use strict";var r=Math.cos,i=Math.sin,o=Math.PI,a=o/2,u=2*o,s=Math.max;var l=Array.prototype.slice;function c(t){return function(){return t}}function f(t){return t.source}function h(t){return t.target}function d(t){return t.radius}function p(t){return t.startAngle}function v(t){return t.endAngle}t.chord=function(){var t=0,n=null,r=null,i=null;function o(o){var a,l,c,f,h,d,p=o.length,v=[],b=e.range(p),m=[],g=[],y=g.groups=new Array(p),_=new Array(p*p);for(a=0,h=-1;++h<p;){for(l=0,d=-1;++d<p;)l+=o[h][d];v.push(l),m.push(e.range(p)),a+=l}for(n&&b.sort(function(t,e){return n(v[t],v[e])}),r&&m.forEach(function(t,e){t.sort(function(t,n){return r(o[e][t],o[e][n])})}),f=(a=s(0,u-t*p)/a)?t:u/p,l=0,h=-1;++h<p;){for(c=l,d=-1;++d<p;){var w=b[h],x=m[w][d],k=o[w][x],C=l,E=l+=k*a;_[x*p+w]={index:w,subindex:x,startAngle:C,endAngle:E,value:k}}y[w]={index:w,startAngle:c,endAngle:l,value:v[w]},l+=f}for(h=-1;++h<p;)for(d=h-1;++d<p;){var M=_[d*p+h],P=_[h*p+d];(M.value||P.value)&&g.push(M.value<P.value?{source:P,target:M}:{source:M,target:P})}return i?g.sort(i):g}return o.padAngle=function(e){return arguments.length?(t=s(0,e),o):t},o.sortGroups=function(t){return arguments.length?(n=t,o):n},o.sortSubgroups=function(t){return arguments.length?(r=t,o):r},o.sortChords=function(t){return arguments.length?(null==t?i=null:(e=t,i=function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)})._=t,o):i&&i._;var e},o},t.ribbon=function(){var t=f,e=h,o=d,u=p,s=v,b=null;function m(){var c,f=l.call(arguments),h=t.apply(this,f),d=e.apply(this,f),p=+o.apply(this,(f[0]=h,f)),v=u.apply(this,f)-a,m=s.apply(this,f)-a,g=p*r(v),y=p*i(v),_=+o.apply(this,(f[0]=d,f)),w=u.apply(this,f)-a,x=s.apply(this,f)-a;if(b||(b=c=n.path()),b.moveTo(g,y),b.arc(0,0,p,v,m),v===w&&m===x||(b.quadraticCurveTo(0,0,_*r(w),_*i(w)),b.arc(0,0,_,w,x)),b.quadraticCurveTo(0,0,g,y),b.closePath(),c)return b=null,c+""||null}return m.radius=function(t){return arguments.length?(o="function"==typeof t?t:c(+t),m):o},m.startAngle=function(t){return arguments.length?(u="function"==typeof t?t:c(+t),m):u},m.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:c(+t),m):s},m.source=function(e){return arguments.length?(t=e,m):t},m.target=function(t){return arguments.length?(e=t,m):e},m.context=function(t){return arguments.length?(b=null==t?null:t,m):b},m},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-array"),t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],i):i(r.d3=r.d3||{},r.d3,r.d3)},{"d3-array":2,"d3-path":19}],6:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==n)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(n(i=t[o],o,t),i)}else if(t)for(var u in t)r.set(u,t[u]);return r}function r(){return{}}function i(t,e,n){t[e]=n}function o(){return n()}function a(t,e,n){t.set(e,n)}function u(){}e.prototype=n.prototype={constructor:e,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var s=n.prototype;function l(t,e){var n=new u;if(t instanceof u)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}u.prototype=l.prototype={constructor:u,has:s.has,add:function(t){return this["$"+(t+="")]=t,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each},t.nest=function(){var t,e,u,s=[],l=[];function c(r,i,o,a){if(i>=s.length)return null!=t&&r.sort(t),null!=e?e(r):r;for(var u,l,f,h=-1,d=r.length,p=s[i++],v=n(),b=o();++h<d;)(f=v.get(u=p(l=r[h])+""))?f.push(l):v.set(u,[l]);return v.each(function(t,e){a(b,e,c(t,i,o,a))}),b}return u={object:function(t){return c(t,0,r,i)},map:function(t){return c(t,0,o,a)},entries:function(t){return function t(n,r){if(++r>s.length)return n;var i,o=l[r-1];return null!=e&&r>=s.length?i=n.entries():(i=[],n.each(function(e,n){i.push({key:n,values:t(e,r)})})),null!=o?i.sort(function(t,e){return o(t.key,e.key)}):i}(c(t,0,o,a),0)},key:function(t){return s.push(t),u},sortKeys:function(t){return l[s.length-1]=t,u},sortValues:function(e){return t=e,u},rollup:function(t){return e=t,u}}},t.set=l,t.map=n,t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],7:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function n(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function r(){}var i="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3})$/,s=/^#([0-9a-f]{6})$/,l=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),c=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgba\\("+[i,i,i,o]+"\\)$"),h=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),d=new RegExp("^hsl\\("+[o,a,a]+"\\)$"),p=new RegExp("^hsla\\("+[o,a,a,o]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function b(t){var e;return t=(t+"").trim().toLowerCase(),(e=u.exec(t))?new w((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=s.exec(t))?m(parseInt(e[1],16)):(e=l.exec(t))?new w(e[1],e[2],e[3],1):(e=c.exec(t))?new w(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?g(e[1],e[2],e[3],e[4]):(e=h.exec(t))?g(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=d.exec(t))?k(e[1],e[2]/100,e[3]/100,1):(e=p.exec(t))?k(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?m(v[t]):"transparent"===t?new w(NaN,NaN,NaN,0):null}function m(t){return new w(t>>16&255,t>>8&255,255&t,1)}function g(t,e,n,r){return r<=0&&(t=e=n=NaN),new w(t,e,n,r)}function y(t){return t instanceof r||(t=b(t)),t?new w((t=t.rgb()).r,t.g,t.b,t.opacity):new w}function _(t,e,n,r){return 1===arguments.length?y(t):new w(t,e,n,null==r?1:r)}function w(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function x(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function k(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new E(t,e,n,r)}function C(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof E)return new E(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=b(t)),!t)return new E;if(t instanceof E)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),a=Math.max(e,n,i),u=NaN,s=a-o,l=(a+o)/2;return s?(u=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=l<.5?a+o:2-a-o,u*=60):s=l>0&&l<1?0:u,new E(u,s,l,t.opacity)}(t):new E(t,e,n,null==i?1:i)}function E(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function M(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e(r,b,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),e(w,_,n(r,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+x(this.r)+x(this.g)+x(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),e(E,C,n(r,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new E(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new E(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new w(M(t>=240?t-240:t+120,i,r),M(t,i,r),M(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var P=Math.PI/180,A=180/Math.PI,S=.96422,T=1,O=.82521,V=4/29,j=6/29,D=3*j*j,N=j*j*j;function L(t){if(t instanceof R)return new R(t.l,t.a,t.b,t.opacity);if(t instanceof Y){if(isNaN(t.h))return new R(t.l,0,0,t.opacity);var e=t.h*P;return new R(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof w||(t=y(t));var n,r,i=U(t.r),o=U(t.g),a=U(t.b),u=B((.2225045*i+.7168786*o+.0606169*a)/T);return i===o&&o===a?n=r=u:(n=B((.4360747*i+.3850649*o+.1430804*a)/S),r=B((.0139322*i+.0971045*o+.7141733*a)/O)),new R(116*u-16,500*(n-u),200*(u-r),t.opacity)}function z(t,e,n,r){return 1===arguments.length?L(t):new R(t,e,n,null==r?1:r)}function R(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function B(t){return t>N?Math.pow(t,1/3):t/D+V}function I(t){return t>j?t*t*t:D*(t-V)}function F(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function U(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function q(t){if(t instanceof Y)return new Y(t.h,t.c,t.l,t.opacity);if(t instanceof R||(t=L(t)),0===t.a&&0===t.b)return new Y(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*A;return new Y(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function H(t,e,n,r){return 1===arguments.length?q(t):new Y(t,e,n,null==r?1:r)}function Y(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}e(R,z,n(r,{brighter:function(t){return new R(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new R(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new w(F(3.1338561*(e=S*I(e))-1.6168667*(t=T*I(t))-.4906146*(n=O*I(n))),F(-.9787684*e+1.9161415*t+.033454*n),F(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),e(Y,H,n(r,{brighter:function(t){return new Y(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Y(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return L(this).rgb()}}));var K=-.14861,G=1.78277,W=-.29227,X=-.90649,$=1.97294,Q=$*X,Z=$*G,J=G*W-X*K;function tt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof et)return new et(t.h,t.s,t.l,t.opacity);t instanceof w||(t=y(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(J*r+Q*e-Z*n)/(J+Q-Z),o=r-i,a=($*(n-i)-W*o)/X,u=Math.sqrt(a*a+o*o)/($*i*(1-i)),s=u?Math.atan2(a,o)*A-120:NaN;return new et(s<0?s+360:s,u,i,t.opacity)}(t):new et(t,e,n,null==r?1:r)}function et(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e(et,tt,n(r,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new et(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new et(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*P,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new w(255*(e+n*(K*r+G*i)),255*(e+n*(W*r+X*i)),255*(e+n*($*r)),this.opacity)}})),t.color=b,t.rgb=_,t.hsl=C,t.lab=z,t.hcl=H,t.lch=function(t,e,n,r){return 1===arguments.length?q(t):new Y(n,e,t,null==r?1:r)},t.gray=function(t,e){return new R(t,0,0,null==e?1:e)},t.cubehelix=tt,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],8:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";var n=Array.prototype.slice;function r(t,e){return t-e}function i(t){return function(){return t}}function o(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=a(t,e[r]))return n;return 0}function a(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var l=t[o],c=l[0],f=l[1],h=t[s],d=h[0],p=h[1];if(u(l,h,e))return 0;f>r!=p>r&&n<(d-c)*(r-f)/(p-f)+c&&(i=-i)}return i}function u(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}function s(){}var l=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function c(){var t=1,a=1,u=e.thresholdSturges,c=p;function f(t){var n=u(t);if(Array.isArray(n))n=n.slice().sort(r);else{var i=e.extent(t),o=i[0],a=i[1];n=e.tickStep(o,a,n),n=e.range(Math.floor(o/n)*n,Math.floor(a/n)*n,n)}return n.map(function(e){return h(t,e)})}function h(e,n){var r=[],i=[];return function(e,n,r){var i,o,u,s,c,f,h=new Array,p=new Array;i=o=-1,s=e[0]>=n,l[s<<1].forEach(v);for(;++i<t-1;)u=s,s=e[i+1]>=n,l[u|s<<1].forEach(v);l[s<<0].forEach(v);for(;++o<a-1;){for(i=-1,s=e[o*t+t]>=n,c=e[o*t]>=n,l[s<<1|c<<2].forEach(v);++i<t-1;)u=s,s=e[o*t+t+i+1]>=n,f=c,c=e[o*t+i+1]>=n,l[u|s<<1|c<<2|f<<3].forEach(v);l[s|c<<3].forEach(v)}i=-1,c=e[o*t]>=n,l[c<<2].forEach(v);for(;++i<t-1;)f=c,c=e[o*t+i+1]>=n,l[c<<2|f<<3].forEach(v);function v(t){var e,n,a=[t[0][0]+i,t[0][1]+o],u=[t[1][0]+i,t[1][1]+o],s=d(a),l=d(u);(e=p[s])?(n=h[l])?(delete p[e.end],delete h[n.start],e===n?(e.ring.push(u),r(e.ring)):h[e.start]=p[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete p[e.end],e.ring.push(u),p[e.end=l]=e):(e=h[l])?(n=p[s])?(delete h[e.start],delete p[n.end],e===n?(e.ring.push(u),r(e.ring)):h[n.start]=p[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(a),h[e.start=s]=e):h[s]=p[l]={start:s,end:l,ring:[a,u]}}l[c<<3].forEach(v)}(e,n,function(t){c(t,e,n),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?r.push([t]):i.push(t)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==o((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:n,coordinates:r}}function d(e){return 2*e[0]+e[1]*(t+1)*4}function p(e,n,r){e.forEach(function(e){var i,o=e[0],u=e[1],s=0|o,l=0|u,c=n[l*t+s];o>0&&o<t&&s===o&&(i=n[l*t+s-1],e[0]=o+(r-i)/(c-i)-.5),u>0&&u<a&&l===u&&(i=n[(l-1)*t+s],e[1]=u+(r-i)/(c-i)-.5)})}return f.contour=h,f.size=function(e){if(!arguments.length)return[t,a];var n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!(n>0&&r>0))throw new Error("invalid size");return t=n,a=r,f},f.thresholds=function(t){return arguments.length?(u="function"==typeof t?t:Array.isArray(t)?i(n.call(t)):i(t),f):u},f.smooth=function(t){return arguments.length?(c=t?p:s,f):c===p},f}function f(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<i;++a)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=t.data[u+a*r]),u>=n&&(u>=o&&(s-=t.data[u-o+a*r]),e.data[u-n+a*r]=s/Math.min(u+1,r-1+o-u,o))}function h(t,e,n){for(var r=t.width,i=t.height,o=1+(n<<1),a=0;a<r;++a)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=t.data[a+u*r]),u>=n&&(u>=o&&(s-=t.data[a+(u-o)*r]),e.data[a+(u-n)*r]=s/Math.min(u+1,i-1+o-u,o))}function d(t){return t[0]}function p(t){return t[1]}function v(){return 1}t.contours=c,t.contourDensity=function(){var t=d,r=p,o=v,a=960,u=500,s=20,l=2,b=3*s,m=a+2*b>>l,g=u+2*b>>l,y=i(20);function _(n){var i=new Float32Array(m*g),a=new Float32Array(m*g);n.forEach(function(e,n,a){var u=+t(e,n,a)+b>>l,s=+r(e,n,a)+b>>l,c=+o(e,n,a);u>=0&&u<m&&s>=0&&s<g&&(i[u+s*m]+=c)}),f({width:m,height:g,data:i},{width:m,height:g,data:a},s>>l),h({width:m,height:g,data:a},{width:m,height:g,data:i},s>>l),f({width:m,height:g,data:i},{width:m,height:g,data:a},s>>l),h({width:m,height:g,data:a},{width:m,height:g,data:i},s>>l),f({width:m,height:g,data:i},{width:m,height:g,data:a},s>>l),h({width:m,height:g,data:a},{width:m,height:g,data:i},s>>l);var u=y(i);if(!Array.isArray(u)){var d=e.max(i);u=e.tickStep(0,d,u),(u=e.range(0,Math.floor(d/u)*u,u)).shift()}return c().thresholds(u).size([m,g])(i).map(w)}function w(t){return t.value*=Math.pow(2,-2*l),t.coordinates.forEach(x),t}function x(t){t.forEach(k)}function k(t){t.forEach(C)}function C(t){t[0]=t[0]*Math.pow(2,l)-b,t[1]=t[1]*Math.pow(2,l)-b}function E(){return m=a+2*(b=3*s)>>l,g=u+2*b>>l,_}return _.x=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),_):t},_.y=function(t){return arguments.length?(r="function"==typeof t?t:i(+t),_):r},_.weight=function(t){return arguments.length?(o="function"==typeof t?t:i(+t),_):o},_.size=function(t){if(!arguments.length)return[a,u];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return a=e,u=n,E()},_.cellSize=function(t){if(!arguments.length)return 1<<l;if(!((t=+t)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(t)/Math.LN2),E()},_.thresholds=function(t){return arguments.length?(y="function"==typeof t?t:Array.isArray(t)?i(n.call(t)):i(t),_):y},_.bandwidth=function(t){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return s=Math.round((Math.sqrt(4*t*t+1)-1)/2),E()},_},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)},{"d3-array":2}],9:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e={value:function(){}};function n(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new r(i)}function r(t){this._=t}function i(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function o(t,n,r){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=e,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=r&&t.push({name:n,value:r}),t}r.prototype=n.prototype={constructor:r,on:function(t,e){var n,r,a=this._,u=(r=a,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),s=-1,l=u.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<l;)if(n=(t=u[s]).type)a[n]=o(a[n],t.name,e);else if(null==e)for(n in a)a[n]=o(a[n],t.name,null);return this}for(;++s<l;)if((n=(t=u[s]).type)&&(n=i(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new r(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}},t.dispatch=n,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],10:[function(t,e,n){var r,i;r=this,i=function(t,e,n){"use strict";function r(){e.event.stopImmediatePropagation()}function i(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function o(t){var n=t.document.documentElement,r=e.select(t).on("dragstart.drag",i,!0);"onselectstart"in n?r.on("selectstart.drag",i,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function a(t,n){var r=t.document.documentElement,o=e.select(t).on("dragstart.drag",null);n&&(o.on("click.drag",i,!0),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function u(t){return function(){return t}}function s(t,e,n,r,i,o,a,u,s,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=s,this._=l}function l(){return!e.event.button}function c(){return this.parentNode}function f(t){return null==t?{x:e.event.x,y:e.event.y}:t}function h(){return"ontouchstart"in this}s.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},t.drag=function(){var t,d,p,v,b=l,m=c,g=f,y=h,_={},w=n.dispatch("start","drag","end"),x=0,k=0;function C(t){t.on("mousedown.drag",E).filter(y).on("touchstart.drag",A).on("touchmove.drag",S).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(){if(!v&&b.apply(this,arguments)){var n=O("mouse",m.apply(this,arguments),e.mouse,this,arguments);n&&(e.select(e.event.view).on("mousemove.drag",M,!0).on("mouseup.drag",P,!0),o(e.event.view),r(),p=!1,t=e.event.clientX,d=e.event.clientY,n("start"))}}function M(){if(i(),!p){var n=e.event.clientX-t,r=e.event.clientY-d;p=n*n+r*r>k}_.mouse("drag")}function P(){e.select(e.event.view).on("mousemove.drag mouseup.drag",null),a(e.event.view,p),i(),_.mouse("end")}function A(){if(b.apply(this,arguments)){var t,n,i=e.event.changedTouches,o=m.apply(this,arguments),a=i.length;for(t=0;t<a;++t)(n=O(i[t].identifier,o,e.touch,this,arguments))&&(r(),n("start"))}}function S(){var t,n,r=e.event.changedTouches,o=r.length;for(t=0;t<o;++t)(n=_[r[t].identifier])&&(i(),n("drag"))}function T(){var t,n,i=e.event.changedTouches,o=i.length;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),t=0;t<o;++t)(n=_[i[t].identifier])&&(r(),n("end"))}function O(t,n,r,i,o){var a,u,l,c=r(n,t),f=w.copy();if(e.customEvent(new s(C,"beforestart",a,t,x,c[0],c[1],0,0,f),function(){return null!=(e.event.subject=a=g.apply(i,o))&&(u=a.x-c[0]||0,l=a.y-c[1]||0,!0)}))return function h(d){var p,v=c;switch(d){case"start":_[t]=h,p=x++;break;case"end":delete _[t],--x;case"drag":c=r(n,t),p=x}e.customEvent(new s(C,d,a,t,p,c[0]+u,c[1]+l,c[0]-v[0],c[1]-v[1],f),f.apply,f,[d,i,o])}}return C.filter=function(t){return arguments.length?(b="function"==typeof t?t:u(!!t),C):b},C.container=function(t){return arguments.length?(m="function"==typeof t?t:u(t),C):m},C.subject=function(t){return arguments.length?(g="function"==typeof t?t:u(t),C):g},C.touchable=function(t){return arguments.length?(y="function"==typeof t?t:u(!!t),C):y},C.on=function(){var t=w.on.apply(w,arguments);return t===w?C:t},C.clickDistance=function(t){return arguments.length?(k=(t=+t)*t,C):Math.sqrt(k)},C},t.dragDisable=o,t.dragEnable=a,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-selection"),t("d3-dispatch")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch"],i):i(r.d3=r.d3||{},r.d3,r.d3)},{"d3-dispatch":9,"d3-selection":24}],11:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e={},n={},r=34,i=10,o=13;function a(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function u(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function s(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function l(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+s(-e,6):e>9999?"+"+s(e,6):s(e,4))+"-"+s(t.getUTCMonth()+1,2)+"-"+s(t.getUTCDate(),2)+(o?"T"+s(n,2)+":"+s(r,2)+":"+s(i,2)+"."+s(o,3)+"Z":i?"T"+s(n,2)+":"+s(r,2)+":"+s(i,2)+"Z":r||n?"T"+s(n,2)+":"+s(r,2)+"Z":"")}function c(t){var s=new RegExp('["'+t+"\n\r]"),c=t.charCodeAt(0);function f(t,a){var u,s=[],l=t.length,f=0,h=0,d=l<=0,p=!1;function v(){if(d)return n;if(p)return p=!1,e;var a,u,s=f;if(t.charCodeAt(s)===r){for(;f++<l&&t.charCodeAt(f)!==r||t.charCodeAt(++f)===r;);return(a=f)>=l?d=!0:(u=t.charCodeAt(f++))===i?p=!0:u===o&&(p=!0,t.charCodeAt(f)===i&&++f),t.slice(s+1,a-1).replace(/""/g,'"')}for(;f<l;){if((u=t.charCodeAt(a=f++))===i)p=!0;else if(u===o)p=!0,t.charCodeAt(f)===i&&++f;else if(u!==c)continue;return t.slice(s,a)}return d=!0,t.slice(s,l)}for(t.charCodeAt(l-1)===i&&--l,t.charCodeAt(l-1)===o&&--l;(u=v())!==n;){for(var b=[];u!==e&&u!==n;)b.push(u),u=v();a&&null==(b=a(b,h++))||s.push(b)}return s}function h(e,n){return e.map(function(e){return n.map(function(t){return p(e[t])}).join(t)})}function d(e){return e.map(p).join(t)}function p(t){return null==t?"":t instanceof Date?l(t):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,i=f(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=a(t);return function(r,i){return e(n(r),i,t)}}(t,e):a(t)});return i.columns=r||[],i},parseRows:f,format:function(e,n){return null==n&&(n=u(e)),[n.map(p).join(t)].concat(h(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=u(t)),h(t,e).join("\n")},formatRows:function(t){return t.map(d).join("\n")}}}var f=c(","),h=f.parse,d=f.parseRows,p=f.format,v=f.formatBody,b=f.formatRows,m=c("\t"),g=m.parse,y=m.parseRows,_=m.format,w=m.formatBody,x=m.formatRows;t.dsvFormat=c,t.csvParse=h,t.csvParseRows=d,t.csvFormat=p,t.csvFormatBody=v,t.csvFormatRows=b,t.tsvParse=g,t.tsvParseRows=y,t.tsvFormat=_,t.tsvFormatBody=w,t.tsvFormatRows=x,t.autoType=function(t){for(var e in t){var n,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=n;else r=null;t[e]=r}return t},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],12:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function n(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var r=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),i=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),o=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),a=Math.PI,u=a/2;function s(t){return(1-Math.cos(a*t))/2}function l(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function c(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var f=4/11,h=6/11,d=8/11,p=.75,v=9/11,b=10/11,m=.9375,g=21/22,y=63/64,_=1/f/f;function w(t){return(t=+t)<f?_*t*t:t<d?_*(t-=h)*t+p:t<b?_*(t-=v)*t+m:_*(t-=g)*t+y}var x=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),k=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),C=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),E=2*Math.PI,M=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=E);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*E)},i.period=function(n){return t(e,n)},i}(1,.3),P=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=E);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*E)},i.period=function(n){return t(e,n)},i}(1,.3),A=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=E);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*E)},i.period=function(n){return t(e,n)},i}(1,.3);t.easeLinear=function(t){return+t},t.easeQuad=e,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=e,t.easeCubic=n,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=n,t.easePoly=o,t.easePolyIn=r,t.easePolyOut=i,t.easePolyInOut=o,t.easeSin=s,t.easeSinIn=function(t){return 1-Math.cos(t*u)},t.easeSinOut=function(t){return Math.sin(t*u)},t.easeSinInOut=s,t.easeExp=l,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=l,t.easeCircle=c,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=c,t.easeBounce=w,t.easeBounceIn=function(t){return 1-w(1-t)},t.easeBounceOut=w,t.easeBounceInOut=function(t){return((t*=2)<=1?1-w(1-t):w(t-1)+1)/2},t.easeBack=C,t.easeBackIn=x,t.easeBackOut=k,t.easeBackInOut=C,t.easeElastic=P,t.easeElasticIn=M,t.easeElasticOut=P,t.easeElasticInOut=A,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],13:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function r(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function i(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function o(t,e){return fetch(t,e).then(i)}function a(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),o(e,n).then(function(e){return t(e,r)})}}var u=a(e.csvParse),s=a(e.tsvParse);function l(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function c(t){return function(e,n){return o(e,n).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var f=c("application/xml"),h=c("text/html"),d=c("image/svg+xml");t.blob=function(t,e){return fetch(t,e).then(n)},t.buffer=function(t,e){return fetch(t,e).then(r)},t.dsv=function(t,n,r,i){3===arguments.length&&"function"==typeof r&&(i=r,r=void 0);var a=e.dsvFormat(t);return o(n,r).then(function(t){return a.parse(t,i)})},t.csv=u,t.tsv=s,t.image=function(t,e){return new Promise(function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t})},t.json=function(t,e){return fetch(t,e).then(l)},t.text=o,t.xml=f,t.html=h,t.svg=d,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-dsv"],i):i(r.d3=r.d3||{},r.d3)},{"d3-dsv":11}],14:[function(t,e,n){var r,i;r=this,i=function(t,e,n,r,i){"use strict";function o(t){return function(){return t}}function a(){return 1e-6*(Math.random()-.5)}function u(t){return t.x+t.vx}function s(t){return t.y+t.vy}function l(t){return t.index}function c(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function f(t){return t.x}function h(t){return t.y}var d=10,p=Math.PI*(3-Math.sqrt(5));t.forceCenter=function(t,e){var n;function r(){var r,i,o=n.length,a=0,u=0;for(r=0;r<o;++r)a+=(i=n[r]).x,u+=i.y;for(a=a/o-t,u=u/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=u}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},t.forceCollide=function(t){var n,r,i=1,l=1;function c(){for(var t,o,c,h,d,p,v,b=n.length,m=0;m<l;++m)for(o=e.quadtree(n,u,s).visitAfter(f),t=0;t<b;++t)c=n[t],p=r[c.index],v=p*p,h=c.x+c.vx,d=c.y+c.vy,o.visit(g);function g(t,e,n,r,o){var u=t.data,s=t.r,l=p+s;if(!u)return e>h+l||r<h-l||n>d+l||o<d-l;if(u.index>c.index){var f=h-u.x-u.vx,b=d-u.y-u.vy,m=f*f+b*b;m<l*l&&(0===f&&(m+=(f=a())*f),0===b&&(m+=(b=a())*b),m=(l-(m=Math.sqrt(m)))/m*i,c.vx+=(f*=m)*(l=(s*=s)/(v+s)),c.vy+=(b*=m)*l,u.vx-=f*(l=1-l),u.vy-=b*l)}}}function f(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function h(){if(n){var e,i,o=n.length;for(r=new Array(o),e=0;e<o;++e)i=n[e],r[i.index]=+t(i,e,n)}}return"function"!=typeof t&&(t=o(null==t?1:+t)),c.initialize=function(t){n=t,h()},c.iterations=function(t){return arguments.length?(l=+t,c):l},c.strength=function(t){return arguments.length?(i=+t,c):i},c.radius=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),h(),c):t},c},t.forceLink=function(t){var e,r,i,u,s,f=l,h=function(t){return 1/Math.min(u[t.source.index],u[t.target.index])},d=o(30),p=1;function v(n){for(var i=0,o=t.length;i<p;++i)for(var u,l,c,f,h,d,v,b=0;b<o;++b)l=(u=t[b]).source,f=(c=u.target).x+c.vx-l.x-l.vx||a(),h=c.y+c.vy-l.y-l.vy||a(),f*=d=((d=Math.sqrt(f*f+h*h))-r[b])/d*n*e[b],h*=d,c.vx-=f*(v=s[b]),c.vy-=h*v,l.vx+=f*(v=1-v),l.vy+=h*v}function b(){if(i){var o,a,l=i.length,h=t.length,d=n.map(i,f);for(o=0,u=new Array(l);o<h;++o)(a=t[o]).index=o,"object"!=typeof a.source&&(a.source=c(d,a.source)),"object"!=typeof a.target&&(a.target=c(d,a.target)),u[a.source.index]=(u[a.source.index]||0)+1,u[a.target.index]=(u[a.target.index]||0)+1;for(o=0,s=new Array(h);o<h;++o)a=t[o],s[o]=u[a.source.index]/(u[a.source.index]+u[a.target.index]);e=new Array(h),m(),r=new Array(h),g()}}function m(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+h(t[n],n,t)}function g(){if(i)for(var e=0,n=t.length;e<n;++e)r[e]=+d(t[e],e,t)}return null==t&&(t=[]),v.initialize=function(t){i=t,b()},v.links=function(e){return arguments.length?(t=e,b(),v):t},v.id=function(t){return arguments.length?(f=t,v):f},v.iterations=function(t){return arguments.length?(p=+t,v):p},v.strength=function(t){return arguments.length?(h="function"==typeof t?t:o(+t),m(),v):h},v.distance=function(t){return arguments.length?(d="function"==typeof t?t:o(+t),g(),v):d},v},t.forceManyBody=function(){var t,n,r,i,u=o(-30),s=1,l=1/0,c=.81;function d(i){var o,a=t.length,u=e.quadtree(t,f,h).visitAfter(v);for(r=i,o=0;o<a;++o)n=t[o],u.visit(b)}function p(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+u(n,e,t)}}function v(t){var e,n,r,o,a,u=0,s=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,o+=n*e.y);t.x=r/s,t.y=o/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=i[e.data.index]}while(e=e.next)}t.value=u}function b(t,e,o,u){if(!t.value)return!0;var f=t.x-n.x,h=t.y-n.y,d=u-e,p=f*f+h*h;if(d*d/c<p)return p<l&&(0===f&&(p+=(f=a())*f),0===h&&(p+=(h=a())*h),p<s&&(p=Math.sqrt(s*p)),n.vx+=f*t.value*r/p,n.vy+=h*t.value*r/p),!0;if(!(t.length||p>=l)){(t.data!==n||t.next)&&(0===f&&(p+=(f=a())*f),0===h&&(p+=(h=a())*h),p<s&&(p=Math.sqrt(s*p)));do{t.data!==n&&(d=i[t.data.index]*r/p,n.vx+=f*d,n.vy+=h*d)}while(t=t.next)}}return d.initialize=function(e){t=e,p()},d.strength=function(t){return arguments.length?(u="function"==typeof t?t:o(+t),p(),d):u},d.distanceMin=function(t){return arguments.length?(s=t*t,d):Math.sqrt(s)},d.distanceMax=function(t){return arguments.length?(l=t*t,d):Math.sqrt(l)},d.theta=function(t){return arguments.length?(c=t*t,d):Math.sqrt(c)},d},t.forceRadial=function(t,e,n){var r,i,a,u=o(.1);function s(t){for(var o=0,u=r.length;o<u;++o){var s=r[o],l=s.x-e||1e-6,c=s.y-n||1e-6,f=Math.sqrt(l*l+c*c),h=(a[o]-f)*i[o]*t/f;s.vx+=l*h,s.vy+=c*h}}function l(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(r[e],e,r),i[e]=isNaN(a[e])?0:+u(r[e],e,r)}}return"function"!=typeof t&&(t=o(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,l()},s.strength=function(t){return arguments.length?(u="function"==typeof t?t:o(+t),l(),s):u},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s},t.forceSimulation=function(t){var e,o=1,a=.001,u=1-Math.pow(a,1/300),s=0,l=.6,c=n.map(),f=i.timer(v),h=r.dispatch("tick","end");function v(){b(),h.call("tick",e),o<a&&(f.stop(),h.call("end",e))}function b(n){var r,i,a=t.length;void 0===n&&(n=1);for(var f=0;f<n;++f)for(o+=(s-o)*u,c.each(function(t){t(o)}),r=0;r<a;++r)null==(i=t[r]).fx?i.x+=i.vx*=l:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=l:(i.y=i.fy,i.vy=0);return e}function m(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.fx)||(e.x=e.fx),isNaN(e.fy)||(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=d*Math.sqrt(n),o=n*p;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function g(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),m(),e={tick:b,restart:function(){return f.restart(v),e},stop:function(){return f.stop(),e},nodes:function(n){return arguments.length?(t=n,m(),c.each(g),e):t},alpha:function(t){return arguments.length?(o=+t,e):o},alphaMin:function(t){return arguments.length?(a=+t,e):a},alphaDecay:function(t){return arguments.length?(u=+t,e):+u},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(l=1-t,e):1-l},force:function(t,n){return arguments.length>1?(null==n?c.remove(t):c.set(t,g(n)),e):c.get(t)},find:function(e,n,r){var i,o,a,u,s,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(u=t[l]).x)*i+(o=n-u.y)*o)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(h.on(t,n),e):h.on(t)}}},t.forceX=function(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function u(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,u()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:o(+t),u(),a):i},a.x=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),u(),a):t},a},t.forceY=function(t){var e,n,r,i=o(.1);function a(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function u(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=o(null==t?0:+t)),a.initialize=function(t){e=t,u()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:o(+t),u(),a):i},a.y=function(e){return arguments.length?(t="function"==typeof e?e:o(+e),u(),a):t},a},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)},{"d3-collection":6,"d3-dispatch":9,"d3-quadtree":21,"d3-timer":28}],15:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function n(t){return(t=e(Math.abs(t)))?t[1]:NaN}var r,i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(t){return new a(t)}function a(t){if(!(e=i.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function u(t,n){var r=e(t,n);if(!r)return t+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return u(100*t,e)},r:u,s:function(t,n){var i=e(t,n);if(!i)return t+"";var o=i[0],a=i[1],u=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=o.length;return u===s?o:u>s?o+new Array(u-s+1).join("0"):u>0?o.slice(0,u)+"."+o.slice(u):"0."+new Array(1-u).join("0")+e(t,Math.max(0,n+u-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function l(t){return t}var c,f=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function h(t){var e,i,a=t.grouping&&t.thousands?(e=t.grouping,i=t.thousands,function(t,n){for(var r=t.length,o=[],a=0,u=e[0],s=0;r>0&&u>0&&(s+u+1>n&&(u=Math.max(1,n-s)),o.push(t.substring(r-=u,r+u)),!((s+=u+1)>n));)u=e[a=(a+1)%e.length];return o.reverse().join(i)}):l,u=t.currency,c=t.decimal,h=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):l,d=t.percent||"%";function p(t){var e=(t=o(t)).fill,n=t.align,i=t.sign,l=t.symbol,p=t.zero,v=t.width,b=t.comma,m=t.precision,g=t.trim,y=t.type;"n"===y?(b=!0,y="g"):s[y]||(null==m&&(m=12),g=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===l?u[0]:"#"===l&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===l?u[1]:/[%p]/.test(y)?d:"",x=s[y],k=/[defgprs%]/.test(y);function C(t){var o,u,s,l=_,d=w;if("c"===y)d=x(t)+d,t="";else{var C=(t=+t)<0;if(t=x(Math.abs(t),m),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),C&&0==+t&&(C=!1),l=(C?"("===i?i:"-":"-"===i||"("===i?"":i)+l,d=("s"===y?f[8+r/3]:"")+d+(C&&"("===i?")":""),k)for(o=-1,u=t.length;++o<u;)if(48>(s=t.charCodeAt(o))||s>57){d=(46===s?c+t.slice(o+1):t.slice(o))+d,t=t.slice(0,o);break}}b&&!p&&(t=a(t,1/0));var E=l.length+t.length+d.length,M=E<v?new Array(v-E+1).join(e):"";switch(b&&p&&(t=a(M+t,M.length?v-d.length:1/0),M=""),n){case"<":t=l+t+d+M;break;case"=":t=l+M+t+d;break;case"^":t=M.slice(0,E=M.length>>1)+l+t+d+M.slice(E);break;default:t=M+l+t+d}return h(t)}return m=null==m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),C.toString=function(){return t+""},C}return{format:p,formatPrefix:function(t,e){var r=p(((t=o(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(n(e)/3))),a=Math.pow(10,-i),u=f[8+i/3];return function(t){return r(a*t)+u}}}}function d(e){return c=h(e),t.format=c.format,t.formatPrefix=c.formatPrefix,c}d({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),t.formatDefaultLocale=d,t.formatLocale=h,t.formatSpecifier=o,t.precisionFixed=function(t){return Math.max(0,-n(Math.abs(t)))},t.precisionPrefix=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(e)/3)))-n(Math.abs(t)))},t.precisionRound=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,n(e)-n(t))+1},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],16:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(){return new r}function r(){this.reset()}r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){o(i,t,this.t),o(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r;function o(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var a=1e-6,u=1e-12,s=Math.PI,l=s/2,c=s/4,f=2*s,h=180/s,d=s/180,p=Math.abs,v=Math.atan,b=Math.atan2,m=Math.cos,g=Math.ceil,y=Math.exp,_=Math.log,w=Math.pow,x=Math.sin,k=Math.sign||function(t){return t>0?1:t<0?-1:0},C=Math.sqrt,E=Math.tan;function M(t){return t>1?0:t<-1?s:Math.acos(t)}function P(t){return t>1?l:t<-1?-l:Math.asin(t)}function A(t){return(t=x(t/2))*t}function S(){}function T(t,e){t&&V.hasOwnProperty(t.type)&&V[t.type](t,e)}var O={Feature:function(t,e){T(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)T(n[r].geometry,e)}},V={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){j(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)j(n[r],e,0)},Polygon:function(t,e){D(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)D(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)T(n[r],e)}};function j(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function D(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)j(t[n],e,1);e.polygonEnd()}function N(t,e){t&&O.hasOwnProperty(t.type)?O[t.type](t,e):T(t,e)}var L,z,R,B,I,F=n(),U=n(),q={point:S,lineStart:S,lineEnd:S,polygonStart:function(){F.reset(),q.lineStart=H,q.lineEnd=Y},polygonEnd:function(){var t=+F;U.add(t<0?f+t:t),this.lineStart=this.lineEnd=this.point=S},sphere:function(){U.add(f)}};function H(){q.point=K}function Y(){G(L,z)}function K(t,e){q.point=G,L=t,z=e,R=t*=d,B=m(e=(e*=d)/2+c),I=x(e)}function G(t,e){e=(e*=d)/2+c;var n=(t*=d)-R,r=n>=0?1:-1,i=r*n,o=m(e),a=x(e),u=I*a,s=B*o+u*m(i),l=u*r*x(i);F.add(b(l,s)),R=t,B=o,I=a}function W(t){return[b(t[1],t[0]),P(t[2])]}function X(t){var e=t[0],n=t[1],r=m(n);return[r*m(e),r*x(e),x(n)]}function $(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Q(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Z(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function J(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function tt(t){var e=C(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var et,nt,rt,it,ot,at,ut,st,lt,ct,ft,ht,dt,pt,vt,bt,mt,gt,yt,_t,wt,xt,kt,Ct,Et,Mt,Pt=n(),At={point:St,lineStart:Ot,lineEnd:Vt,polygonStart:function(){At.point=jt,At.lineStart=Dt,At.lineEnd=Nt,Pt.reset(),q.polygonStart()},polygonEnd:function(){q.polygonEnd(),At.point=St,At.lineStart=Ot,At.lineEnd=Vt,F<0?(et=-(rt=180),nt=-(it=90)):Pt>a?it=90:Pt<-a&&(nt=-90),ct[0]=et,ct[1]=rt}};function St(t,e){lt.push(ct=[et=t,rt=t]),e<nt&&(nt=e),e>it&&(it=e)}function Tt(t,e){var n=X([t*d,e*d]);if(st){var r=Q(st,n),i=Q([r[1],-r[0],0],r);tt(i),i=W(i);var o,a=t-ot,u=a>0?1:-1,s=i[0]*h*u,l=p(a)>180;l^(u*ot<s&&s<u*t)?(o=i[1]*h)>it&&(it=o):l^(u*ot<(s=(s+360)%360-180)&&s<u*t)?(o=-i[1]*h)<nt&&(nt=o):(e<nt&&(nt=e),e>it&&(it=e)),l?t<ot?Lt(et,t)>Lt(et,rt)&&(rt=t):Lt(t,rt)>Lt(et,rt)&&(et=t):rt>=et?(t<et&&(et=t),t>rt&&(rt=t)):t>ot?Lt(et,t)>Lt(et,rt)&&(rt=t):Lt(t,rt)>Lt(et,rt)&&(et=t)}else lt.push(ct=[et=t,rt=t]);e<nt&&(nt=e),e>it&&(it=e),st=n,ot=t}function Ot(){At.point=Tt}function Vt(){ct[0]=et,ct[1]=rt,At.point=St,st=null}function jt(t,e){if(st){var n=t-ot;Pt.add(p(n)>180?n+(n>0?360:-360):n)}else at=t,ut=e;q.point(t,e),Tt(t,e)}function Dt(){q.lineStart()}function Nt(){jt(at,ut),q.lineEnd(),p(Pt)>a&&(et=-(rt=180)),ct[0]=et,ct[1]=rt,st=null}function Lt(t,e){return(e-=t)<0?e+360:e}function zt(t,e){return t[0]-e[0]}function Rt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Bt={sphere:S,point:It,lineStart:Ut,lineEnd:Yt,polygonStart:function(){Bt.lineStart=Kt,Bt.lineEnd=Gt},polygonEnd:function(){Bt.lineStart=Ut,Bt.lineEnd=Yt}};function It(t,e){t*=d;var n=m(e*=d);Ft(n*m(t),n*x(t),x(e))}function Ft(t,e,n){dt+=(t-dt)/++ft,pt+=(e-pt)/ft,vt+=(n-vt)/ft}function Ut(){Bt.point=qt}function qt(t,e){t*=d;var n=m(e*=d);Ct=n*m(t),Et=n*x(t),Mt=x(e),Bt.point=Ht,Ft(Ct,Et,Mt)}function Ht(t,e){t*=d;var n=m(e*=d),r=n*m(t),i=n*x(t),o=x(e),a=b(C((a=Et*o-Mt*i)*a+(a=Mt*r-Ct*o)*a+(a=Ct*i-Et*r)*a),Ct*r+Et*i+Mt*o);ht+=a,bt+=a*(Ct+(Ct=r)),mt+=a*(Et+(Et=i)),gt+=a*(Mt+(Mt=o)),Ft(Ct,Et,Mt)}function Yt(){Bt.point=It}function Kt(){Bt.point=Wt}function Gt(){Xt(xt,kt),Bt.point=It}function Wt(t,e){xt=t,kt=e,t*=d,e*=d,Bt.point=Xt;var n=m(e);Ct=n*m(t),Et=n*x(t),Mt=x(e),Ft(Ct,Et,Mt)}function Xt(t,e){t*=d;var n=m(e*=d),r=n*m(t),i=n*x(t),o=x(e),a=Et*o-Mt*i,u=Mt*r-Ct*o,s=Ct*i-Et*r,l=C(a*a+u*u+s*s),c=P(l),f=l&&-c/l;yt+=f*a,_t+=f*u,wt+=f*s,ht+=c,bt+=c*(Ct+(Ct=r)),mt+=c*(Et+(Et=i)),gt+=c*(Mt+(Mt=o)),Ft(Ct,Et,Mt)}function $t(t){return function(){return t}}function Qt(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Zt(t,e){return[p(t)>s?t+Math.round(-t/f)*f:t,e]}function Jt(t,e,n){return(t%=f)?e||n?Qt(ee(t),ne(e,n)):ee(t):e||n?ne(e,n):Zt}function te(t){return function(e,n){return[(e+=t)>s?e-f:e<-s?e+f:e,n]}}function ee(t){var e=te(t);return e.invert=te(-t),e}function ne(t,e){var n=m(t),r=x(t),i=m(e),o=x(e);function a(t,e){var a=m(e),u=m(t)*a,s=x(t)*a,l=x(e),c=l*n+u*r;return[b(s*i-c*o,u*n-l*r),P(c*i+s*o)]}return a.invert=function(t,e){var a=m(e),u=m(t)*a,s=x(t)*a,l=x(e),c=l*i-s*o;return[b(s*i+l*o,u*n+c*r),P(c*n-u*r)]},a}function re(t){function e(e){return(e=t(e[0]*d,e[1]*d))[0]*=h,e[1]*=h,e}return t=Jt(t[0]*d,t[1]*d,t.length>2?t[2]*d:0),e.invert=function(e){return(e=t.invert(e[0]*d,e[1]*d))[0]*=h,e[1]*=h,e},e}function ie(t,e,n,r,i,o){if(n){var a=m(e),u=x(e),s=r*n;null==i?(i=e+r*f,o=e-s/2):(i=oe(a,i),o=oe(a,o),(r>0?i<o:i>o)&&(i+=r*f));for(var l,c=i;r>0?c>o:c<o;c-=s)l=W([a,-u*m(c),-u*x(c)]),t.point(l[0],l[1])}}function oe(t,e){(e=X(e))[0]-=t,tt(e);var n=M(-e[1]);return((-e[2]<0?-n:n)+f-a)%f}function ae(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:S,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ue(t,e){return p(t[0]-e[0])<a&&p(t[1]-e[1])<a}function se(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function le(t,e,n,r,i){var o,a,u=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(ue(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(n=new se(r,t,null,!0)),s.push(n.o=new se(r,null,n,!1)),u.push(n=new se(a,t,null,!1)),s.push(n.o=new se(a,null,n,!0))}}),u.length){for(s.sort(e),ce(u),ce(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var l,c,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function ce(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}Zt.invert=Zt;var fe=n();function he(t,e){var n=e[0],r=e[1],i=x(r),o=[x(n),-m(n),0],u=0,h=0;fe.reset(),1===i?r=l+a:-1===i&&(r=-l-a);for(var d=0,p=t.length;d<p;++d)if(g=(v=t[d]).length)for(var v,g,y=v[g-1],_=y[0],w=y[1]/2+c,k=x(w),C=m(w),E=0;E<g;++E,_=A,k=T,C=O,y=M){var M=v[E],A=M[0],S=M[1]/2+c,T=x(S),O=m(S),V=A-_,j=V>=0?1:-1,D=j*V,N=D>s,L=k*T;if(fe.add(b(L*j*x(D),C*O+L*m(D))),u+=N?V+j*f:V,N^_>=n^A>=n){var z=Q(X(y),X(M));tt(z);var R=Q(o,z);tt(R);var B=(N^V>=0?-1:1)*P(R[2]);(r>B||r===B&&(z[0]||z[1]))&&(h+=N^V>=0?1:-1)}}return(u<-a||u<a&&fe<-a)^1&h}function de(t,n,r,i){return function(o){var a,u,s,l=n(o),c=ae(),f=n(c),h=!1,d={point:p,lineStart:b,lineEnd:m,polygonStart:function(){d.point=g,d.lineStart=y,d.lineEnd=_,u=[],a=[]},polygonEnd:function(){d.point=p,d.lineStart=b,d.lineEnd=m,u=e.merge(u);var t=he(a,i);u.length?(h||(o.polygonStart(),h=!0),le(u,ve,t,r,o)):t&&(h||(o.polygonStart(),h=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),u=a=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(e,n){t(e,n)&&o.point(e,n)}function v(t,e){l.point(t,e)}function b(){d.point=v,l.lineStart()}function m(){d.point=p,l.lineEnd()}function g(t,e){s.push([t,e]),f.point(t,e)}function y(){f.lineStart(),s=[]}function _(){g(s[0][0],s[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=c.result(),d=l.length;if(s.pop(),a.push(s),s=null,d)if(1&i){if((e=(n=l[0]).length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else d>1&&2&i&&l.push(l.pop().concat(l.shift())),u.push(l.filter(pe))}return d}}function pe(t){return t.length>1}function ve(t,e){return((t=t.x)[0]<0?t[1]-l-a:l-t[1])-((e=e.x)[0]<0?e[1]-l-a:l-e[1])}var be=de(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,u){var c=o>0?s:-s,f=p(o-n);p(f-s)<a?(t.point(n,r=(r+u)/2>0?l:-l),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(o,r),e=0):i!==c&&f>=s&&(p(n-i)<a&&(n-=i*a),p(o-c)<a&&(o-=c*a),r=function(t,e,n,r){var i,o,u=x(t-n);return p(u)>a?v((x(e)*(o=m(r))*x(n)-x(r)*(i=m(e))*x(t))/(i*o*u)):(e+r)/2}(n,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=o,r=u),i=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*l,r.point(-s,i),r.point(0,i),r.point(s,i),r.point(s,0),r.point(s,-i),r.point(0,-i),r.point(-s,-i),r.point(-s,0),r.point(-s,i);else if(p(t[0]-e[0])>a){var o=t[0]<e[0]?s:-s;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-s,-l]);function me(t){var e=m(t),n=6*d,r=e>0,i=p(e)>a;function o(t,n){return m(t)*m(n)>e}function u(t,n,r){var i=[1,0,0],o=Q(X(t),X(n)),u=$(o,o),l=o[0],c=u-l*l;if(!c)return!r&&t;var f=e*u/c,h=-e*l/c,d=Q(i,o),v=J(i,f);Z(v,J(o,h));var b=d,m=$(v,b),g=$(b,b),y=m*m-g*($(v,v)-1);if(!(y<0)){var _=C(y),w=J(b,(-m-_)/g);if(Z(w,v),w=W(w),!r)return w;var x,k=t[0],E=n[0],M=t[1],P=n[1];E<k&&(x=k,k=E,E=x);var A=E-k,S=p(A-s)<a;if(!S&&P<M&&(x=M,M=P,P=x),S||A<a?S?M+P>0^w[1]<(p(w[0]-k)<a?M:P):M<=w[1]&&w[1]<=P:A>s^(k<=w[0]&&w[0]<=E)){var T=J(b,(-m+_)/g);return Z(T,v),[w,W(T)]}}}function l(e,n){var i=r?t:s-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return de(o,function(t){var e,n,c,f,h;return{lineStart:function(){f=c=!1,h=1},point:function(d,p){var v,b=[d,p],m=o(d,p),g=r?m?0:l(d,p):m?l(d+(d<0?s:-s),p):0;if(!e&&(f=c=m)&&t.lineStart(),m!==c&&(!(v=u(e,b))||ue(e,v)||ue(b,v))&&(b[0]+=a,b[1]+=a,m=o(b[0],b[1])),m!==c)h=0,m?(t.lineStart(),v=u(b,e),t.point(v[0],v[1])):(v=u(e,b),t.point(v[0],v[1]),t.lineEnd()),e=v;else if(i&&e&&r^m){var y;g&n||!(y=u(b,e,!0))||(h=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!m||e&&ue(e,b)||t.point(b[0],b[1]),e=b,c=m,n=g},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return h|(f&&c)<<1}}},function(e,r,i,o){ie(o,t,n,i,e,r)},r?[0,-t]:[-s,t-s])}var ge=1e9,ye=-ge;function _e(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function u(e,o,a,u){var l=0,f=0;if(null==e||(l=s(e,a))!==(f=s(o,a))||c(e,o)<0^a>0)do{u.point(0===l||3===l?t:r,l>1?i:n)}while((l=(l+a+4)%4)!==f);else u.point(o[0],o[1])}function s(e,i){return p(e[0]-t)<a?i>0?0:3:p(e[0]-r)<a?i>0?2:1:p(e[1]-n)<a?i>0?1:0:i>0?3:2}function l(t,e){return c(t.x,e.x)}function c(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var s,c,f,h,d,p,v,b,m,g,y,_=a,w=ae(),x={point:k,lineStart:function(){x.point=C,c&&c.push(f=[]);g=!0,m=!1,v=b=NaN},lineEnd:function(){s&&(C(h,d),p&&m&&w.rejoin(),s.push(w.result()));x.point=k,m&&_.lineEnd()},polygonStart:function(){_=w,s=[],c=[],y=!0},polygonEnd:function(){var n=function(){for(var e=0,n=0,r=c.length;n<r;++n)for(var o,a,u=c[n],s=1,l=u.length,f=u[0],h=f[0],d=f[1];s<l;++s)o=h,a=d,f=u[s],h=f[0],d=f[1],a<=i?d>i&&(h-o)*(i-a)>(d-a)*(t-o)&&++e:d<=i&&(h-o)*(i-a)<(d-a)*(t-o)&&--e;return e}(),r=y&&n,o=(s=e.merge(s)).length;(r||o)&&(a.polygonStart(),r&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),o&&le(s,l,n,u,a),a.polygonEnd());_=a,s=c=f=null}};function k(t,e){o(t,e)&&_.point(t,e)}function C(e,a){var u=o(e,a);if(c&&f.push([e,a]),g)h=e,d=a,p=u,g=!1,u&&(_.lineStart(),_.point(e,a));else if(u&&m)_.point(e,a);else{var s=[v=Math.max(ye,Math.min(ge,v)),b=Math.max(ye,Math.min(ge,b))],l=[e=Math.max(ye,Math.min(ge,e)),a=Math.max(ye,Math.min(ge,a))];!function(t,e,n,r,i,o){var a,u=t[0],s=t[1],l=0,c=1,f=e[0]-u,h=e[1]-s;if(a=n-u,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-u,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-s,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=u+l*f,t[1]=s+l*h),c<1&&(e[0]=u+c*f,e[1]=s+c*h),!0}}}}}(s,l,t,n,r,i)?u&&(_.lineStart(),_.point(e,a),y=!1):(m||(_.lineStart(),_.point(s[0],s[1])),_.point(l[0],l[1]),u||_.lineEnd(),y=!1)}v=e,b=a,m=u}return x}}var we,xe,ke,Ce=n(),Ee={sphere:S,point:S,lineStart:function(){Ee.point=Pe,Ee.lineEnd=Me},lineEnd:S,polygonStart:S,polygonEnd:S};function Me(){Ee.point=Ee.lineEnd=S}function Pe(t,e){we=t*=d,xe=x(e*=d),ke=m(e),Ee.point=Ae}function Ae(t,e){t*=d;var n=x(e*=d),r=m(e),i=p(t-we),o=m(i),a=r*x(i),u=ke*n-xe*r*o,s=xe*n+ke*r*o;Ce.add(b(C(a*a+u*u),s)),we=t,xe=n,ke=r}function Se(t){return Ce.reset(),N(t,Ee),+Ce}var Te=[null,null],Oe={type:"LineString",coordinates:Te};function Ve(t,e){return Te[0]=t,Te[1]=e,Se(Oe)}var je={Feature:function(t,e){return Ne(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Ne(n[r].geometry,e))return!0;return!1}},De={Sphere:function(){return!0},Point:function(t,e){return Le(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Le(n[r],e))return!0;return!1},LineString:function(t,e){return ze(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ze(n[r],e))return!0;return!1},Polygon:function(t,e){return Re(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Re(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Ne(n[r],e))return!0;return!1}};function Ne(t,e){return!(!t||!De.hasOwnProperty(t.type))&&De[t.type](t,e)}function Le(t,e){return 0===Ve(t,e)}function ze(t,e){var n=Ve(t[0],t[1]);return Ve(t[0],e)+Ve(e,t[1])<=n+a}function Re(t,e){return!!he(t.map(Be),Ie(e))}function Be(t){return(t=t.map(Ie)).pop(),t}function Ie(t){return[t[0]*d,t[1]*d]}function Fe(t,n,r){var i=e.range(t,n-a,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function Ue(t,n,r){var i=e.range(t,n-a,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function qe(){var t,n,r,i,o,u,s,l,c,f,h,d,v=10,b=v,m=90,y=360,_=2.5;function w(){return{type:"MultiLineString",coordinates:x()}}function x(){return e.range(g(i/m)*m,r,m).map(h).concat(e.range(g(l/y)*y,s,y).map(d)).concat(e.range(g(n/v)*v,t,v).filter(function(t){return p(t%m)>a}).map(c)).concat(e.range(g(u/b)*b,o,b).filter(function(t){return p(t%y)>a}).map(f))}return w.lines=function(){return x().map(function(t){return{type:"LineString",coordinates:t}})},w.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(s).slice(1),h(r).reverse().slice(1),d(l).reverse().slice(1))]}},w.extent=function(t){return arguments.length?w.extentMajor(t).extentMinor(t):w.extentMinor()},w.extentMajor=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],s=+t[1][1],i>r&&(t=i,i=r,r=t),l>s&&(t=l,l=s,s=t),w.precision(_)):[[i,l],[r,s]]},w.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],u=+e[0][1],o=+e[1][1],n>t&&(e=n,n=t,t=e),u>o&&(e=u,u=o,o=e),w.precision(_)):[[n,u],[t,o]]},w.step=function(t){return arguments.length?w.stepMajor(t).stepMinor(t):w.stepMinor()},w.stepMajor=function(t){return arguments.length?(m=+t[0],y=+t[1],w):[m,y]},w.stepMinor=function(t){return arguments.length?(v=+t[0],b=+t[1],w):[v,b]},w.precision=function(e){return arguments.length?(_=+e,c=Fe(u,o,90),f=Ue(n,t,_),h=Fe(l,s,90),d=Ue(i,r,_),w):_},w.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function He(t){return t}var Ye,Ke,Ge,We,Xe=n(),$e=n(),Qe={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Qe.lineStart=Ze,Qe.lineEnd=en},polygonEnd:function(){Qe.lineStart=Qe.lineEnd=Qe.point=S,Xe.add(p($e)),$e.reset()},result:function(){var t=Xe/2;return Xe.reset(),t}};function Ze(){Qe.point=Je}function Je(t,e){Qe.point=tn,Ye=Ge=t,Ke=We=e}function tn(t,e){$e.add(We*t-Ge*e),Ge=t,We=e}function en(){tn(Ye,Ke)}var nn=1/0,rn=nn,on=-nn,an=on,un={point:function(t,e){t<nn&&(nn=t);t>on&&(on=t);e<rn&&(rn=e);e>an&&(an=e)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var t=[[nn,rn],[on,an]];return on=an=-(rn=nn=1/0),t}};var sn,ln,cn,fn,hn=0,dn=0,pn=0,vn=0,bn=0,mn=0,gn=0,yn=0,_n=0,wn={point:xn,lineStart:kn,lineEnd:Mn,polygonStart:function(){wn.lineStart=Pn,wn.lineEnd=An},polygonEnd:function(){wn.point=xn,wn.lineStart=kn,wn.lineEnd=Mn},result:function(){var t=_n?[gn/_n,yn/_n]:mn?[vn/mn,bn/mn]:pn?[hn/pn,dn/pn]:[NaN,NaN];return hn=dn=pn=vn=bn=mn=gn=yn=_n=0,t}};function xn(t,e){hn+=t,dn+=e,++pn}function kn(){wn.point=Cn}function Cn(t,e){wn.point=En,xn(cn=t,fn=e)}function En(t,e){var n=t-cn,r=e-fn,i=C(n*n+r*r);vn+=i*(cn+t)/2,bn+=i*(fn+e)/2,mn+=i,xn(cn=t,fn=e)}function Mn(){wn.point=xn}function Pn(){wn.point=Sn}function An(){Tn(sn,ln)}function Sn(t,e){wn.point=Tn,xn(sn=cn=t,ln=fn=e)}function Tn(t,e){var n=t-cn,r=e-fn,i=C(n*n+r*r);vn+=i*(cn+t)/2,bn+=i*(fn+e)/2,mn+=i,gn+=(i=fn*t-cn*e)*(cn+t),yn+=i*(fn+e),_n+=3*i,xn(cn=t,fn=e)}function On(t){this._context=t}On.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,f)}},result:S};var Vn,jn,Dn,Nn,Ln,zn=n(),Rn={point:S,lineStart:function(){Rn.point=Bn},lineEnd:function(){Vn&&In(jn,Dn),Rn.point=S},polygonStart:function(){Vn=!0},polygonEnd:function(){Vn=null},result:function(){var t=+zn;return zn.reset(),t}};function Bn(t,e){Rn.point=In,jn=Nn=t,Dn=Ln=e}function In(t,e){Nn-=t,Ln-=e,zn.add(C(Nn*Nn+Ln*Ln)),Nn=t,Ln=e}function Fn(){this._string=[]}function Un(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function qn(t){return function(e){var n=new Hn;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Hn(){}function Yn(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),N(n,t.stream(un)),e(un.result()),null!=r&&t.clipExtent(r),t}function Kn(t,e,n){return Yn(t,function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,u=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,u])},n)}function Gn(t,e,n){return Kn(t,[[0,0],e],n)}function Wn(t,e,n){return Yn(t,function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])},n)}function Xn(t,e,n){return Yn(t,function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])},n)}Fn.prototype={_radius:4.5,_circle:Un(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Un(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Hn.prototype={constructor:Hn,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $n=16,Qn=m(30*d);function Zn(t,e){return+e?function(t,e){function n(r,i,o,u,s,l,c,f,h,d,v,m,g,y){var _=c-r,w=f-i,x=_*_+w*w;if(x>4*e&&g--){var k=u+d,E=s+v,M=l+m,A=C(k*k+E*E+M*M),S=P(M/=A),T=p(p(M)-1)<a||p(o-h)<a?(o+h)/2:b(E,k),O=t(T,S),V=O[0],j=O[1],D=V-r,N=j-i,L=w*D-_*N;(L*L/x>e||p((_*D+w*N)/x-.5)>.3||u*d+s*v+l*m<Qn)&&(n(r,i,o,u,s,l,V,j,T,k/=A,E/=A,M,g,y),y.point(V,j),n(V,j,T,k,E,M,c,f,h,d,v,m,g,y))}}return function(e){var r,i,o,a,u,s,l,c,f,h,d,p,v={point:b,lineStart:m,lineEnd:y,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=m}};function b(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){c=NaN,v.point=g,e.lineStart()}function g(r,i){var o=X([r,i]),a=t(r,i);n(c,f,l,h,d,p,c=a[0],f=a[1],l=r,h=o[0],d=o[1],p=o[2],$n,e),e.point(c,f)}function y(){v.point=b,e.lineEnd()}function _(){m(),v.point=w,v.lineEnd=x}function w(t,e){g(r=t,e),i=c,o=f,a=h,u=d,s=p,v.point=g}function x(){n(c,f,l,h,d,p,i,o,r,a,u,s,$n,e),v.lineEnd=y,y()}return v}}(t,e):function(t){return qn({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Jn=qn({point:function(t,e){this.stream.point(t*d,e*d)}});function tr(t,e,n,r){var i=m(r),o=x(r),a=i*t,u=o*t,s=i/t,l=o/t,c=(o*n-i*e)/t,f=(o*e+i*n)/t;function h(t,r){return[a*t-u*r+e,n-u*t-a*r]}return h.invert=function(t,e){return[s*t-l*e+c,f-l*t-s*e]},h}function er(t){return nr(function(){return t})()}function nr(t){var e,n,r,i,o,a,u,s,l,c,f=150,p=480,v=250,b=0,m=0,g=0,y=0,_=0,w=0,x=null,k=be,E=null,M=He,P=.5;function A(t){return s(t[0]*d,t[1]*d)}function S(t){return(t=s.invert(t[0],t[1]))&&[t[0]*h,t[1]*h]}function T(){var t=tr(f,0,0,w).apply(null,e(b,m)),r=(w?tr:function(t,e,n){function r(r,i){return[e+t*r,n-t*i]}return r.invert=function(r,i){return[(r-e)/t,(n-i)/t]},r})(f,p-t[0],v-t[1],w);return n=Jt(g,y,_),u=Qt(e,r),s=Qt(n,u),a=Zn(u,P),O()}function O(){return l=c=null,A}return A.stream=function(t){return l&&c===t?l:l=Jn(function(t){return qn({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(M(c=t)))))},A.preclip=function(t){return arguments.length?(k=t,x=void 0,O()):k},A.postclip=function(t){return arguments.length?(M=t,E=r=i=o=null,O()):M},A.clipAngle=function(t){return arguments.length?(k=+t?me(x=t*d):(x=null,be),O()):x*h},A.clipExtent=function(t){return arguments.length?(M=null==t?(E=r=i=o=null,He):_e(E=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),O()):null==E?null:[[E,r],[i,o]]},A.scale=function(t){return arguments.length?(f=+t,T()):f},A.translate=function(t){return arguments.length?(p=+t[0],v=+t[1],T()):[p,v]},A.center=function(t){return arguments.length?(b=t[0]%360*d,m=t[1]%360*d,T()):[b*h,m*h]},A.rotate=function(t){return arguments.length?(g=t[0]%360*d,y=t[1]%360*d,_=t.length>2?t[2]%360*d:0,T()):[g*h,y*h,_*h]},A.angle=function(t){return arguments.length?(w=t%360*d,T()):w*h},A.precision=function(t){return arguments.length?(a=Zn(u,P=t*t),O()):C(P)},A.fitExtent=function(t,e){return Kn(A,t,e)},A.fitSize=function(t,e){return Gn(A,t,e)},A.fitWidth=function(t,e){return Wn(A,t,e)},A.fitHeight=function(t,e){return Xn(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&S,T()}}function rr(t){var e=0,n=s/3,r=nr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*d,n=t[1]*d):[e*h,n*h]},i}function ir(t,e){var n=x(t),r=(n+x(e))/2;if(p(r)<a)return function(t){var e=m(t);function n(t,n){return[t*e,x(n)/e]}return n.invert=function(t,n){return[t/e,P(n*e)]},n}(t);var i=1+n*(2*r-n),o=C(i)/r;function u(t,e){var n=C(i-2*r*x(e))/r;return[n*x(t*=r),o-n*m(t)]}return u.invert=function(t,e){var n=o-e;return[b(t,p(n))/r*k(n),P((i-(t*t+n*n)*r*r)/(2*r))]},u}function or(){return rr(ir).scale(155.424).center([0,33.6442])}function ar(){return or().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ur(t){return function(e,n){var r=m(e),i=m(n),o=t(r*i);return[o*i*x(e),o*x(n)]}}function sr(t){return function(e,n){var r=C(e*e+n*n),i=t(r),o=x(i),a=m(i);return[b(e*o,r*a),P(r&&n*o/r)]}}var lr=ur(function(t){return C(2/(1+t))});lr.invert=sr(function(t){return 2*P(t/2)});var cr=ur(function(t){return(t=M(t))&&t/x(t)});function fr(t,e){return[t,_(E((l+e)/2))]}function hr(t){var e,n,r,i=er(t),o=i.center,a=i.scale,u=i.translate,l=i.clipExtent,c=null;function f(){var o=s*a(),u=i(re(i.rotate()).invert([0,0]));return l(null==c?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===fr?[[Math.max(u[0]-o,c),e],[Math.min(u[0]+o,n),r]]:[[c,Math.max(u[1]-o,e)],[n,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),f()):a()},i.translate=function(t){return arguments.length?(u(t),f()):u()},i.center=function(t){return arguments.length?(o(t),f()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==c?null:[[c,e],[n,r]]},f()}function dr(t){return E((l+t)/2)}function pr(t,e){var n=m(t),r=t===e?x(t):_(n/m(e))/_(dr(e)/dr(t)),i=n*w(dr(t),r)/r;if(!r)return fr;function o(t,e){i>0?e<-l+a&&(e=-l+a):e>l-a&&(e=l-a);var n=i/w(dr(e),r);return[n*x(r*t),i-n*m(r*t)]}return o.invert=function(t,e){var n=i-e,o=k(r)*C(t*t+n*n);return[b(t,p(n))/r*k(n),2*v(w(i/o,1/r))-l]},o}function vr(t,e){return[t,e]}function br(t,e){var n=m(t),r=t===e?x(t):(n-m(e))/(e-t),i=n/r+t;if(p(r)<a)return vr;function o(t,e){var n=i-e,o=r*t;return[n*x(o),i-n*m(o)]}return o.invert=function(t,e){var n=i-e;return[b(t,p(n))/r*k(n),i-k(r)*C(t*t+n*n)]},o}cr.invert=sr(function(t){return t}),fr.invert=function(t,e){return[t,2*v(y(e))-l]},vr.invert=vr;var mr=1.340264,gr=-.081106,yr=893e-6,_r=.003796,wr=C(3)/2;function xr(t,e){var n=P(wr*x(e)),r=n*n,i=r*r*r;return[t*m(n)/(wr*(mr+3*gr*r+i*(7*yr+9*_r*r))),n*(mr+gr*r+i*(yr+_r*r))]}function kr(t,e){var n=m(e),r=m(t)*n;return[n*x(t)/r,x(e)/r]}function Cr(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?He:qn({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function Er(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Mr(t,e){return[m(e)*x(t),x(e)]}function Pr(t,e){var n=m(e),r=1+m(t)*n;return[n*x(t)/r,x(e)/r]}function Ar(t,e){return[_(E((l+e)/2)),-t]}xr.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(mr+gr*i+o*(yr+_r*i))-e)/(mr+3*gr*i+o*(7*yr+9*_r*i)))*r)*i*i,!(p(n)<u));++a);return[wr*t*(mr+3*gr*i+o*(7*yr+9*_r*i))/m(r),P(x(r)/wr)]},kr.invert=sr(v),Er.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,u=o*o;r-=n=(r*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))-e)/(1.007226+o*(.045255+u*(.259866*o-.311325-.005916*11*u)))}while(p(n)>a&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Mr.invert=sr(P),Pr.invert=sr(function(t){return 2*v(t)}),Ar.invert=function(t,e){return[-e,2*v(y(t))-l]},t.geoArea=function(t){return U.reset(),N(t,q),2*U},t.geoBounds=function(t){var e,n,r,i,o,a,u;if(it=rt=-(et=nt=1/0),lt=[],N(t,At),n=lt.length){for(lt.sort(zt),e=1,o=[r=lt[0]];e<n;++e)Rt(r,(i=lt[e])[0])||Rt(r,i[1])?(Lt(r[0],i[1])>Lt(r[0],r[1])&&(r[1]=i[1]),Lt(i[0],r[1])>Lt(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(u=Lt(r[1],i[0]))>a&&(a=u,et=i[0],rt=r[1])}return lt=ct=null,et===1/0||nt===1/0?[[NaN,NaN],[NaN,NaN]]:[[et,nt],[rt,it]]},t.geoCentroid=function(t){ft=ht=dt=pt=vt=bt=mt=gt=yt=_t=wt=0,N(t,Bt);var e=yt,n=_t,r=wt,i=e*e+n*n+r*r;return i<u&&(e=bt,n=mt,r=gt,ht<a&&(e=dt,n=pt,r=vt),(i=e*e+n*n+r*r)<u)?[NaN,NaN]:[b(n,e)*h,P(r/C(i))*h]},t.geoCircle=function(){var t,e,n=$t([0,0]),r=$t(90),i=$t(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=h,n[1]*=h}};function a(){var a=n.apply(this,arguments),u=r.apply(this,arguments)*d,s=i.apply(this,arguments)*d;return t=[],e=Jt(-a[0]*d,-a[1]*d,0).invert,ie(o,u,s,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:$t([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:$t(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:$t(+t),a):i},a},t.geoClipAntimeridian=be,t.geoClipCircle=me,t.geoClipExtent=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=_e(r,i,o,a)(e=n)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=e=null,n):[[r,i],[o,a]]}}},t.geoClipRectangle=_e,t.geoContains=function(t,e){return(t&&je.hasOwnProperty(t.type)?je[t.type]:Ne)(t,e)},t.geoDistance=Ve,t.geoGraticule=qe,t.geoGraticule10=function(){return qe()()},t.geoInterpolate=function(t,e){var n=t[0]*d,r=t[1]*d,i=e[0]*d,o=e[1]*d,a=m(r),u=x(r),s=m(o),l=x(o),c=a*m(n),f=a*x(n),p=s*m(i),v=s*x(i),g=2*P(C(A(o-r)+a*s*A(i-n))),y=x(g),_=g?function(t){var e=x(t*=g)/y,n=x(g-t)/y,r=n*c+e*p,i=n*f+e*v,o=n*u+e*l;return[b(i,r)*h,b(o,C(r*r+i*i))*h]}:function(){return[n*h,r*h]};return _.distance=g,_},t.geoLength=Se,t.geoPath=function(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),N(t,n(r))),r.result()}return o.area=function(t){return N(t,n(Qe)),Qe.result()},o.measure=function(t){return N(t,n(Rn)),Rn.result()},o.bounds=function(t){return N(t,n(un)),un.result()},o.centroid=function(t){return N(t,n(wn)),wn.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,He):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new Fn):new On(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)},t.geoAlbers=ar,t.geoAlbersUsa=function(){var t,e,n,r,i,o,u=ar(),s=or().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=or().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function f(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,f}return f.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:u).invert(t)},f.stream=function(n){return t&&e===n?t:(r=[u.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},f.precision=function(t){return arguments.length?(u.precision(t),s.precision(t),l.precision(t),h()):u.precision()},f.scale=function(t){return arguments.length?(u.scale(t),s.scale(.35*t),l.scale(t),f.translate(u.translate())):u.scale()},f.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),o=+t[0],f=+t[1];return n=u.translate(t).clipExtent([[o-.455*e,f-.238*e],[o+.455*e,f+.238*e]]).stream(c),r=s.translate([o-.307*e,f+.201*e]).clipExtent([[o-.425*e+a,f+.12*e+a],[o-.214*e-a,f+.234*e-a]]).stream(c),i=l.translate([o-.205*e,f+.212*e]).clipExtent([[o-.214*e+a,f+.166*e+a],[o-.115*e-a,f+.234*e-a]]).stream(c),h()},f.fitExtent=function(t,e){return Kn(f,t,e)},f.fitSize=function(t,e){return Gn(f,t,e)},f.fitWidth=function(t,e){return Wn(f,t,e)},f.fitHeight=function(t,e){return Xn(f,t,e)},f.scale(1070)},t.geoAzimuthalEqualArea=function(){return er(lr).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=lr,t.geoAzimuthalEquidistant=function(){return er(cr).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=cr,t.geoConicConformal=function(){return rr(pr).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=pr,t.geoConicEqualArea=or,t.geoConicEqualAreaRaw=ir,t.geoConicEquidistant=function(){return rr(br).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=br,t.geoEqualEarth=function(){return er(xr).scale(177.158)},t.geoEqualEarthRaw=xr,t.geoEquirectangular=function(){return er(vr).scale(152.63)},t.geoEquirectangularRaw=vr,t.geoGnomonic=function(){return er(kr).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=kr,t.geoIdentity=function(){var t,e,n,r,i,o,a=1,u=0,s=0,l=1,c=1,f=He,h=null,d=He;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=f(d(i=t))},postclip:function(r){return arguments.length?(d=r,h=t=e=n=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(h=t=e=n=null,He):_e(h=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==h?null:[[h,t],[e,n]]},scale:function(t){return arguments.length?(f=Cr((a=+t)*l,a*c,u,s),p()):a},translate:function(t){return arguments.length?(f=Cr(a*l,a*c,u=+t[0],s=+t[1]),p()):[u,s]},reflectX:function(t){return arguments.length?(f=Cr(a*(l=t?-1:1),a*c,u,s),p()):l<0},reflectY:function(t){return arguments.length?(f=Cr(a*l,a*(c=t?-1:1),u,s),p()):c<0},fitExtent:function(t,e){return Kn(o,t,e)},fitSize:function(t,e){return Gn(o,t,e)},fitWidth:function(t,e){return Wn(o,t,e)},fitHeight:function(t,e){return Xn(o,t,e)}}},t.geoProjection=er,t.geoProjectionMutator=nr,t.geoMercator=function(){return hr(fr).scale(961/f)},t.geoMercatorRaw=fr,t.geoNaturalEarth1=function(){return er(Er).scale(175.295)},t.geoNaturalEarth1Raw=Er,t.geoOrthographic=function(){return er(Mr).scale(249.5).clipAngle(90+a)},t.geoOrthographicRaw=Mr,t.geoStereographic=function(){return er(Pr).scale(250).clipAngle(142)},t.geoStereographicRaw=Pr,t.geoTransverseMercator=function(){var t=hr(Ar),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Ar,t.geoRotation=re,t.geoStream=N,t.geoTransform=function(t){return{stream:qn(t)}},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)},{"d3-array":2}],17:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){return t.parent===e.parent?1:2}function n(t,e){return t+e.x}function r(t,e){return Math.max(t,e.y)}function i(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function o(t,e){var n,r,i,o,u,c=new l(t),f=+t.value&&(c.value=t.value),h=[c];for(null==e&&(e=a);n=h.pop();)if(f&&(n.value=+n.data.value),(i=e(n.data))&&(u=i.length))for(n.children=new Array(u),o=u-1;o>=0;--o)h.push(r=n.children[o]=new l(i[o])),r.parent=n,r.depth=n.depth+1;return c.eachBefore(s)}function a(t){return t.children}function u(t){t.data=t.data.data}function s(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function l(t){this.data=t,this.depth=this.height=0,this.parent=null}l.prototype=o.prototype={constructor:l,count:function(){return this.eachAfter(i)},each:function(t){var e,n,r,i,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return o(this).eachBefore(u)}};var c=Array.prototype.slice;function f(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(c.call(t))).length,o=[];r<i;)e=t[r],n&&p(n,e)?++r:(n=b(o=h(o,e)),r=0);return n}function h(t,e){var n,r;if(v(e,t))return[e];for(n=0;n<t.length;++n)if(d(e,t[n])&&v(m(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(d(m(t[n],t[r]),e)&&d(m(t[n],e),t[r])&&d(m(t[r],e),t[n])&&v(g(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function d(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function p(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function v(t,e){for(var n=0;n<e.length;++n)if(!p(t,e[n]))return!1;return!0}function b(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return m(t[0],t[1]);case 3:return g(t[0],t[1],t[2])}var e}function m(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,u=e.r,s=o-n,l=a-r,c=u-i,f=Math.sqrt(s*s+l*l);return{x:(n+o+s/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+u)/2}}function g(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,u=e.y,s=e.r,l=n.x,c=n.y,f=n.r,h=r-a,d=r-l,p=i-u,v=i-c,b=s-o,m=f-o,g=r*r+i*i-o*o,y=g-a*a-u*u+s*s,_=g-l*l-c*c+f*f,w=d*p-h*v,x=(p*_-v*y)/(2*w)-r,k=(v*b-p*m)/w,C=(d*y-h*_)/(2*w)-i,E=(h*m-d*b)/w,M=k*k+E*E-1,P=2*(o+x*k+C*E),A=x*x+C*C-o*o,S=-(M?(P+Math.sqrt(P*P-4*M*A))/(2*M):A/P);return{x:r+x+k*S,y:i+C+E*S,r:S}}function y(t,e,n){var r,i,o,a,u=t.x-e.x,s=t.y-e.y,l=u*u+s*s;l?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=t.x-r*u-o*s,n.y=t.y-r*s+o*u):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*u-o*s,n.y=e.y+r*s+o*u)):(n.x=e.x+n.r,n.y=e.y)}function _(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function w(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function x(t){this._=t,this.next=null,this.previous=null}function k(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,u,s,l,c,h;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;y(n,e,r=t[2]),e=new x(e),n=new x(n),r=new x(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){y(e._,n._,r=t[u]),r=new x(r),s=n.next,l=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(_(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(_(l._,r._)){(e=l).next=n,n.previous=e,--u;continue t}h+=l._.r,l=l.previous}}while(s!==l.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=w(e);(r=r.next)!==n;)(a=w(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=f(e),u=0;u<i;++u)(e=t[u]).x-=r.x,e.y-=r.y;return r.r}function C(t){if("function"!=typeof t)throw new Error;return t}function E(){return 0}function M(t){return function(){return t}}function P(t){return Math.sqrt(t.value)}function A(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function S(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,u=t(n)*e||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=k(r),u)for(i=0;i<a;++i)r[i].r-=u;n.r=o+u}}}function T(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function O(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function V(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,l=t.value&&(r-e)/t.value;++u<s;)(o=a[u]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l}var j="$",D={depth:-1},N={};function L(t){return t.id}function z(t){return t.parentId}function R(t,e){return t.parent===e.parent?1:2}function B(t){var e=t.children;return e?e[0]:t.t}function I(t){var e=t.children;return e?e[e.length-1]:t.t}function F(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function U(t,e,n){return t.a.parent===e.parent?t.a:n}function q(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function H(t,e,n,r,i){for(var o,a=t.children,u=-1,s=a.length,l=t.value&&(i-n)/t.value;++u<s;)(o=a[u]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l}q.prototype=Object.create(l.prototype);var Y=(1+Math.sqrt(5))/2;function K(t,e,n,r,i,o){for(var a,u,s,l,c,f,h,d,p,v,b,m=[],g=e.children,y=0,_=0,w=g.length,x=e.value;y<w;){s=i-n,l=o-r;do{c=g[_++].value}while(!c&&_<w);for(f=h=c,b=c*c*(v=Math.max(l/s,s/l)/(x*t)),p=Math.max(h/b,b/f);_<w;++_){if(c+=u=g[_].value,u<f&&(f=u),u>h&&(h=u),b=c*c*v,(d=Math.max(h/b,b/f))>p){c-=u;break}p=d}m.push(a={value:c,dice:s<l,children:g.slice(y,_)}),a.dice?V(a,n,r,i,x?r+=l*c/x:o):H(a,n,r,x?n+=s*c/x:i,o),x-=c,y=_}return m}var G=function t(e){function n(t,n,r,i,o){K(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Y);var W=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,u,s,l,c,f=-1,h=a.length,d=t.value;++f<h;){for(s=(u=a[f]).children,l=u.value=0,c=s.length;l<c;++l)u.value+=s[l].value;u.dice?V(u,n,r,i,r+=(o-r)*u.value/d):H(u,n,r,n+=(i-n)*u.value/d,o),d-=u.value}else t._squarify=a=K(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Y);t.cluster=function(){var t=e,i=1,o=1,a=!1;function u(e){var u,s=0;e.eachAfter(function(e){var i=e.children;i?(e.x=function(t){return t.reduce(n,0)/t.length}(i),e.y=function(t){return 1+t.reduce(r,0)}(i)):(e.x=u?s+=t(e,u):0,e.y=0,u=e)});var l=function(t){for(var e;e=t.children;)t=e[0];return t}(e),c=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),f=l.x-t(l,c)/2,h=c.x+t(c,l)/2;return e.eachAfter(a?function(t){t.x=(t.x-e.x)*i,t.y=(e.y-t.y)*o}:function(t){t.x=(t.x-f)/(h-f)*i,t.y=(1-(e.y?t.y/e.y:1))*o})}return u.separation=function(e){return arguments.length?(t=e,u):t},u.size=function(t){return arguments.length?(a=!1,i=+t[0],o=+t[1],u):a?null:[i,o]},u.nodeSize=function(t){return arguments.length?(a=!0,i=+t[0],o=+t[1],u):a?[i,o]:null},u},t.hierarchy=o,t.pack=function(){var t=null,e=1,n=1,r=E;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(A(t)).eachAfter(S(r,.5)).eachBefore(T(1)):i.eachBefore(A(P)).eachAfter(S(E,1)).eachAfter(S(r,i.r/Math.min(e,n))).eachBefore(T(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=null==(n=e)?null:C(n),i):t;var n},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:M(+t),i):r},i},t.packSiblings=function(t){return k(t),t},t.packEnclose=f,t.partition=function(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&V(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,u=r.y1-n;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(e,o)),r&&i.eachBefore(O),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i},t.stratify=function(){var t=L,e=z;function n(n){var r,i,o,a,u,c,f,h=n.length,d=new Array(h),p={};for(i=0;i<h;++i)r=n[i],u=d[i]=new l(r),null!=(c=t(r,i,n))&&(c+="")&&(p[f=j+(u.id=c)]=f in p?N:u);for(i=0;i<h;++i)if(u=d[i],null!=(c=e(n[i],i,n))&&(c+="")){if(!(a=p[j+c]))throw new Error("missing: "+c);if(a===N)throw new Error("ambiguous: "+c);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=D,o.eachBefore(function(t){t.depth=t.parent.depth+1,--h}).eachBefore(s),o.parent=null,h>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=C(e),n):t},n.parentId=function(t){return arguments.length?(e=C(t),n):e},n},t.tree=function(){var t=R,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,o,a=new q(t,0),u=[a];e=u.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(n=e.children[i]=new q(r[i],i)),n.parent=e;return(a.parent=new q(null,0)).children=[a],a}(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(u);else{var l=i,c=i,f=i;i.eachBefore(function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)});var h=l===c?1:t(l,c)/2,d=h-l.x,p=e/(c.x+h+d),v=n/(f.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*v})}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,u=n,s=o.parent.children[0],l=o.m,c=a.m,f=u.m,h=s.m;u=I(u),o=B(o),u&&o;)s=B(s),(a=I(a)).a=e,(i=u.z+f-o.z-l+t(u._,o._))>0&&(F(U(u,e,r),e,i),l+=i,c+=i),f+=u.m,l+=o.m,h+=s.m,c+=a.m;u&&!I(a)&&(a.t=u,a.m+=f-c),o&&!B(s)&&(s.t=o,s.m+=l-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i},t.treemap=function(){var t=G,e=!1,n=1,r=1,i=[0],o=E,a=E,u=E,s=E,l=E;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(O),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=l(e)-n,c+=a(e)-n,f-=u(e)-n,h-=s(e)-n,f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=C(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:M(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:M(+t),c):a},c.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:M(+t),c):u},c.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:M(+t),c):s},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:M(+t),c):l},c},t.treemapBinary=function(t,e,n,r,i){var o,a,u=t.children,s=u.length,l=new Array(s+1);for(l[0]=a=o=0;o<s;++o)l[o+1]=a+=u[o].value;!function t(e,n,r,i,o,a,s){if(e>=n-1){var c=u[e];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=s)}for(var f=l[e],h=r/2+f,d=e+1,p=n-1;d<p;){var v=d+p>>>1;l[v]<h?d=v+1:p=v}h-l[d-1]<l[d]-h&&e+1<d&&--d;var b=l[d]-f,m=r-b;if(a-i>s-o){var g=(i*m+a*b)/r;t(e,d,b,i,o,g,s),t(d,n,m,g,o,a,s)}else{var y=(o*m+s*b)/r;t(e,d,b,i,o,a,y),t(d,n,m,i,y,a,s)}}(0,s,t.value,e,n,r,i)},t.treemapDice=V,t.treemapSlice=H,t.treemapSliceDice=function(t,e,n,r,i){(1&t.depth?H:V)(t,e,n,r,i)},t.treemapSquarify=G,t.treemapResquarify=W,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],18:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1],u=i>0?t[i-1]:2*o-a,s=i<e-1?t[i+2]:2*a-o;return n((r-i/e)*e,u,o,a,s)}}function i(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),o=t[(i+e-1)%e],a=t[i%e],u=t[(i+1)%e],s=t[(i+2)%e];return n((r-i/e)*e,o,a,u,s)}}function o(t){return function(){return t}}function a(t,e){return function(n){return t+n*e}}function u(t,e){var n=e-t;return n?a(t,n>180||n<-180?n-360*Math.round(n/360):n):o(isNaN(t)?e:t)}function s(t){return 1==(t=+t)?l:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):o(isNaN(e)?n:e)}}function l(t,e){var n=e-t;return n?a(t,n):o(isNaN(t)?e:t)}var c=function t(n){var r=s(n);function i(t,n){var i=r((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=r(t.g,n.g),a=r(t.b,n.b),u=l(t.opacity,n.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}return i.gamma=t,i}(1);function f(t){return function(n){var r,i,o=n.length,a=new Array(o),u=new Array(o),s=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,u[r]=i.g||0,s[r]=i.b||0;return a=t(a),u=t(u),s=t(s),i.opacity=1,function(t){return i.r=a(t),i.g=u(t),i.b=s(t),i+""}}}var h=f(r),d=f(i);function p(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=w(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function v(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}function b(t,e){return e-=t=+t,function(n){return t+e*n}}function m(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=w(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var g=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y=new RegExp(g.source,"g");function _(t,e){var n,r,i,o=g.lastIndex=y.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=g.exec(t))&&(r=y.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:b(n,r)})),o=y.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function w(t,n){var r,i=typeof n;return null==n||"boolean"===i?o(n):("number"===i?b:"string"===i?(r=e.color(n))?(n=r,c):_:n instanceof e.color?c:n instanceof Date?v:Array.isArray(n)?p:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?m:b)(t,n)}var x,k,C,E,M=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function A(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*M,skewX:Math.atan(s)*M,scaleX:a,scaleY:u}}function S(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:b(t,i)},{i:s-2,x:b(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:b(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,s),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:b(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,s),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:b(t,n)},{i:u-2,x:b(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var e,n=-1,r=s.length;++n<r;)u[(e=s[n]).i]=e.x(t);return u.join("")}}}var T=S(function(t){return"none"===t?P:(x||(x=document.createElement("DIV"),k=document.documentElement,C=document.defaultView),x.style.transform=t,t=C.getComputedStyle(k.appendChild(x),null).getPropertyValue("transform"),k.removeChild(x),A(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),O=S(function(t){return null==t?P:(E||(E=document.createElementNS("http://www.w3.org/2000/svg","g")),E.setAttribute("transform",t),(t=E.transform.baseVal.consolidate())?A((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):P)},", ",")",")"),V=Math.SQRT2,j=2,D=4,N=1e-12;function L(t){return((t=Math.exp(t))+1/t)/2}function z(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=l(n.s,r.s),a=l(n.l,r.l),u=l(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(t),n.opacity=u(t),n+""}}}var R=z(u),B=z(l);function I(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=l(n.c,r.c),a=l(n.l,r.l),u=l(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=a(t),n.opacity=u(t),n+""}}}var F=I(u),U=I(l);function q(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),a=l(n.s,i.s),u=l(n.l,i.l),s=l(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=u(Math.pow(t,r)),n.opacity=s(t),n+""}}return r=+r,i.gamma=n,i}(1)}var H=q(u),Y=q(l);t.interpolate=w,t.interpolateArray=p,t.interpolateBasis=r,t.interpolateBasisClosed=i,t.interpolateDate=v,t.interpolateDiscrete=function(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}},t.interpolateHue=function(t,e){var n=u(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},t.interpolateNumber=b,t.interpolateObject=m,t.interpolateRound=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},t.interpolateString=_,t.interpolateTransformCss=T,t.interpolateTransformSvg=O,t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],s=e[1],l=e[2],c=u-i,f=s-o,h=c*c+f*f;if(h<N)r=Math.log(l/a)/V,n=function(t){return[i+t*c,o+t*f,a*Math.exp(V*t*r)]};else{var d=Math.sqrt(h),p=(l*l-a*a+D*h)/(2*a*j*d),v=(l*l-a*a-D*h)/(2*l*j*d),b=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-b)/V,n=function(t){var e,n=t*r,u=L(b),s=a/(j*d)*(u*(e=V*n+b,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[i+s*c,o+s*f,a*u/L(V*n+b)]}}return n.duration=1e3*r,n},t.interpolateRgb=c,t.interpolateRgbBasis=h,t.interpolateRgbBasisClosed=d,t.interpolateHsl=R,t.interpolateHslLong=B,t.interpolateLab=function(t,n){var r=l((t=e.lab(t)).l,(n=e.lab(n)).l),i=l(t.a,n.a),o=l(t.b,n.b),a=l(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}},t.interpolateHcl=F,t.interpolateHclLong=U,t.interpolateCubehelix=H,t.interpolateCubehelixLong=Y,t.piecewise=function(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}},t.quantize=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)},{"d3-color":7}],19:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e=Math.PI,n=2*e,r=n-1e-6;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new i}i.prototype=o.prototype={constructor:i,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,r,i,o){t=+t,n=+n,r=+r,i=+i,o=+o;var a=this._x1,u=this._y1,s=r-t,l=i-n,c=a-t,f=u-n,h=c*c+f*f;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(h>1e-6)if(Math.abs(f*s-l*c)>1e-6&&o){var d=r-a,p=i-u,v=s*s+l*l,b=d*d+p*p,m=Math.sqrt(v),g=Math.sqrt(h),y=o*Math.tan((e-Math.acos((v+h-b)/(2*m*g)))/2),_=y/g,w=y/m;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(n+_*f)),this._+="A"+o+","+o+",0,0,"+ +(f*d>c*p)+","+(this._x1=t+w*s)+","+(this._y1=n+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,i,o,a,u,s){t=+t,i=+i;var l=(o=+o)*Math.cos(a),c=o*Math.sin(a),f=t+l,h=i+c,d=1^s,p=s?a-u:u-a;if(o<0)throw new Error("negative radius: "+o);null===this._x1?this._+="M"+f+","+h:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+f+","+h),o&&(p<0&&(p=p%n+n),p>r?this._+="A"+o+","+o+",0,1,"+d+","+(t-l)+","+(i-c)+"A"+o+","+o+",0,1,"+d+","+(this._x1=f)+","+(this._y1=h):p>1e-6&&(this._+="A"+o+","+o+",0,"+ +(p>=e)+","+d+","+(this._x1=t+o*Math.cos(u))+","+(this._y1=i+o*Math.sin(u))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},t.path=o,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],20:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e){return t[0]-e[0]||t[1]-e[1]}function n(t){for(var e,n,r,i=t.length,o=[0,1],a=2,u=2;u<i;++u){for(;a>1&&(e=t[o[a-2]],n=t[o[a-1]],r=t[u],(n[0]-e[0])*(r[1]-e[1])-(n[1]-e[1])*(r[0]-e[0])<=0);)--a;o[a++]=u}return o.slice(0,a)}t.polygonArea=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,u=t[i-1],s=0;++r<i;)e=u,u=t[r],s+=n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,a+=(e[1]+u[1])*n;return[o/(s*=3),a/s]},t.polygonHull=function(t){if((i=t.length)<3)return null;var r,i,o=new Array(i),a=new Array(i);for(r=0;r<i;++r)o[r]=[+t[r][0],+t[r][1],r];for(o.sort(e),r=0;r<i;++r)a[r]=[o[r][0],-o[r][1]];var u=n(o),s=n(a),l=s[0]===u[0],c=s[s.length-1]===u[u.length-1],f=[];for(r=u.length-1;r>=0;--r)f.push(t[o[u[r]][2]]);for(r=+l;r<s.length-c;++r)f.push(t[o[s[r]][2]]);return f},t.polygonContains=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],u=e[1],s=o[0],l=o[1],c=!1,f=0;f<i;++f)n=(o=t[f])[0],(r=o[1])>u!=l>u&&a<(s-n)*(u-r)/(l-r)+n&&(c=!c),s=n,l=r;return c},t.polygonLength=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],s=0;++r<i;)e=a,n=u,e-=a=(o=t[r])[0],n-=u=o[1],s+=Math.sqrt(e*e+n*n);return s},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],21:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,u,s,l,c,f,h,d=t._root,p={data:r},v=t._x0,b=t._y0,m=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(o=(v+m)/2))?v=o:m=o,(c=n>=(a=(b+g)/2))?b=a:g=a,i=d,!(d=d[f=c<<1|l]))return i[f]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(o=(v+m)/2))?v=o:m=o,(c=n>=(a=(b+g)/2))?b=a:g=a}while((f=c<<1|l)==(h=(s>=a)<<1|u>=o));return i[h]=d,i[f]=p,t}function n(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function r(t){return t[0]}function i(t){return t[1]}function o(t,e,n){var o=new a(null==e?r:e,null==n?i:n,NaN,NaN,NaN,NaN);return null==t?o:o.addAll(t)}function a(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function u(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var s=o.prototype=a.prototype;s.copy=function(){var t,e,n=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=u(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=u(e));return n},s.add=function(t){var n=+this._x.call(null,t),r=+this._y.call(null,t);return e(this.cover(n,r),n,r,t)},s.addAll=function(t){var n,r,i,o,a=t.length,u=new Array(a),s=new Array(a),l=1/0,c=1/0,f=-1/0,h=-1/0;for(r=0;r<a;++r)isNaN(i=+this._x.call(null,n=t[r]))||isNaN(o=+this._y.call(null,n))||(u[r]=i,s[r]=o,i<l&&(l=i),i>f&&(f=i),o<c&&(c=o),o>h&&(h=o));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),r=0;r<a;++r)e(this,u[r],s[r],t[r]);return this},s.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,u,s=i-n,l=this._root;n>t||t>=i||r>e||e>=o;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=l,l=a,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},s.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},s.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},s.find=function(t,e,r){var i,o,a,u,s,l,c,f=this._x0,h=this._y0,d=this._x1,p=this._y1,v=[],b=this._root;for(b&&v.push(new n(b,f,h,d,p)),null==r?r=1/0:(f=t-r,h=e-r,d=t+r,p=e+r,r*=r);l=v.pop();)if(!(!(b=l.node)||(o=l.x0)>d||(a=l.y0)>p||(u=l.x1)<f||(s=l.y1)<h))if(b.length){var m=(o+u)/2,g=(a+s)/2;v.push(new n(b[3],m,g,u,s),new n(b[2],o,g,m,s),new n(b[1],m,a,u,g),new n(b[0],o,a,m,g)),(c=(e>=g)<<1|t>=m)&&(l=v[v.length-1],v[v.length-1]=v[v.length-1-c],v[v.length-1-c]=l)}else{var y=t-+this._x.call(null,b.data),_=e-+this._y.call(null,b.data),w=y*y+_*_;if(w<r){var x=Math.sqrt(r=w);f=t-x,h=e-x,d=t+x,p=e+x,i=b.data}}return i},s.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,u,s,l,c,f,h,d=this._root,p=this._x0,v=this._y0,b=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(u=(p+b)/2))?p=u:b=u,(c=a>=(s=(v+m)/2))?v=s:m=s,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},s.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},s.root=function(){return this._root},s.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},s.visit=function(t){var e,r,i,o,a,u,s=[],l=this._root;for(l&&s.push(new n(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,o=e.y0,a=e.x1,u=e.y1)&&l.length){var c=(i+a)/2,f=(o+u)/2;(r=l[3])&&s.push(new n(r,c,f,a,u)),(r=l[2])&&s.push(new n(r,i,f,c,u)),(r=l[1])&&s.push(new n(r,c,o,a,f)),(r=l[0])&&s.push(new n(r,i,o,c,f))}return this},s.visitAfter=function(t){var e,r=[],i=[];for(this._root&&r.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var o=e.node;if(o.length){var a,u=e.x0,s=e.y0,l=e.x1,c=e.y1,f=(u+l)/2,h=(s+c)/2;(a=o[0])&&r.push(new n(a,u,s,f,h)),(a=o[1])&&r.push(new n(a,f,s,l,h)),(a=o[2])&&r.push(new n(a,u,h,f,c)),(a=o[3])&&r.push(new n(a,f,h,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},s.x=function(t){return arguments.length?(this._x=t,this):this._x},s.y=function(t){return arguments.length?(this._y=t,this):this._y},t.quadtree=o,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],22:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(){return Math.random()}var n=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(e),r=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(e),i=function t(e){function n(){var t=r.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(e),o=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(e),a=function t(e){function n(t){var n=o.source(e)(t);return function(){return n()/t}}return n.source=t,n}(e),u=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(e);t.randomUniform=n,t.randomNormal=r,t.randomLogNormal=i,t.randomBates=a,t.randomIrwinHall=o,t.randomExponential=u,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],23:[function(t,e,n){var r,i;r=this,i=function(t,e,n){"use strict";function r(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var i=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),a=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),u=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),s=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),l=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),c=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),f=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),h=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function d(t){return e.interpolateRgbBasis(t[t.length-1])}var p=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),v=d(p),b=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),m=d(b),g=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),y=d(g),_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),w=d(_),x=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),k=d(x),C=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),E=d(C),M=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),P=d(M),A=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),S=d(A),T=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),O=d(T),V=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),j=d(V),D=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),N=d(D),L=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),z=d(L),R=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),B=d(R),I=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),F=d(I),U=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),q=d(U),H=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),Y=d(H),K=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),G=d(K),W=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),X=d(W),$=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),Q=d($),Z=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),J=d(Z),tt=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),et=d(tt),nt=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),rt=d(nt),it=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),ot=d(it),at=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),ut=d(at),st=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),lt=d(st),ct=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),ft=d(ct),ht=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),dt=d(ht),pt=e.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),vt=e.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),bt=e.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),mt=n.cubehelix();var gt=n.rgb(),yt=Math.PI/3,_t=2*Math.PI/3;function wt(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var xt=wt(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),kt=wt(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ct=wt(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Et=wt(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));t.schemeCategory10=i,t.schemeAccent=o,t.schemeDark2=a,t.schemePaired=u,t.schemePastel1=s,t.schemePastel2=l,t.schemeSet1=c,t.schemeSet2=f,t.schemeSet3=h,t.interpolateBrBG=v,t.schemeBrBG=p,t.interpolatePRGn=m,t.schemePRGn=b,t.interpolatePiYG=y,t.schemePiYG=g,t.interpolatePuOr=w,t.schemePuOr=_,t.interpolateRdBu=k,t.schemeRdBu=x,t.interpolateRdGy=E,t.schemeRdGy=C,t.interpolateRdYlBu=P,t.schemeRdYlBu=M,t.interpolateRdYlGn=S,t.schemeRdYlGn=A,t.interpolateSpectral=O,t.schemeSpectral=T,t.interpolateBuGn=j,t.schemeBuGn=V,t.interpolateBuPu=N,t.schemeBuPu=D,t.interpolateGnBu=z,t.schemeGnBu=L,t.interpolateOrRd=B,t.schemeOrRd=R,t.interpolatePuBuGn=F,t.schemePuBuGn=I,t.interpolatePuBu=q,t.schemePuBu=U,t.interpolatePuRd=Y,t.schemePuRd=H,t.interpolateRdPu=G,t.schemeRdPu=K,t.interpolateYlGnBu=X,t.schemeYlGnBu=W,t.interpolateYlGn=Q,t.schemeYlGn=$,t.interpolateYlOrBr=J,t.schemeYlOrBr=Z,t.interpolateYlOrRd=et,t.schemeYlOrRd=tt,t.interpolateBlues=rt,t.schemeBlues=nt,t.interpolateGreens=ot,t.schemeGreens=it,t.interpolateGreys=ut,t.schemeGreys=at,t.interpolatePurples=lt,t.schemePurples=st,t.interpolateReds=ft,t.schemeReds=ct,t.interpolateOranges=dt,t.schemeOranges=ht,t.interpolateCubehelixDefault=pt,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return mt.h=360*t-100,mt.s=1.5-1.5*e,mt.l=.8-.9*e,mt+""},t.interpolateWarm=vt,t.interpolateCool=bt,t.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,gt.r=255*(e=Math.sin(t))*e,gt.g=255*(e=Math.sin(t+yt))*e,gt.b=255*(e=Math.sin(t+_t))*e,gt+""},t.interpolateViridis=xt,t.interpolateMagma=kt,t.interpolateInferno=Ct,t.interpolatePlasma=Et,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-interpolate"),t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-interpolate","d3-color"],i):i(r.d3=r.d3||{},r.d3,r.d3)},{"d3-color":7,"d3-interpolate":18}],24:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function i(t){var n=r(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}})(n)}function o(){}function a(t){return null==t?o:function(){return this.querySelector(t)}}function u(){return[]}function s(t){return null==t?u:function(){return this.querySelectorAll(t)}}function l(t){return function(){return this.matches(t)}}function c(t){return new Array(t.length)}function f(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}f.prototype={constructor:f,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var h="$";function d(t,e,n,r,i,o){for(var a,u=0,s=e.length,l=o.length;u<l;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new f(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function p(t,e,n,r,i,o,a){var u,s,l,c={},d=e.length,p=o.length,v=new Array(d);for(u=0;u<d;++u)(s=e[u])&&(v[u]=l=h+a.call(s,s.__data__,u,e),l in c?i[u]=s:c[l]=s);for(u=0;u<p;++u)(s=c[l=h+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],c[l]=null):n[u]=new f(t,o[u]);for(u=0;u<d;++u)(s=e[u])&&c[v[u]]===s&&(i[u]=s)}function v(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function b(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function m(t,e){return t.style.getPropertyValue(e)||b(t).getComputedStyle(t,null).getPropertyValue(e)}function g(t){return t.trim().split(/^|\s+/)}function y(t){return t.classList||new _(t)}function _(t){this._node=t,this._names=g(t.getAttribute("class")||"")}function w(t,e){for(var n=y(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function x(t,e){for(var n=y(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function k(){this.textContent=""}function C(){this.innerHTML=""}function E(){this.nextSibling&&this.parentNode.appendChild(this)}function M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function P(){return null}function A(){var t=this.parentNode;t&&t.removeChild(this)}function S(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function T(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}_.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var O={};(t.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(O={mouseenter:"mouseover",mouseleave:"mouseout"}));function V(t,e,n){return t=j(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function j(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function D(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function N(t,e,n){var r=O.hasOwnProperty(t.type)?V:j;return function(i,o,a){var u,s=this.__on,l=r(e,o,a);if(s)for(var c=0,f=s.length;c<f;++c)if((u=s[c]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),void(u.value=e);this.addEventListener(t.type,l,n),u={type:t.type,name:t.name,value:e,listener:l,capture:n},s?s.push(u):this.__on=[u]}}function L(t,e,n){var r=b(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var z=[null];function R(t,e){this._groups=t,this._parents=e}function B(){return new R([[document.documentElement]],z)}function I(t){return"string"==typeof t?new R([[document.querySelector(t)]],[document.documentElement]):new R([[t]],z)}R.prototype=B.prototype={constructor:R,select:function(t){"function"!=typeof t&&(t=a(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u,s=e[i],l=s.length,c=r[i]=new Array(l),f=0;f<l;++f)(o=s[f])&&(u=t.call(o,o.__data__,f,s))&&("__data__"in o&&(u.__data__=o.__data__),c[f]=u);return new R(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=s(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],l=u.length,c=0;c<l;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new R(r,i)},filter:function(t){"function"!=typeof t&&(t=l(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new R(r,this._parents)},data:function(t,e){if(!t)return b=new Array(this.size()),c=-1,this.each(function(t){b[++c]=t}),b;var n,r=e?p:d,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,u=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],h=o[c],v=h.length,b=t.call(f,f&&f.__data__,c,i),m=b.length,g=s[c]=new Array(m),y=u[c]=new Array(m);r(f,h,g,y,l[c]=new Array(v),b,e);for(var _,w,x=0,k=0;x<m;++x)if(_=g[x]){for(x>=k&&(k=x+1);!(w=y[k])&&++k<m;);_._next=w||null}}return(u=new R(u,i))._enter=s,u._exit=l,u},enter:function(){return new R(this._enter||this._groups.map(c),this._parents)},exit:function(){return new R(this._exit||this._groups.map(c),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,l=e[u],c=n[u],f=l.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=l[d]||c[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new R(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=v);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,l=i[o]=new Array(s),c=0;c<s;++c)(a=u[c])&&(l[c]=a);l.sort(e)}return new R(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):m(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=g(t+"");if(arguments.length<2){for(var r=y(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?w:x)(this,t)}}:e?function(t){return function(){w(this,t)}}:function(t){return function(){x(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?k:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?C:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(E)},lower:function(){return this.each(M)},append:function(t){var e="function"==typeof t?t:i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:i(t),r=null==e?P:"function"==typeof e?e:a(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(A)},clone:function(t){return this.select(t?T:S)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?N:D,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,l=0,c=u.length;l<c;++l)for(r=0,s=u[l];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return L(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return L(this,t,e)}})(t,e))}};var F=0;function U(){return new q}function q(){this._="@"+(++F).toString(36)}function H(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function Y(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}q.prototype=U.prototype={constructor:q,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},t.create=function(t){return I(i(t).call(document.documentElement))},t.creator=i,t.local=U,t.matcher=l,t.mouse=function(t){var e=H();return e.changedTouches&&(e=e.changedTouches[0]),Y(t,e)},t.namespace=r,t.namespaces=n,t.clientPoint=Y,t.select=I,t.selectAll=function(t){return"string"==typeof t?new R([document.querySelectorAll(t)],[document.documentElement]):new R([null==t?[]:t],z)},t.selection=B,t.selector=a,t.selectorAll=s,t.style=m,t.touch=function(t,e,n){arguments.length<3&&(n=e,e=H().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Y(t,r);return null},t.touches=function(t,e){null==e&&(e=H().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Y(t,e[n]);return i},t.window=b,t.customEvent=function(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],25:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t){return function(){return t}}var r=Math.abs,i=Math.atan2,o=Math.cos,a=Math.max,u=Math.min,s=Math.sin,l=Math.sqrt,c=1e-12,f=Math.PI,h=f/2,d=2*f;function p(t){return t>=1?h:t<=-1?-h:Math.asin(t)}function v(t){return t.innerRadius}function b(t){return t.outerRadius}function m(t){return t.startAngle}function g(t){return t.endAngle}function y(t){return t&&t.padAngle}function _(t,e,n,r,i,o,u){var s=t-n,c=e-r,f=(u?o:-o)/l(s*s+c*c),h=f*c,d=-f*s,p=t+h,v=e+d,b=n+h,m=r+d,g=(p+b)/2,y=(v+m)/2,_=b-p,w=m-v,x=_*_+w*w,k=i-o,C=p*m-b*v,E=(w<0?-1:1)*l(a(0,k*k*x-C*C)),M=(C*w-_*E)/x,P=(-C*_-w*E)/x,A=(C*w+_*E)/x,S=(-C*_+w*E)/x,T=M-g,O=P-y,V=A-g,j=S-y;return T*T+O*O>V*V+j*j&&(M=A,P=S),{cx:M,cy:P,x01:-h,y01:-d,x11:M*(i/k-1),y11:P*(i/k-1)}}function w(t){this._context=t}function x(t){return new w(t)}function k(t){return t[0]}function C(t){return t[1]}function E(){var t=k,r=C,i=n(!0),o=null,a=x,u=null;function s(n){var s,l,c,f=n.length,h=!1;for(null==o&&(u=a(c=e.path())),s=0;s<=f;++s)!(s<f&&i(l=n[s],s,n))===h&&((h=!h)?u.lineStart():u.lineEnd()),h&&u.point(+t(l,s,n),+r(l,s,n));if(c)return u=null,c+""||null}return s.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),s):t},s.y=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),s):r},s.defined=function(t){return arguments.length?(i="function"==typeof t?t:n(!!t),s):i},s.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),s):a},s.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),s):o},s}function M(){var t=k,r=null,i=n(0),o=C,a=n(!0),u=null,s=x,l=null;function c(n){var c,f,h,d,p,v=n.length,b=!1,m=new Array(v),g=new Array(v);for(null==u&&(l=s(p=e.path())),c=0;c<=v;++c){if(!(c<v&&a(d=n[c],c,n))===b)if(b=!b)f=c,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=c-1;h>=f;--h)l.point(m[h],g[h]);l.lineEnd(),l.areaEnd()}b&&(m[c]=+t(d,c,n),g[c]=+i(d,c,n),l.point(r?+r(d,c,n):m[c],o?+o(d,c,n):g[c]))}if(p)return l=null,p+""||null}function f(){return E().defined(a).curve(s).context(u)}return c.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:n(+t),c):r},c.y=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),o=null,c):i},c.y0=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),c):i},c.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:n(+t),c):o},c.lineX0=c.lineY0=function(){return f().x(t).y(i)},c.lineY1=function(){return f().x(t).y(o)},c.lineX1=function(){return f().x(r).y(i)},c.defined=function(t){return arguments.length?(a="function"==typeof t?t:n(!!t),c):a},c.curve=function(t){return arguments.length?(s=t,null!=u&&(l=s(u)),c):s},c.context=function(t){return arguments.length?(null==t?u=l=null:l=s(u=t),c):u},c}function P(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function A(t){return t}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var S=O(x);function T(t){this._curve=t}function O(t){function e(e){return new T(t(e))}return e._curve=t,e}function V(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(O(t)):e()._curve},t}function j(){return V(E().curve(S))}function D(){var t=M().curve(S),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return V(n())},delete t.lineX0,t.lineEndAngle=function(){return V(r())},delete t.lineX1,t.lineInnerRadius=function(){return V(i())},delete t.lineY0,t.lineOuterRadius=function(){return V(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(O(t)):e()._curve},t}function N(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}T.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var L=Array.prototype.slice;function z(t){return t.source}function R(t){return t.target}function B(t){var r=z,i=R,o=k,a=C,u=null;function s(){var n,s=L.call(arguments),l=r.apply(this,s),c=i.apply(this,s);if(u||(u=n=e.path()),t(u,+o.apply(this,(s[0]=l,s)),+a.apply(this,s),+o.apply(this,(s[0]=c,s)),+a.apply(this,s)),n)return u=null,n+""||null}return s.source=function(t){return arguments.length?(r=t,s):r},s.target=function(t){return arguments.length?(i=t,s):i},s.x=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),s):o},s.y=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),s):a},s.context=function(t){return arguments.length?(u=null==t?null:t,s):u},s}function I(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function F(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+i)/2,r,n,r,i)}function U(t,e,n,r,i){var o=N(e,n),a=N(e,n=(n+i)/2),u=N(r,n),s=N(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],s[0],s[1])}var q={draw:function(t,e){var n=Math.sqrt(e/f);t.moveTo(n,0),t.arc(0,0,n,0,d)}},H={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Y=Math.sqrt(1/3),K=2*Y,G={draw:function(t,e){var n=Math.sqrt(e/K),r=n*Y;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},W=Math.sin(f/10)/Math.sin(7*f/10),X=Math.sin(d/10)*W,$=-Math.cos(d/10)*W,Q={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=X*n,i=$*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=d*o/5,u=Math.cos(a),s=Math.sin(a);t.lineTo(s*n,-u*n),t.lineTo(u*r-s*i,s*r+u*i)}t.closePath()}},Z={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},J=Math.sqrt(3),tt={draw:function(t,e){var n=-Math.sqrt(e/(3*J));t.moveTo(0,2*n),t.lineTo(-J*n,-n),t.lineTo(J*n,-n),t.closePath()}},et=-.5,nt=Math.sqrt(3)/2,rt=1/Math.sqrt(12),it=3*(rt/2+1),ot={draw:function(t,e){var n=Math.sqrt(e/it),r=n/2,i=n*rt,o=r,a=n*rt+n,u=-o,s=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,s),t.lineTo(et*r-nt*i,nt*r+et*i),t.lineTo(et*o-nt*a,nt*o+et*a),t.lineTo(et*u-nt*s,nt*u+et*s),t.lineTo(et*r+nt*i,et*i-nt*r),t.lineTo(et*o+nt*a,et*a-nt*o),t.lineTo(et*u+nt*s,et*s-nt*u),t.closePath()}},at=[q,H,G,Z,Q,tt,ot];function ut(){}function st(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function lt(t){this._context=t}function ct(t){this._context=t}function ft(t){this._context=t}function ht(t,e){this._basis=new lt(t),this._beta=e}lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:st(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:st(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ct.prototype={areaStart:ut,areaEnd:ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:st(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:st(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ht.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*a),this._beta*e[s]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var dt=function t(e){function n(t){return 1===e?new lt(t):new ht(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function pt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function vt(t,e){this._context=t,this._k=(1-e)/6}vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:pt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var bt=function t(e){function n(t){return new vt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function mt(t,e){this._context=t,this._k=(1-e)/6}mt.prototype={areaStart:ut,areaEnd:ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gt=function t(e){function n(t){return new mt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function yt(t,e){this._context=t,this._k=(1-e)/6}yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var _t=function t(e){function n(t){return new yt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function wt(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>c){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>c){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/f,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function xt(t,e){this._context=t,this._alpha=e}xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:wt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kt=function t(e){function n(t){return e?new xt(t,e):new vt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ct(t,e){this._context=t,this._alpha=e}Ct.prototype={areaStart:ut,areaEnd:ut,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Et=function t(e){function n(t){return e?new Ct(t,e):new mt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Mt(t,e){this._context=t,this._alpha=e}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pt=function t(e){function n(t){return e?new Mt(t,e):new yt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function At(t){this._context=t}function St(t){return t<0?-1:1}function Tt(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(St(o)+St(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function Ot(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Vt(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function jt(t){this._context=t}function Dt(t){this._context=new Nt(t)}function Nt(t){this._context=t}function Lt(t){this._context=t}function zt(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Rt(t,e){this._context=t,this._t=e}function Bt(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],u=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function It(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ft(t,e){return t[e]}function Ut(t){var e=t.map(qt);return It(t).sort(function(t,n){return e[t]-e[n]})}function qt(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function Ht(t){var e=t.map(Yt);return It(t).sort(function(t,n){return e[t]-e[n]})}function Yt(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}At.prototype={areaStart:ut,areaEnd:ut,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vt(this,this._t0,Ot(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Vt(this,Ot(this,n=Tt(this,t,e)),n);break;default:Vt(this,this._t0,n=Tt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Dt.prototype=Object.create(jt.prototype)).point=function(t,e){jt.prototype.point.call(this,e,t)},Nt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=zt(t),i=zt(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Rt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},t.arc=function(){var t=v,a=b,w=n(0),x=null,k=m,C=g,E=y,M=null;function P(){var n,v,b,m=+t.apply(this,arguments),g=+a.apply(this,arguments),y=k.apply(this,arguments)-h,P=C.apply(this,arguments)-h,A=r(P-y),S=P>y;if(M||(M=n=e.path()),g<m&&(v=g,g=m,m=v),g>c)if(A>d-c)M.moveTo(g*o(y),g*s(y)),M.arc(0,0,g,y,P,!S),m>c&&(M.moveTo(m*o(P),m*s(P)),M.arc(0,0,m,P,y,S));else{var T,O,V=y,j=P,D=y,N=P,L=A,z=A,R=E.apply(this,arguments)/2,B=R>c&&(x?+x.apply(this,arguments):l(m*m+g*g)),I=u(r(g-m)/2,+w.apply(this,arguments)),F=I,U=I;if(B>c){var q=p(B/m*s(R)),H=p(B/g*s(R));(L-=2*q)>c?(D+=q*=S?1:-1,N-=q):(L=0,D=N=(y+P)/2),(z-=2*H)>c?(V+=H*=S?1:-1,j-=H):(z=0,V=j=(y+P)/2)}var Y=g*o(V),K=g*s(V),G=m*o(N),W=m*s(N);if(I>c){var X,$=g*o(j),Q=g*s(j),Z=m*o(D),J=m*s(D);if(A<f&&(X=function(t,e,n,r,i,o,a,u){var s=n-t,l=r-e,f=a-i,h=u-o,d=h*s-f*l;if(!(d*d<c))return[t+(d=(f*(e-o)-h*(t-i))/d)*s,e+d*l]}(Y,K,Z,J,$,Q,G,W))){var tt=Y-X[0],et=K-X[1],nt=$-X[0],rt=Q-X[1],it=1/s(((b=(tt*nt+et*rt)/(l(tt*tt+et*et)*l(nt*nt+rt*rt)))>1?0:b<-1?f:Math.acos(b))/2),ot=l(X[0]*X[0]+X[1]*X[1]);F=u(I,(m-ot)/(it-1)),U=u(I,(g-ot)/(it+1))}}z>c?U>c?(T=_(Z,J,Y,K,g,U,S),O=_($,Q,G,W,g,U,S),M.moveTo(T.cx+T.x01,T.cy+T.y01),U<I?M.arc(T.cx,T.cy,U,i(T.y01,T.x01),i(O.y01,O.x01),!S):(M.arc(T.cx,T.cy,U,i(T.y01,T.x01),i(T.y11,T.x11),!S),M.arc(0,0,g,i(T.cy+T.y11,T.cx+T.x11),i(O.cy+O.y11,O.cx+O.x11),!S),M.arc(O.cx,O.cy,U,i(O.y11,O.x11),i(O.y01,O.x01),!S))):(M.moveTo(Y,K),M.arc(0,0,g,V,j,!S)):M.moveTo(Y,K),m>c&&L>c?F>c?(T=_(G,W,$,Q,m,-F,S),O=_(Y,K,Z,J,m,-F,S),M.lineTo(T.cx+T.x01,T.cy+T.y01),F<I?M.arc(T.cx,T.cy,F,i(T.y01,T.x01),i(O.y01,O.x01),!S):(M.arc(T.cx,T.cy,F,i(T.y01,T.x01),i(T.y11,T.x11),!S),M.arc(0,0,m,i(T.cy+T.y11,T.cx+T.x11),i(O.cy+O.y11,O.cx+O.x11),S),M.arc(O.cx,O.cy,F,i(O.y11,O.x11),i(O.y01,O.x01),!S))):M.arc(0,0,m,N,D,S):M.lineTo(G,W)}else M.moveTo(0,0);if(M.closePath(),n)return M=null,n+""||null}return P.centroid=function(){var e=(+t.apply(this,arguments)+ +a.apply(this,arguments))/2,n=(+k.apply(this,arguments)+ +C.apply(this,arguments))/2-f/2;return[o(n)*e,s(n)*e]},P.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),P):t},P.outerRadius=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),P):a},P.cornerRadius=function(t){return arguments.length?(w="function"==typeof t?t:n(+t),P):w},P.padRadius=function(t){return arguments.length?(x=null==t?null:"function"==typeof t?t:n(+t),P):x},P.startAngle=function(t){return arguments.length?(k="function"==typeof t?t:n(+t),P):k},P.endAngle=function(t){return arguments.length?(C="function"==typeof t?t:n(+t),P):C},P.padAngle=function(t){return arguments.length?(E="function"==typeof t?t:n(+t),P):E},P.context=function(t){return arguments.length?(M=null==t?null:t,P):M},P},t.area=M,t.line=E,t.pie=function(){var t=A,e=P,r=null,i=n(0),o=n(d),a=n(0);function u(n){var u,s,l,c,f,h=n.length,p=0,v=new Array(h),b=new Array(h),m=+i.apply(this,arguments),g=Math.min(d,Math.max(-d,o.apply(this,arguments)-m)),y=Math.min(Math.abs(g)/h,a.apply(this,arguments)),_=y*(g<0?-1:1);for(u=0;u<h;++u)(f=b[v[u]=u]=+t(n[u],u,n))>0&&(p+=f);for(null!=e?v.sort(function(t,n){return e(b[t],b[n])}):null!=r&&v.sort(function(t,e){return r(n[t],n[e])}),u=0,l=p?(g-h*_)/p:0;u<h;++u,m=c)s=v[u],c=m+((f=b[s])>0?f*l:0)+_,b[s]={data:n[s],index:u,value:f,startAngle:m,endAngle:c,padAngle:y};return b}return u.value=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),u):t},u.sortValues=function(t){return arguments.length?(e=t,r=null,u):e},u.sort=function(t){return arguments.length?(r=t,e=null,u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),u):i},u.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:n(+t),u):o},u.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:n(+t),u):a},u},t.areaRadial=D,t.radialArea=D,t.lineRadial=j,t.radialLine=j,t.pointRadial=N,t.linkHorizontal=function(){return B(I)},t.linkVertical=function(){return B(F)},t.linkRadial=function(){var t=B(U);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=n(q),r=n(64),i=null;function o(){var n;if(i||(i=n=e.path()),t.apply(this,arguments).draw(i,+r.apply(this,arguments)),n)return i=null,n+""||null}return o.type=function(e){return arguments.length?(t="function"==typeof e?e:n(e),o):t},o.size=function(t){return arguments.length?(r="function"==typeof t?t:n(+t),o):r},o.context=function(t){return arguments.length?(i=null==t?null:t,o):i},o},t.symbols=at,t.symbolCircle=q,t.symbolCross=H,t.symbolDiamond=G,t.symbolSquare=Z,t.symbolStar=Q,t.symbolTriangle=tt,t.symbolWye=ot,t.curveBasisClosed=function(t){return new ct(t)},t.curveBasisOpen=function(t){return new ft(t)},t.curveBasis=function(t){return new lt(t)},t.curveBundle=dt,t.curveCardinalClosed=gt,t.curveCardinalOpen=_t,t.curveCardinal=bt,t.curveCatmullRomClosed=Et,t.curveCatmullRomOpen=Pt,t.curveCatmullRom=kt,t.curveLinearClosed=function(t){return new At(t)},t.curveLinear=x,t.curveMonotoneX=function(t){return new jt(t)},t.curveMonotoneY=function(t){return new Dt(t)},t.curveNatural=function(t){return new Lt(t)},t.curveStep=function(t){return new Rt(t,.5)},t.curveStepAfter=function(t){return new Rt(t,1)},t.curveStepBefore=function(t){return new Rt(t,0)},t.stack=function(){var t=n([]),e=It,r=Bt,i=Ft;function o(n){var o,a,u=t.apply(this,arguments),s=n.length,l=u.length,c=new Array(l);for(o=0;o<l;++o){for(var f,h=u[o],d=c[o]=new Array(s),p=0;p<s;++p)d[p]=f=[0,+i(n[p],h,p,n)],f.data=n[p];d.key=h}for(o=0,a=e(c);o<l;++o)c[a[o]].index=o;return r(c,a),c}return o.keys=function(e){return arguments.length?(t="function"==typeof e?e:n(L.call(e)),o):t},o.value=function(t){return arguments.length?(i="function"==typeof t?t:n(+t),o):i},o.order=function(t){return arguments.length?(e=null==t?It:"function"==typeof t?t:n(L.call(t)),o):e},o.offset=function(t){return arguments.length?(r=null==t?Bt:t,o):r},o},t.stackOffsetExpand=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Bt(t,e)}},t.stackOffsetDiverging=function(t,e){if((u=t.length)>1)for(var n,r,i,o,a,u,s=0,l=t[e[0]].length;s<l;++s)for(o=a=0,n=0;n<u;++n)(i=(r=t[e[n]][s])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=Bt,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<n;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}Bt(t,e)}},t.stackOffsetWiggle=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var u=0,s=0,l=0;u<i;++u){for(var c=t[e[u]],f=c[a][1]||0,h=(f-(c[a-1][1]||0))/2,d=0;d<u;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}s+=f,l+=h*f}n[a-1][1]+=n[a-1][0]=o,s&&(o-=l/s)}n[a-1][1]+=n[a-1][0]=o,Bt(t,e)}},t.stackOrderAppearance=Ut,t.stackOrderAscending=Ht,t.stackOrderDescending=function(t){return Ht(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,r=t.length,i=t.map(Yt),o=Ut(t),a=0,u=0,s=[],l=[];for(e=0;e<r;++e)n=o[e],a<u?(a+=i[n],s.push(n)):(u+=i[n],l.push(n));return l.reverse().concat(s)},t.stackOrderNone=It,t.stackOrderReverse=function(t){return It(t).reverse()},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i(r.d3=r.d3||{},r.d3)},{"d3-path":19}],26:[function(t,e,n){var r,i;r=this,i=function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){var o=t.dateTime,a=t.date,s=t.time,l=t.periods,c=t.days,f=t.shortDays,h=t.months,mt=t.shortMonths,gt=d(l),yt=p(l),_t=d(c),wt=p(c),xt=d(f),kt=p(f),Ct=d(h),Et=p(h),Mt=d(mt),Pt=p(mt),At={a:function(t){return f[t.getDay()]},A:function(t){return c[t.getDay()]},b:function(t){return mt[t.getMonth()]},B:function(t){return h[t.getMonth()]},c:null,d:D,e:D,f:B,H:N,I:L,j:z,L:R,m:I,M:F,p:function(t){return l[+(t.getHours()>=12)]},Q:vt,s:bt,S:U,u:q,U:H,V:Y,w:K,W:G,x:null,X:null,y:W,Y:X,Z:$,"%":pt},St={a:function(t){return f[t.getUTCDay()]},A:function(t){return c[t.getUTCDay()]},b:function(t){return mt[t.getUTCMonth()]},B:function(t){return h[t.getUTCMonth()]},c:null,d:Q,e:Q,f:nt,H:Z,I:J,j:tt,L:et,m:rt,M:it,p:function(t){return l[+(t.getUTCHours()>=12)]},Q:vt,s:bt,S:ot,u:at,U:ut,V:st,w:lt,W:ct,x:null,X:null,y:ft,Y:ht,Z:dt,"%":pt},Tt={a:function(t,e,n){var r=xt.exec(e.slice(n));return r?(t.w=kt[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=_t.exec(e.slice(n));return r?(t.w=wt[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=Mt.exec(e.slice(n));return r?(t.m=Pt[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=Ct.exec(e.slice(n));return r?(t.m=Et[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return jt(t,o,e,n)},d:C,e:C,f:T,H:M,I:M,j:E,L:S,m:k,M:P,p:function(t,e,n){var r=gt.exec(e.slice(n));return r?(t.p=yt[r[0].toLowerCase()],n+r[0].length):-1},Q:V,s:j,S:A,u:b,U:m,V:g,w:v,W:y,x:function(t,e,n){return jt(t,a,e,n)},X:function(t,e,n){return jt(t,s,e,n)},y:w,Y:_,Z:x,"%":O};function Ot(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=u[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function Vt(t,n){return function(o){var a,u,s=i(1900);if(jt(s,t,o+="",0)!=o.length)return null;if("Q"in s)return new Date(s.Q);if("p"in s&&(s.H=s.H%12+12*s.p),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(a=(u=(a=r(i(s.y))).getUTCDay())>4||0===u?e.utcMonday.ceil(a):e.utcMonday(a),a=e.utcDay.offset(a,7*(s.V-1)),s.y=a.getUTCFullYear(),s.m=a.getUTCMonth(),s.d=a.getUTCDate()+(s.w+6)%7):(a=(u=(a=n(i(s.y))).getDay())>4||0===u?e.timeMonday.ceil(a):e.timeMonday(a),a=e.timeDay.offset(a,7*(s.V-1)),s.y=a.getFullYear(),s.m=a.getMonth(),s.d=a.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),u="Z"in s?r(i(s.y)).getUTCDay():n(i(s.y)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(u+5)%7:s.w+7*s.U-(u+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,r(s)):n(s)}}function jt(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=Tt[i in u?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return At.x=Ot(a,At),At.X=Ot(s,At),At.c=Ot(o,At),St.x=Ot(a,St),St.X=Ot(s,St),St.c=Ot(o,St),{format:function(t){var e=Ot(t+="",At);return e.toString=function(){return t},e},parse:function(t){var e=Vt(t+="",n);return e.toString=function(){return t},e},utcFormat:function(t){var e=Ot(t+="",St);return e.toString=function(){return t},e},utcParse:function(t){var e=Vt(t,r);return e.toString=function(){return t},e}}}var a,u={"-":"",_:" ",0:"0"},s=/^\s*\d+/,l=/^%/,c=/[\\^$*+?|[\]().{}]/g;function f(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function h(t){return t.replace(c,"\\$&")}function d(t){return new RegExp("^(?:"+t.map(h).join("|")+")","i")}function p(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function v(t,e,n){var r=s.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function b(t,e,n){var r=s.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function m(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function g(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function y(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function _(t,e,n){var r=s.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function w(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function x(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function k(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function C(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function E(t,e,n){var r=s.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function M(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function P(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function A(t,e,n){var r=s.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function S(t,e,n){var r=s.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function T(t,e,n){var r=s.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O(t,e,n){var r=l.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function V(t,e,n){var r=s.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function j(t,e,n){var r=s.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function D(t,e){return f(t.getDate(),e,2)}function N(t,e){return f(t.getHours(),e,2)}function L(t,e){return f(t.getHours()%12||12,e,2)}function z(t,n){return f(1+e.timeDay.count(e.timeYear(t),t),n,3)}function R(t,e){return f(t.getMilliseconds(),e,3)}function B(t,e){return R(t,e)+"000"}function I(t,e){return f(t.getMonth()+1,e,2)}function F(t,e){return f(t.getMinutes(),e,2)}function U(t,e){return f(t.getSeconds(),e,2)}function q(t){var e=t.getDay();return 0===e?7:e}function H(t,n){return f(e.timeSunday.count(e.timeYear(t),t),n,2)}function Y(t,n){var r=t.getDay();return t=r>=4||0===r?e.timeThursday(t):e.timeThursday.ceil(t),f(e.timeThursday.count(e.timeYear(t),t)+(4===e.timeYear(t).getDay()),n,2)}function K(t){return t.getDay()}function G(t,n){return f(e.timeMonday.count(e.timeYear(t),t),n,2)}function W(t,e){return f(t.getFullYear()%100,e,2)}function X(t,e){return f(t.getFullYear()%1e4,e,4)}function $(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+f(e/60|0,"0",2)+f(e%60,"0",2)}function Q(t,e){return f(t.getUTCDate(),e,2)}function Z(t,e){return f(t.getUTCHours(),e,2)}function J(t,e){return f(t.getUTCHours()%12||12,e,2)}function tt(t,n){return f(1+e.utcDay.count(e.utcYear(t),t),n,3)}function et(t,e){return f(t.getUTCMilliseconds(),e,3)}function nt(t,e){return et(t,e)+"000"}function rt(t,e){return f(t.getUTCMonth()+1,e,2)}function it(t,e){return f(t.getUTCMinutes(),e,2)}function ot(t,e){return f(t.getUTCSeconds(),e,2)}function at(t){var e=t.getUTCDay();return 0===e?7:e}function ut(t,n){return f(e.utcSunday.count(e.utcYear(t),t),n,2)}function st(t,n){var r=t.getUTCDay();return t=r>=4||0===r?e.utcThursday(t):e.utcThursday.ceil(t),f(e.utcThursday.count(e.utcYear(t),t)+(4===e.utcYear(t).getUTCDay()),n,2)}function lt(t){return t.getUTCDay()}function ct(t,n){return f(e.utcMonday.count(e.utcYear(t),t),n,2)}function ft(t,e){return f(t.getUTCFullYear()%100,e,2)}function ht(t,e){return f(t.getUTCFullYear()%1e4,e,4)}function dt(){return"+0000"}function pt(){return"%"}function vt(t){return+t}function bt(t){return Math.floor(+t/1e3)}function mt(e){return a=o(e),t.timeFormat=a.format,t.timeParse=a.parse,t.utcFormat=a.utcFormat,t.utcParse=a.utcParse,a}mt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var gt=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");var yt=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");t.timeFormatDefaultLocale=mt,t.timeFormatLocale=o,t.isoFormat=gt,t.isoParse=yt,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i(r.d3=r.d3||{},r.d3)},{"d3-time":27}],27:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e=new Date,n=new Date;function r(t,i,o,a){function u(e){return t(e=new Date(+e)),e}return u.floor=u,u.ceil=function(e){return t(e=new Date(e-1)),i(e,1),t(e),e},u.round=function(t){var e=u(t),n=u.ceil(t);return t-e<n-t?e:n},u.offset=function(t,e){return i(t=new Date(+t),null==e?1:Math.floor(e)),t},u.range=function(e,n,r){var o,a=[];if(e=u.ceil(e),r=null==r?1:Math.floor(r),!(e<n&&r>0))return a;do{a.push(o=new Date(+e)),i(e,r),t(e)}while(o<e&&e<n);return a},u.filter=function(e){return r(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;i(t,-1),!e(t););else for(;--n>=0;)for(;i(t,1),!e(t););})},o&&(u.count=function(r,i){return e.setTime(+r),n.setTime(+i),t(e),t(n),Math.floor(o(e,n))},u.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?u.filter(a?function(e){return a(e)%t==0}:function(e){return u.count(0,e)%t==0}):u:null}),u}var i=r(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):i:null};var o=i.range,a=6e4,u=6048e5,s=r(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),l=s.range,c=r(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*a)},function(t,e){return(e-t)/a},function(t){return t.getMinutes()}),f=c.range,h=r(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*a)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),d=h.range,p=r(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*a)/864e5},function(t){return t.getDate()-1}),v=p.range;function b(t){return r(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*a)/u})}var m=b(0),g=b(1),y=b(2),_=b(3),w=b(4),x=b(5),k=b(6),C=m.range,E=g.range,M=y.range,P=_.range,A=w.range,S=x.range,T=k.range,O=r(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),V=O.range,j=r(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});j.every=function(t){return isFinite(t=Math.floor(t))&&t>0?r(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var D=j.range,N=r(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*a)},function(t,e){return(e-t)/a},function(t){return t.getUTCMinutes()}),L=N.range,z=r(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),R=z.range,B=r(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),I=B.range;function F(t){return r(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/u})}var U=F(0),q=F(1),H=F(2),Y=F(3),K=F(4),G=F(5),W=F(6),X=U.range,$=q.range,Q=H.range,Z=Y.range,J=K.range,tt=G.range,et=W.range,nt=r(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),rt=nt.range,it=r(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});it.every=function(t){return isFinite(t=Math.floor(t))&&t>0?r(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var ot=it.range;t.timeInterval=r,t.timeMillisecond=i,t.timeMilliseconds=o,t.utcMillisecond=i,t.utcMilliseconds=o,t.timeSecond=s,t.timeSeconds=l,t.utcSecond=s,t.utcSeconds=l,t.timeMinute=c,t.timeMinutes=f,t.timeHour=h,t.timeHours=d,t.timeDay=p,t.timeDays=v,t.timeWeek=m,t.timeWeeks=C,t.timeSunday=m,t.timeSundays=C,t.timeMonday=g,t.timeMondays=E,t.timeTuesday=y,t.timeTuesdays=M,t.timeWednesday=_,t.timeWednesdays=P,t.timeThursday=w,t.timeThursdays=A,t.timeFriday=x,t.timeFridays=S,t.timeSaturday=k,t.timeSaturdays=T,t.timeMonth=O,t.timeMonths=V,t.timeYear=j,t.timeYears=D,t.utcMinute=N,t.utcMinutes=L,t.utcHour=z,t.utcHours=R,t.utcDay=B,t.utcDays=I,t.utcWeek=U,t.utcWeeks=X,t.utcSunday=U,t.utcSundays=X,t.utcMonday=q,t.utcMondays=$,t.utcTuesday=H,t.utcTuesdays=Q,t.utcWednesday=Y,t.utcWednesdays=Z,t.utcThursday=K,t.utcThursdays=J,t.utcFriday=G,t.utcFridays=tt,t.utcSaturday=W,t.utcSaturdays=et,t.utcMonth=nt,t.utcMonths=rt,t.utcYear=it,t.utcYears=ot,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],28:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";var e,n,r=0,i=0,o=0,a=1e3,u=0,s=0,l=0,c="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function h(){return s||(f(d),s=c.now()+l)}function d(){s=0}function p(){this._call=this._time=this._next=null}function v(t,e,n){var r=new p;return r.restart(t,e,n),r}function b(){h(),++r;for(var t,n=e;n;)(t=s-n._time)>=0&&n._call.call(null,t),n=n._next;--r}function m(){s=(u=c.now())+l,r=i=0;try{b()}finally{r=0,function(){var t,r,i=e,o=1/0;for(;i;)i._call?(o>i._time&&(o=i._time),t=i,i=i._next):(r=i._next,i._next=null,i=t?t._next=r:e=r);n=t,y(o)}(),s=0}}function g(){var t=c.now(),e=t-u;e>a&&(l-=e,u=t)}function y(t){r||(i&&(i=clearTimeout(i)),t-s>24?(t<1/0&&(i=setTimeout(m,t-c.now()-l)),o&&(o=clearInterval(o))):(o||(u=c.now(),o=setInterval(g,a)),r=1,f(m)))}p.prototype=v.prototype={constructor:p,restart:function(t,r,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?h():+i)+(null==r?0:+r),this._next||n===this||(n?n._next=this:e=this,n=this),this._call=t,this._time=i,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}},t.now=h,t.timer=v,t.timerFlush=b,t.timeout=function(t,e,n){var r=new p;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},t.interval=function(t,e,n){var r=new p,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?h():+n,r.restart(function o(a){a+=i,r.restart(o,i+=e,n),t(a)},e,n),r)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],29:[function(t,e,n){var r,i;r=this,i=function(t,e,n,r,i,o,a){"use strict";var u=e.dispatch("start","end","cancel","interrupt"),s=[],l=0,c=1,f=2,h=3,d=4,p=5,v=6;function b(t,e,r,i,o,a){var b=t.__transition;if(b){if(r in b)return}else t.__transition={};!function(t,e,r){var i,o=t.__transition;function a(l){var p,b,m,g;if(r.state!==c)return s();for(p in o)if((g=o[p]).name===r.name){if(g.state===h)return n.timeout(a);g.state===d?(g.state=v,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete o[p]):+p<e&&(g.state=v,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete o[p])}if(n.timeout(function(){r.state===h&&(r.state=d,r.timer.restart(u,r.delay,r.time),u(l))}),r.state=f,r.on.call("start",t,t.__data__,r.index,r.group),r.state===f){for(r.state=h,i=new Array(m=r.tween.length),p=0,b=-1;p<m;++p)(g=r.tween[p].value.call(t,t.__data__,r.index,r.group))&&(i[++b]=g);i.length=b+1}}function u(e){for(var n=e<r.duration?r.ease.call(null,e/r.duration):(r.timer.restart(s),r.state=p,1),o=-1,a=i.length;++o<a;)i[o].call(t,n);r.state===p&&(r.on.call("end",t,t.__data__,r.index,r.group),s())}function s(){for(var n in r.state=v,r.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=r,r.timer=n.timer(function(t){r.state=c,r.timer.restart(a,r.delay,r.time),r.delay<=t&&a(t-r.delay)},0,r.time)}(t,r,{name:e,index:i,group:o,on:u,tween:s,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:l})}function m(t,e){var n=y(t,e);if(n.state>l)throw new Error("too late; already scheduled");return n}function g(t,e){var n=y(t,e);if(n.state>h)throw new Error("too late; already running");return n}function y(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function _(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>f&&n.state<p,n.state=v,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}function w(t,e,n){var r=t._id;return t.each(function(){var t=g(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return y(t,r).value[e]}}function x(t,e){var n;return("number"==typeof e?i.interpolateNumber:e instanceof r.color?i.interpolateRgb:(n=r.color(e))?(e=n,i.interpolateRgb):i.interpolateString)(t,e)}var k=o.selection.prototype.constructor;function C(t){return function(){this.style.removeProperty(t)}}var E=0;function M(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function P(t){return o.selection().transition(t)}function A(){return++E}var S=o.selection.prototype;M.prototype=P.prototype={constructor:M,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=o.selector(t));for(var r=this._groups,i=r.length,a=new Array(i),u=0;u<i;++u)for(var s,l,c=r[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,b(h[d],e,n,d,h,y(s,n)));return new M(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=o.selectorAll(t));for(var r=this._groups,i=r.length,a=[],u=[],s=0;s<i;++s)for(var l,c=r[s],f=c.length,h=0;h<f;++h)if(l=c[h]){for(var d,p=t.call(l,l.__data__,h,c),v=y(l,n),m=0,g=p.length;m<g;++m)(d=p[m])&&b(d,e,n,m,p,v);a.push(p),u.push(l)}return new M(a,u,e,n)},filter:function(t){"function"!=typeof t&&(t=o.matcher(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,u=e[i],s=u.length,l=r[i]=[],c=0;c<s;++c)(a=u[c])&&t.call(a,a.__data__,c,u)&&l.push(a);return new M(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,l=e[u],c=n[u],f=l.length,h=a[u]=new Array(f),d=0;d<f;++d)(s=l[d]||c[d])&&(h[d]=s);for(;u<r;++u)a[u]=e[u];return new M(a,this._parents,this._name,this._id)},selection:function(){return new k(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=A(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,l=0;l<s;++l)if(a=u[l]){var c=y(a,e);b(a,t,n,l,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new M(r,this._parents,t,n)},call:S.call,nodes:S.nodes,node:S.node,size:S.size,empty:S.empty,each:S.each,on:function(t,e){var n=this._id;return arguments.length<2?y(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?m:g;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=o.namespace(t),r="transform"===n?i.interpolateTransformSvg:x;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttribute(t)}})(n,r,w(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}:function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=o.namespace(t);return this.tween(n,(r.local?function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,i)),n}return i._value=e,i}:function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,i)),n}return i._value=e,i})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?i.interpolateTransformCss:x;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=o.style(this,t),u=(this.style.removeProperty(t),o.style(this,t));return a===u?null:a===n&&u===r?i:i=e(n=a,r=u)}}(t,r)).on("end.style."+t,C(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var u=o.style(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=o.style(this,t)),u===l?null:u===r&&l===i?a:(i=l,a=e(r=u,s))}}(t,r,w(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,u="end."+a;return function(){var s=g(this,t),l=s.on,c=null==s.value[a]?o||(o=C(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(u,i=c),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var u=o.style(this,t);return u===a?null:u===r?i:i=e(r=u,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e(r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(w(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=y(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=g(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=g(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===e){i[s]=u;break}s===l&&i.push(u)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){m(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){m(this,t).delay=e}})(e,t)):y(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){g(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){g(this,t).duration=e}})(e,t)):y(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){g(this,t).ease=e}}(e,t)):y(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};n.each(function(){var n=g(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(u),e._.interrupt.push(u),e._.end.push(s)),n.on=e})})}};var T={time:null,delay:0,duration:250,ease:a.easeCubicInOut};function O(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))return T.time=n.now(),T;return r}o.selection.prototype.interrupt=function(t){return this.each(function(){_(this,t)})},o.selection.prototype.transition=function(t){var e,r;t instanceof M?(e=t._id,t=t._name):(e=A(),(r=T).time=n.now(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var u,s=i[a],l=s.length,c=0;c<l;++c)(u=s[c])&&b(u,t,e,c,s,r||O(u,e));return new M(i,this._parents,t,e)};var V=[null];t.transition=P,t.active=function(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>c&&n.name===e)return new M([[t]],V,e,+r);return null},t.interrupt=_,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-dispatch"),t("d3-timer"),t("d3-color"),t("d3-interpolate"),t("d3-selection"),t("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-timer","d3-color","d3-interpolate","d3-selection","d3-ease"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-color":7,"d3-dispatch":9,"d3-ease":12,"d3-interpolate":18,"d3-selection":24,"d3-timer":28}],30:[function(t,e,n){var r,i;r=this,i=function(t){"use strict";function e(t){return function(){return t}}function n(t){return t[0]}function r(t){return t[1]}function i(){this._=null}function o(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function a(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function u(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function s(t){for(;t.L;)t=t.L;return t}function l(t,e,n,r){var i=[null,null],o=O.push(i)-1;return i.left=t,i.right=e,n&&f(i,t,e,n),r&&f(i,e,t,r),S[t.index].halfedges.push(o),S[e.index].halfedges.push(o),i}function c(t,e,n){var r=[e,n];return r.left=t,r}function f(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function h(t,e,n,r,i){var o,a=t[0],u=t[1],s=a[0],l=a[1],c=0,f=1,h=u[0]-s,d=u[1]-l;if(o=e-s,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=r-s,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}if(o=n-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=i-l,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<f&&(f=o)}return!(c>0||f<1)||(c>0&&(t[0]=[s+c*h,l+c*d]),f<1&&(t[1]=[s+f*h,l+f*d]),!0)}}}}}function d(t,e,n,r,i){var o=t[1];if(o)return!0;var a,u,s=t[0],l=t.left,c=t.right,f=l[0],h=l[1],d=c[0],p=c[1],v=(f+d)/2,b=(h+p)/2;if(p===h){if(v<e||v>=r)return;if(f>d){if(s){if(s[1]>=i)return}else s=[v,n];o=[v,i]}else{if(s){if(s[1]<n)return}else s=[v,i];o=[v,n]}}else if(u=b-(a=(f-d)/(p-h))*v,a<-1||a>1)if(f>d){if(s){if(s[1]>=i)return}else s=[(n-u)/a,n];o=[(i-u)/a,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/a,i];o=[(n-u)/a,n]}else if(h<p){if(s){if(s[0]>=r)return}else s=[e,a*e+u];o=[r,a*r+u]}else{if(s){if(s[0]<e)return}else s=[r,a*r+u];o=[e,a*e+u]}return t[0]=s,t[1]=o,!0}function p(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function v(t,e){return e[+(e.left!==t.site)]}function b(t,e){return e[+(e.left===t.site)]}i.prototype={constructor:i,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=s(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(a(this,n),n=(t=n).U),n.C=!1,r.C=!0,u(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(u(this,n),n=(t=n).U),n.C=!1,r.C=!0,a(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,l=t.R;if(n=o?l?s(l):o:l,i?i.L===t?i.L=n:i.R=n:this._=n,o&&l?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==l?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=l,l.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,a(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,u(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,a(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,u(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,a(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,u(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var m,g=[];function y(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var u=i[0],s=i[1],l=r[0]-u,c=r[1]-s,f=a[0]-u,h=a[1]-s,d=2*(l*h-c*f);if(!(d>=-j)){var p=l*l+c*c,v=f*f+h*h,b=(h*p-c*v)/d,y=(l*v-f*p)/d,_=g.pop()||new function(){o(this),this.x=this.y=this.arc=this.site=this.cy=null};_.arc=t,_.site=i,_.x=b+u,_.y=(_.cy=y+s)+Math.sqrt(b*b+y*y),t.circle=_;for(var w=null,x=T._;x;)if(_.y<x.y||_.y===x.y&&_.x<=x.x){if(!x.L){w=x.P;break}x=x.L}else{if(!x.R){w=x;break}x=x.R}T.insert(w,_),w||(m=_)}}}}function _(t){var e=t.circle;e&&(e.P||(m=e.N),T.remove(e),g.push(e),o(e),t.circle=null)}var w=[];function x(t){var e=w.pop()||new function(){o(this),this.edge=this.site=this.circle=null};return e.site=t,e}function k(t){_(t),A.remove(t),w.push(t),o(t)}function C(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,u=[t];k(t);for(var s=o;s.circle&&Math.abs(n-s.circle.x)<V&&Math.abs(r-s.circle.cy)<V;)o=s.P,u.unshift(s),k(s),s=o;u.unshift(s),_(s);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<V&&Math.abs(r-c.circle.cy)<V;)a=c.N,u.push(c),k(c),c=a;u.push(c),_(c);var h,d=u.length;for(h=1;h<d;++h)c=u[h],s=u[h-1],f(c.edge,s.site,c.site,i);s=u[0],(c=u[d-1]).edge=l(s.site,c.site,null,i),y(s),y(c)}function E(t){for(var e,n,r,i,o=t[0],a=t[1],u=A._;u;)if((r=M(u,a)-o)>V)u=u.L;else{if(!((i=o-P(u,a))>V)){r>-V?(e=u.P,n=u):i>-V?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}!function(t){S[t.index]={site:t,halfedges:[]}}(t);var s=x(t);if(A.insert(e,s),e||n){if(e===n)return _(e),n=x(e.site),A.insert(s,n),s.edge=n.edge=l(e.site,s.site),y(e),void y(n);if(n){_(e),_(n);var c=e.site,h=c[0],d=c[1],p=t[0]-h,v=t[1]-d,b=n.site,m=b[0]-h,g=b[1]-d,w=2*(p*g-v*m),k=p*p+v*v,C=m*m+g*g,E=[(g*k-v*C)/w+h,(p*C-m*k)/w+d];f(n.edge,c,b,E),s.edge=l(c,t,null,E),n.edge=l(t,b,null,E),y(e),y(n)}else s.edge=l(e.site,s.site)}}function M(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(n=a.site)[0],s=n[1],l=s-e;if(!l)return u;var c=u-r,f=1/o-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-s+l/2+i-o/2)))/f+r:(r+u)/2}function P(t,e){var n=t.N;if(n)return M(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var A,S,T,O,V=1e-6,j=1e-12;function D(t,e){return e[1]-t[1]||e[0]-t[0]}function N(t,e){var n,r,o,a=t.sort(D).pop();for(O=[],S=new Array(t.length),A=new i,T=new i;;)if(o=m,a&&(!o||a[1]<o.y||a[1]===o.y&&a[0]<o.x))a[0]===n&&a[1]===r||(E(a),n=a[0],r=a[1]),a=t.pop();else{if(!o)break;C(o.arc)}if(function(){for(var t,e,n,r,i=0,o=S.length;i<o;++i)if((t=S[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(n=0;n<r;++n)a[n]=n,u[n]=p(t,O[e[n]]);for(a.sort(function(t,e){return u[e]-u[t]}),n=0;n<r;++n)u[n]=e[a[n]];for(n=0;n<r;++n)e[n]=u[n]}}(),e){var u=+e[0][0],s=+e[0][1],l=+e[1][0],f=+e[1][1];!function(t,e,n,r){for(var i,o=O.length;o--;)d(i=O[o],t,e,n,r)&&h(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>V||Math.abs(i[0][1]-i[1][1])>V)||delete O[o]}(u,s,l,f),function(t,e,n,r){var i,o,a,u,s,l,f,h,d,p,m,g,y=S.length,_=!0;for(i=0;i<y;++i)if(o=S[i]){for(a=o.site,u=(s=o.halfedges).length;u--;)O[s[u]]||s.splice(u,1);for(u=0,l=s.length;u<l;)m=(p=b(o,O[s[u]]))[0],g=p[1],h=(f=v(o,O[s[++u%l]]))[0],d=f[1],(Math.abs(m-h)>V||Math.abs(g-d)>V)&&(s.splice(u,0,O.push(c(a,p,Math.abs(m-t)<V&&r-g>V?[t,Math.abs(h-t)<V?d:r]:Math.abs(g-r)<V&&n-m>V?[Math.abs(d-r)<V?h:n,r]:Math.abs(m-n)<V&&g-e>V?[n,Math.abs(h-n)<V?d:e]:Math.abs(g-e)<V&&m-t>V?[Math.abs(d-e)<V?h:t,e]:null))-1),++l);l&&(_=!1)}if(_){var w,x,k,C=1/0;for(i=0,_=null;i<y;++i)(o=S[i])&&(k=(w=(a=o.site)[0]-t)*w+(x=a[1]-e)*x)<C&&(C=k,_=o);if(_){var E=[t,e],M=[t,r],P=[n,r],A=[n,e];_.halfedges.push(O.push(c(a=_.site,E,M))-1,O.push(c(a,M,P))-1,O.push(c(a,P,A))-1,O.push(c(a,A,E))-1)}}for(i=0;i<y;++i)(o=S[i])&&(o.halfedges.length||delete S[i])}(u,s,l,f)}this.edges=O,this.cells=S,A=T=O=S=null}N.prototype={constructor:N,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return v(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,u,s,l,c=n.site,f=-1,h=e[i[o-1]],d=h.left===c?h.right:h.left;++f<o;)a=d,d=(h=e[i[f]]).left===c?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(s=a,l=d,((u=c)[0]-l[0])*(s[1]-u[1])-(u[0]-s[0])*(l[1]-u[1])<0)&&t.push([c.data,a.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var s=t-i.site[0],l=e-i.site[1],c=s*s+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=t-u[0],l=e-u[1],f=s*s+l*l;f<c&&(c=f,a=u.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}},t.voronoi=function(){var t=n,i=r,o=null;function a(e){return new N(e.map(function(n,r){var o=[Math.round(t(n,r,e)/V)*V,Math.round(i(n,r,e)/V)*V];return o.index=r,o.data=n,o}),o)}return a.polygons=function(t){return a(t).polygons()},a.links=function(t){return a(t).links()},a.triangles=function(t){return a(t).triangles()},a.x=function(n){return arguments.length?(t="function"==typeof n?n:e(+n),a):t},a.y=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),a):i},a.extent=function(t){return arguments.length?(o=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],a):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},a.size=function(t){return arguments.length?(o=null==t?null:[[0,0],[+t[0],+t[1]]],a):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},a},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],31:[function(t,e,n){var r,i;r=this,i=function(t,e,n,r,i,o){"use strict";function a(t){return function(){return t}}function u(t,e,n){this.k=t,this.x=e,this.y=n}u.prototype={constructor:u,scale:function(t){return 1===t?this:new u(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new u(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var s=new u(1,0,0);function l(t){return t.__zoom||s}function c(){e.event.stopImmediatePropagation()}function f(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function h(){return!e.event.button}function d(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function p(){return this.__zoom||s}function v(){return-e.event.deltaY*(e.event.deltaMode?120:1)/500}function b(){return"ontouchstart"in this}function m(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}l.prototype=u.prototype,t.zoom=function(){var t,l,g=h,y=d,_=m,w=v,x=b,k=[0,1/0],C=[[-1/0,-1/0],[1/0,1/0]],E=250,M=i.interpolateZoom,P=[],A=n.dispatch("start","zoom","end"),S=500,T=150,O=0;function V(t){t.property("__zoom",p).on("wheel.zoom",B).on("mousedown.zoom",I).on("dblclick.zoom",F).filter(x).on("touchstart.zoom",U).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",H).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function j(t,e){return(e=Math.max(k[0],Math.min(k[1],e)))===t.k?t:new u(e,t.x,t.y)}function D(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new u(t.k,r,i)}function N(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function L(t,e,n){t.on("start.zoom",function(){z(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=z(this,t),i=y.apply(this,t),o=n||N(i),a=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),s=this.__zoom,l="function"==typeof e?e.apply(this,t):e,c=M(s.invert(o).concat(a/s.k),l.invert(o).concat(a/l.k));return function(t){if(1===t)t=l;else{var e=c(t),n=a/e[2];t=new u(n,o[0]-e[0]*n,o[1]-e[1]*n)}r.zoom(null,t)}})}function z(t,e){for(var n,r=0,i=P.length;r<i;++r)if((n=P[r]).that===t)return n;return new R(t,e)}function R(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=y.apply(t,e)}function B(){if(g.apply(this,arguments)){var t=z(this,arguments),n=this.__zoom,r=Math.max(k[0],Math.min(k[1],n.k*Math.pow(2,w.apply(this,arguments)))),i=e.mouse(this);if(t.wheel)t.mouse[0][0]===i[0]&&t.mouse[0][1]===i[1]||(t.mouse[1]=n.invert(t.mouse[0]=i)),clearTimeout(t.wheel);else{if(n.k===r)return;t.mouse=[i,n.invert(i)],o.interrupt(this),t.start()}f(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},T),t.zoom("mouse",_(D(j(n,r),t.mouse[0],t.mouse[1]),t.extent,C))}}function I(){if(!l&&g.apply(this,arguments)){var t=z(this,arguments),n=e.select(e.event.view).on("mousemove.zoom",function(){if(f(),!t.moved){var n=e.event.clientX-a,r=e.event.clientY-u;t.moved=n*n+r*r>O}t.zoom("mouse",_(D(t.that.__zoom,t.mouse[0]=e.mouse(t.that),t.mouse[1]),t.extent,C))},!0).on("mouseup.zoom",function(){n.on("mousemove.zoom mouseup.zoom",null),r.dragEnable(e.event.view,t.moved),f(),t.end()},!0),i=e.mouse(this),a=e.event.clientX,u=e.event.clientY;r.dragDisable(e.event.view),c(),t.mouse=[i,this.__zoom.invert(i)],o.interrupt(this),t.start()}}function F(){if(g.apply(this,arguments)){var t=this.__zoom,n=e.mouse(this),r=t.invert(n),i=t.k*(e.event.shiftKey?.5:2),o=_(D(j(t,i),n,r),y.apply(this,arguments),C);f(),E>0?e.select(this).transition().duration(E).call(L,o,n):e.select(this).call(V.transform,o)}}function U(){if(g.apply(this,arguments)){var n,r,i,a,u=z(this,arguments),s=e.event.changedTouches,l=s.length;for(c(),r=0;r<l;++r)i=s[r],a=[a=e.touch(this,s,i.identifier),this.__zoom.invert(a),i.identifier],u.touch0?u.touch1||(u.touch1=a):(u.touch0=a,n=!0);if(t&&(t=clearTimeout(t),!u.touch1))return u.end(),void((a=e.select(this).on("dblclick.zoom"))&&a.apply(this,arguments));n&&(t=setTimeout(function(){t=null},S),o.interrupt(this),u.start())}}function q(){var n,r,i,o,a=z(this,arguments),u=e.event.changedTouches,s=u.length;for(f(),t&&(t=clearTimeout(t)),n=0;n<s;++n)r=u[n],i=e.touch(this,u,r.identifier),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var l=a.touch0[0],c=a.touch0[1],h=a.touch1[0],d=a.touch1[1],p=(p=h[0]-l[0])*p+(p=h[1]-l[1])*p,v=(v=d[0]-c[0])*v+(v=d[1]-c[1])*v;r=j(r,Math.sqrt(p/v)),i=[(l[0]+h[0])/2,(l[1]+h[1])/2],o=[(c[0]+d[0])/2,(c[1]+d[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],o=a.touch0[1]}a.zoom("touch",_(D(r,i,o),a.extent,C))}function H(){var t,n,r=z(this,arguments),i=e.event.changedTouches,o=i.length;for(c(),l&&clearTimeout(l),l=setTimeout(function(){l=null},S),t=0;t<o;++t)n=i[t],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):r.end()}return V.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",p),t!==n?L(t,e):n.interrupt().each(function(){z(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},V.scaleBy=function(t,e){V.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},V.scaleTo=function(t,e){V.transform(t,function(){var t=y.apply(this,arguments),n=this.__zoom,r=N(t),i=n.invert(r),o="function"==typeof e?e.apply(this,arguments):e;return _(D(j(n,o),r,i),t,C)})},V.translateBy=function(t,e,n){V.transform(t,function(){return _(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),y.apply(this,arguments),C)})},V.translateTo=function(t,e,n){V.transform(t,function(){var t=y.apply(this,arguments),r=this.__zoom,i=N(t);return _(s.translate(i[0],i[1]).scale(r.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,C)})},R.prototype={start:function(){return 1==++this.active&&(this.index=P.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(P.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){e.customEvent(new function(t,e,n){this.target=t,this.type=e,this.transform=n}(V,t,this.that.__zoom),A.apply,A,[t,this.that,this.args])}},V.wheelDelta=function(t){return arguments.length?(w="function"==typeof t?t:a(+t),V):w},V.filter=function(t){return arguments.length?(g="function"==typeof t?t:a(!!t),V):g},V.touchable=function(t){return arguments.length?(x="function"==typeof t?t:a(!!t),V):x},V.extent=function(t){return arguments.length?(y="function"==typeof t?t:a([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),V):y},V.scaleExtent=function(t){return arguments.length?(k[0]=+t[0],k[1]=+t[1],V):[k[0],k[1]]},V.translateExtent=function(t){return arguments.length?(C[0][0]=+t[0][0],C[1][0]=+t[1][0],C[0][1]=+t[0][1],C[1][1]=+t[1][1],V):[[C[0][0],C[0][1]],[C[1][0],C[1][1]]]},V.constrain=function(t){return arguments.length?(_=t,V):_},V.duration=function(t){return arguments.length?(E=+t,V):E},V.interpolate=function(t){return arguments.length?(M=t,V):M},V.on=function(){var t=A.on.apply(A,arguments);return t===A?V:t},V.clickDistance=function(t){return arguments.length?(O=(t=+t)*t,V):Math.sqrt(O)},V},t.zoomTransform=l,t.zoomIdentity=s,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-selection"),t("d3-dispatch"),t("d3-drag"),t("d3-interpolate"),t("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-dispatch","d3-drag","d3-interpolate","d3-transition"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-dispatch":9,"d3-drag":10,"d3-interpolate":18,"d3-selection":24,"d3-transition":29}],32:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("d3-array"),i=t("d3-axis"),o=t("d3-brush"),a=t("d3-chord"),u=t("d3-collection"),s=t("d3-color"),l=t("d3-contour"),c=t("d3-dispatch"),f=t("d3-drag"),h=t("d3-dsv"),d=t("d3-ease"),p=t("d3-fetch"),v=t("d3-force"),b=t("d3-format"),m=t("d3-geo"),g=t("d3-hierarchy"),y=t("d3-interpolate"),_=t("d3-path"),w=t("d3-polygon"),x=t("d3-quadtree"),k=t("d3-random"),C=t("d3-scale"),E=t("d3-scale-chromatic"),M=t("d3-selection"),P=t("d3-shape"),A=t("d3-time"),S=t("d3-time-format"),T=t("d3-timer"),O=t("d3-transition"),V=t("d3-voronoi"),j=t("d3-zoom");Object.keys(r).forEach(function(t){n[t]=r[t]}),Object.keys(i).forEach(function(t){n[t]=i[t]}),Object.keys(o).forEach(function(t){n[t]=o[t]}),Object.keys(a).forEach(function(t){n[t]=a[t]}),Object.keys(u).forEach(function(t){n[t]=u[t]}),Object.keys(s).forEach(function(t){n[t]=s[t]}),Object.keys(l).forEach(function(t){n[t]=l[t]}),Object.keys(c).forEach(function(t){n[t]=c[t]}),Object.keys(f).forEach(function(t){n[t]=f[t]}),Object.keys(h).forEach(function(t){n[t]=h[t]}),Object.keys(d).forEach(function(t){n[t]=d[t]}),Object.keys(p).forEach(function(t){n[t]=p[t]}),Object.keys(v).forEach(function(t){n[t]=v[t]}),Object.keys(b).forEach(function(t){n[t]=b[t]}),Object.keys(m).forEach(function(t){n[t]=m[t]}),Object.keys(g).forEach(function(t){n[t]=g[t]}),Object.keys(y).forEach(function(t){n[t]=y[t]}),Object.keys(_).forEach(function(t){n[t]=_[t]}),Object.keys(w).forEach(function(t){n[t]=w[t]}),Object.keys(x).forEach(function(t){n[t]=x[t]}),Object.keys(k).forEach(function(t){n[t]=k[t]}),Object.keys(C).forEach(function(t){n[t]=C[t]}),Object.keys(E).forEach(function(t){n[t]=E[t]}),Object.keys(M).forEach(function(t){n[t]=M[t]}),Object.keys(P).forEach(function(t){n[t]=P[t]}),Object.keys(A).forEach(function(t){n[t]=A[t]}),Object.keys(S).forEach(function(t){n[t]=S[t]}),Object.keys(T).forEach(function(t){n[t]=T[t]}),Object.keys(O).forEach(function(t){n[t]=O[t]}),Object.keys(V).forEach(function(t){n[t]=V[t]}),Object.keys(j).forEach(function(t){n[t]=j[t]}),n.version="5.9.2",Object.defineProperty(n,"event",{get:function(){return M.event}})},{"d3-array":2,"d3-axis":3,"d3-brush":4,"d3-chord":5,"d3-collection":6,"d3-color":7,"d3-contour":8,"d3-dispatch":9,"d3-drag":10,"d3-dsv":11,"d3-ease":12,"d3-fetch":13,"d3-force":14,"d3-format":15,"d3-geo":16,"d3-hierarchy":17,"d3-interpolate":18,"d3-path":19,"d3-polygon":20,"d3-quadtree":21,"d3-random":22,"d3-scale":33,"d3-scale-chromatic":23,"d3-selection":24,"d3-shape":25,"d3-time":27,"d3-time-format":26,"d3-timer":28,"d3-transition":29,"d3-voronoi":30,"d3-zoom":31}],33:[function(t,e,n){var r,i;r=this,i=function(t,e,n,r,i,o,a){"use strict";function u(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function s(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var l=Array.prototype,c=l.map,f=l.slice,h={name:"implicit"};function d(){var t=e.map(),n=[],r=[],i=h;function o(e){var o=e+"",a=t.get(o);if(!a){if(i!==h)return i;t.set(o,a=n.push(e))}return r[(a-1)%r.length]}return o.domain=function(r){if(!arguments.length)return n.slice();n=[],t=e.map();for(var i,a,u=-1,s=r.length;++u<s;)t.has(a=(i=r[u])+"")||t.set(a,n.push(i));return o},o.range=function(t){return arguments.length?(r=f.call(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return d(n,r).unknown(i)},u.apply(o,arguments),o}function p(){var t,e,r=d().unknown(void 0),i=r.domain,o=r.range,a=[0,1],s=!1,l=0,c=0,f=.5;function h(){var r=i().length,u=a[1]<a[0],h=a[u-0],d=a[1-u];t=(d-h)/Math.max(1,r-l+2*c),s&&(t=Math.floor(t)),h+=(d-h-t*(r-l))*f,e=t*(1-l),s&&(h=Math.round(h),e=Math.round(e));var p=n.range(r).map(function(e){return h+t*e});return o(u?p.reverse():p)}return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),h()):i()},r.range=function(t){return arguments.length?(a=[+t[0],+t[1]],h()):a.slice()},r.rangeRound=function(t){return a=[+t[0],+t[1]],s=!0,h()},r.bandwidth=function(){return e},r.step=function(){return t},r.round=function(t){return arguments.length?(s=!!t,h()):s},r.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),h()):l},r.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),h()):l},r.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},r.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),h()):f},r.copy=function(){return p(i(),a).round(s).paddingInner(l).paddingOuter(c).align(f)},u.apply(h(),arguments)}function v(t){return+t}var b=[0,1];function m(t){return t}function g(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function y(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function _(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=g(i,r),o=n(a,o)):(r=g(r,i),o=n(o,a)),function(t){return o(r(t))}}function w(t,e,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<i;)o[u]=g(t[u],t[u+1]),a[u]=r(e[u],e[u+1]);return function(e){var r=n.bisect(t,e,1,i)-1;return a[r](o[r](e))}}function x(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function k(){var t,e,n,i,o,a,u=b,s=b,l=r.interpolate,h=m;function d(){return i=Math.min(u.length,s.length)>2?w:_,o=a=null,p}function p(e){return isNaN(e=+e)?n:(o||(o=i(u.map(t),s,l)))(t(h(e)))}return p.invert=function(n){return h(e((a||(a=i(s,u.map(t),r.interpolateNumber)))(n)))},p.domain=function(t){return arguments.length?(u=c.call(t,v),h===m||(h=y(u)),d()):u.slice()},p.range=function(t){return arguments.length?(s=f.call(t),d()):s.slice()},p.rangeRound=function(t){return s=f.call(t),l=r.interpolateRound,d()},p.clamp=function(t){return arguments.length?(h=t?y(u):m,p):h!==m},p.interpolate=function(t){return arguments.length?(l=t,d()):l},p.unknown=function(t){return arguments.length?(n=t,p):n},function(n,r){return t=n,e=r,d()}}function C(t,e){return k()(t,e)}function E(t,e,r,o){var a,u=n.tickStep(t,e,r);switch((o=i.formatSpecifier(null==o?",f":o)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(a=i.precisionPrefix(u,s))||(o.precision=a),i.formatPrefix(o,s);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(a=i.precisionRound(u,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=a-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(a=i.precisionFixed(u))||(o.precision=a-2*("%"===o.type))}return i.format(o)}function M(t){var e=t.domain;return t.ticks=function(t){var r=e();return n.ticks(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return E(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(r){null==r&&(r=10);var i,o=e(),a=0,u=o.length-1,s=o[a],l=o[u];return l<s&&(i=s,s=l,l=i,i=a,a=u,u=i),(i=n.tickIncrement(s,l,r))>0?(s=Math.floor(s/i)*i,l=Math.ceil(l/i)*i,i=n.tickIncrement(s,l,r)):i<0&&(s=Math.ceil(s*i)/i,l=Math.floor(l*i)/i,i=n.tickIncrement(s,l,r)),i>0?(o[a]=Math.floor(s/i)*i,o[u]=Math.ceil(l/i)*i,e(o)):i<0&&(o[a]=Math.ceil(s*i)/i,o[u]=Math.floor(l*i)/i,e(o)),t},t}function P(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function A(t){return Math.log(t)}function S(t){return Math.exp(t)}function T(t){return-Math.log(-t)}function O(t){return-Math.exp(-t)}function V(t){return isFinite(t)?+("1e"+t):t<0?0:t}function j(t){return function(e){return-t(-e)}}function D(t){var e,r,o=t(A,S),a=o.domain,u=10;function s(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(u),r=function(t){return 10===t?V:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(u),a()[0]<0?(e=j(e),r=j(r),t(T,O)):t(A,S),o}return o.base=function(t){return arguments.length?(u=+t,s()):u},o.domain=function(t){return arguments.length?(a(t),s()):a()},o.ticks=function(t){var i,o=a(),s=o[0],l=o[o.length-1];(i=l<s)&&(d=s,s=l,l=d);var c,f,h,d=e(s),p=e(l),v=null==t?10:+t,b=[];if(!(u%1)&&p-d<v){if(d=Math.round(d)-1,p=Math.round(p)+1,s>0){for(;d<p;++d)for(f=1,c=r(d);f<u;++f)if(!((h=c*f)<s)){if(h>l)break;b.push(h)}}else for(;d<p;++d)for(f=u-1,c=r(d);f>=1;--f)if(!((h=c*f)<s)){if(h>l)break;b.push(h)}}else b=n.ticks(d,p,Math.min(p-d,v)).map(r);return i?b.reverse():b},o.tickFormat=function(t,n){if(null==n&&(n=10===u?".0e":","),"function"!=typeof n&&(n=i.format(n)),t===1/0)return n;null==t&&(t=10);var a=Math.max(1,u*t/o.ticks().length);return function(t){var i=t/r(Math.round(e(t)));return i*u<u-.5&&(i*=u),i<=a?n(t):""}},o.nice=function(){return a(P(a(),{floor:function(t){return r(Math.floor(e(t)))},ceil:function(t){return r(Math.ceil(e(t)))}}))},o}function N(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function L(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function z(t){var e=1,n=t(N(e),L(e));return n.constant=function(n){return arguments.length?t(N(e=+n),L(e)):e},M(n)}function R(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function B(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function I(t){return t<0?-t*t:t*t}function F(t){var e=t(m,m),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(m,m):.5===n?t(B,I):t(R(n),R(1/n)):n},M(e)}function U(){var t=F(k());return t.copy=function(){return x(t,U()).exponent(t.exponent())},u.apply(t,arguments),t}var q=1e3,H=60*q,Y=60*H,K=24*Y,G=7*K,W=30*K,X=365*K;function $(t){return new Date(t)}function Q(t){return t instanceof Date?+t:+new Date(+t)}function Z(t,e,r,i,o,a,u,s,l){var f=C(m,m),h=f.invert,d=f.domain,p=l(".%L"),v=l(":%S"),b=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),_=l("%b %d"),w=l("%B"),k=l("%Y"),E=[[u,1,q],[u,5,5*q],[u,15,15*q],[u,30,30*q],[a,1,H],[a,5,5*H],[a,15,15*H],[a,30,30*H],[o,1,Y],[o,3,3*Y],[o,6,6*Y],[o,12,12*Y],[i,1,K],[i,2,2*K],[r,1,G],[e,1,W],[e,3,3*W],[t,1,X]];function M(n){return(u(n)<n?p:a(n)<n?v:o(n)<n?b:i(n)<n?g:e(n)<n?r(n)<n?y:_:t(n)<n?w:k)(n)}function A(e,r,i,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(i-r)/e,u=n.bisector(function(t){return t[2]}).right(E,a);u===E.length?(o=n.tickStep(r/X,i/X,e),e=t):u?(o=(u=E[a/E[u-1][2]<E[u][2]/a?u-1:u])[1],e=u[0]):(o=Math.max(n.tickStep(r,i,e),1),e=s)}return null==o?e:e.every(o)}return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?d(c.call(t,Q)):d().map($)},f.ticks=function(t,e){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=A(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},f.tickFormat=function(t,e){return null==e?M:l(e)},f.nice=function(t,e){var n=d();return(t=A(t,n[0],n[n.length-1],e))?d(P(n,t)):f},f.copy=function(){return x(f,Z(t,e,r,i,o,a,u,s,l))},f}function J(){var t,e,n,r,i,o=0,a=1,u=m,s=!1;function l(e){return isNaN(e=+e)?i:u(0===n?.5:(e=(r(e)-t)*n,s?Math.max(0,Math.min(1,e)):e))}return l.domain=function(i){return arguments.length?(t=r(o=+i[0]),e=r(a=+i[1]),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(s=!!t,l):s},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function tt(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function et(){var t=F(J());return t.copy=function(){return tt(t,et()).exponent(t.exponent())},s.apply(t,arguments)}function nt(){var t,e,n,r,i,o,a,u=0,s=.5,l=1,c=m,f=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(t<e?r:i),c(f?Math.max(0,Math.min(1,t)):t))}return h.domain=function(a){return arguments.length?(t=o(u=+a[0]),e=o(s=+a[1]),n=o(l=+a[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h):[u,s,l]},h.clamp=function(t){return arguments.length?(f=!!t,h):f},h.interpolator=function(t){return arguments.length?(c=t,h):c},h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(u),e=a(s),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),h}}function rt(){var t=F(nt());return t.copy=function(){return tt(t,rt()).exponent(t.exponent())},s.apply(t,arguments)}t.scaleBand=p,t.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(p.apply(null,arguments).paddingInner(1))},t.scaleIdentity=function t(e){var n;function r(t){return isNaN(t=+t)?n:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=c.call(t,v),r):e.slice()},r.unknown=function(t){return arguments.length?(n=t,r):n},r.copy=function(){return t(e).unknown(n)},e=arguments.length?c.call(e,v):[0,1],M(r)},t.scaleLinear=function t(){var e=C(m,m);return e.copy=function(){return x(e,t())},u.apply(e,arguments),M(e)},t.scaleLog=function t(){var e=D(k()).domain([1,10]);return e.copy=function(){return x(e,t()).base(e.base())},u.apply(e,arguments),e},t.scaleSymlog=function t(){var e=z(k());return e.copy=function(){return x(e,t()).constant(e.constant())},u.apply(e,arguments)},t.scaleOrdinal=d,t.scaleImplicit=h,t.scalePow=U,t.scaleSqrt=function(){return U.apply(null,arguments).exponent(.5)},t.scaleQuantile=function t(){var e,r=[],i=[],o=[];function a(){var t=0,e=Math.max(1,i.length);for(o=new Array(e-1);++t<e;)o[t-1]=n.quantile(r,t/e);return s}function s(t){return isNaN(t=+t)?e:i[n.bisect(o,t)]}return s.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:r[0],e<o.length?o[e]:r[r.length-1]]},s.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var e,i=0,o=t.length;i<o;++i)null==(e=t[i])||isNaN(e=+e)||r.push(e);return r.sort(n.ascending),a()},s.range=function(t){return arguments.length?(i=f.call(t),a()):i.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return o.slice()},s.copy=function(){return t().domain(r).range(i).unknown(e)},u.apply(s,arguments)},t.scaleQuantize=function t(){var e,r=0,i=1,o=1,a=[.5],s=[0,1];function l(t){return t<=t?s[n.bisect(a,t,0,o)]:e}function c(){var t=-1;for(a=new Array(o);++t<o;)a[t]=((t+1)*i-(t-o)*r)/(o+1);return l}return l.domain=function(t){return arguments.length?(r=+t[0],i=+t[1],c()):[r,i]},l.range=function(t){return arguments.length?(o=(s=f.call(t)).length-1,c()):s.slice()},l.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[r,a[0]]:e>=o?[a[o-1],i]:[a[e-1],a[e]]},l.unknown=function(t){return arguments.length?(e=t,l):l},l.thresholds=function(){return a.slice()},l.copy=function(){return t().domain([r,i]).range(s).unknown(e)},u.apply(M(l),arguments)},t.scaleThreshold=function t(){var e,r=[.5],i=[0,1],o=1;function a(t){return t<=t?i[n.bisect(r,t,0,o)]:e}return a.domain=function(t){return arguments.length?(r=f.call(t),o=Math.min(r.length,i.length-1),a):r.slice()},a.range=function(t){return arguments.length?(i=f.call(t),o=Math.min(r.length,i.length-1),a):i.slice()},a.invertExtent=function(t){var e=i.indexOf(t);return[r[e-1],r[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(r).range(i).unknown(e)},u.apply(a,arguments)},t.scaleTime=function(){return u.apply(Z(o.timeYear,o.timeMonth,o.timeWeek,o.timeDay,o.timeHour,o.timeMinute,o.timeSecond,o.timeMillisecond,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return u.apply(Z(o.utcYear,o.utcMonth,o.utcWeek,o.utcDay,o.utcHour,o.utcMinute,o.utcSecond,o.utcMillisecond,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scaleSequential=function t(){var e=M(J()(m));return e.copy=function(){return tt(e,t())},s.apply(e,arguments)},t.scaleSequentialLog=function t(){var e=D(J()).domain([1,10]);return e.copy=function(){return tt(e,t()).base(e.base())},s.apply(e,arguments)},t.scaleSequentialPow=et,t.scaleSequentialSqrt=function(){return et.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var e=z(J());return e.copy=function(){return tt(e,t()).constant(e.constant())},s.apply(e,arguments)},t.scaleSequentialQuantile=function t(){var e=[],r=m;function i(t){if(!isNaN(t=+t))return r((n.bisect(e,t)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,o=0,a=t.length;o<a;++o)null==(r=t[o])||isNaN(r=+r)||e.push(r);return e.sort(n.ascending),i},i.interpolator=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return t(r).domain(e)},s.apply(i,arguments)},t.scaleDiverging=function t(){var e=M(nt()(m));return e.copy=function(){return tt(e,t())},s.apply(e,arguments)},t.scaleDivergingLog=function t(){var e=D(nt()).domain([.1,1,10]);return e.copy=function(){return tt(e,t()).base(e.base())},s.apply(e,arguments)},t.scaleDivergingPow=rt,t.scaleDivergingSqrt=function(){return rt.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var e=z(nt());return e.copy=function(){return tt(e,t()).constant(e.constant())},s.apply(e,arguments)},t.tickFormat=E,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof n&&void 0!==e?i(n,t("d3-collection"),t("d3-array"),t("d3-interpolate"),t("d3-format"),t("d3-time"),t("d3-time-format")):"function"==typeof define&&define.amd?define(["exports","d3-collection","d3-array","d3-interpolate","d3-format","d3-time","d3-time-format"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-array":2,"d3-collection":6,"d3-format":15,"d3-interpolate":18,"d3-time":27,"d3-time-format":26}],34:[function(t,e,n){"use strict";var r=t("h");e.exports=function(t,e){return e=e||{},function(n,i){if(!n)return t&&t(i);if(n instanceof Error)n=n.name+": "+n.message;else if("string"!=typeof n)throw new Error("fail-nicely: Oops! the message must be a String or an Error. How ironic.");var o=void 0===e.zIndex?9999:parseInt(e.zIndex),a=void 0===e.bg?"#333":e.bg,u=void 0===e.fg?"#fff":e.fg,s=void 0===e.title?"Sorry!":e.title,l=void 0===e.fontFamily?"Helvetica, Arial, sans-serif":e.fontFamily,c=void 0===e.position?"fixed":e.position;if(void 0!==e.invert&&e.invert){var f=u;u=a,a=f}var h={position:c,top:0,right:0,bottom:0,left:0,"background-color":a,color:u,"text-align":"center","z-index":o},d={"font-family":l},p={"font-family":l,"max-width":"640px","margin-left":"auto","margin-right":"auto","line-height":"1.4",padding:"0 15px"};document.body.appendChild(r("div",{style:h},[r("div",{style:{transform:"translate(0, -50%)","margin-top":"50vh"}},[r("h1",s,{style:d}),r("p",n,{style:p})])]))}}},{h:41}],35:[function(t,e,n){e.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},{}],36:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=c*a-u*l,h=-c*o+u*s,d=l*o-a*s,p=n*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*r+i*l)*p,t[2]=(u*r-i*a)*p,t[3]=h*p,t[4]=(c*n-i*s)*p,t[5]=(-u*n+i*o)*p,t[6]=d*p,t[7]=(-l*n+r*s)*p,t[8]=(a*n-r*o)*p,t):null}},{}],37:[function(t,e,n){e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],38:[function(t,e,n){e.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],39:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],v=e[13],b=e[14],m=e[15],g=n*u-r*a,y=n*s-i*a,_=n*l-o*a,w=r*s-i*u,x=r*l-o*u,k=i*l-o*s,C=c*v-f*p,E=c*b-h*p,M=c*m-d*p,P=f*b-h*v,A=f*m-d*v,S=h*m-d*b,T=g*S-y*A+_*P+w*M-x*E+k*C;if(!T)return null;return T=1/T,t[0]=(u*S-s*A+l*P)*T,t[1]=(i*A-r*S-o*P)*T,t[2]=(v*k-b*x+m*w)*T,t[3]=(h*x-f*k-d*w)*T,t[4]=(s*M-a*S-l*E)*T,t[5]=(n*S-i*M+o*E)*T,t[6]=(b*_-p*k-m*y)*T,t[7]=(c*k-h*_+d*y)*T,t[8]=(a*A-u*M+l*C)*T,t[9]=(r*M-n*A-o*C)*T,t[10]=(p*x-v*_+m*g)*T,t[11]=(f*_-c*x-d*g)*T,t[12]=(u*E-a*P-s*C)*T,t[13]=(n*P-r*E+i*C)*T,t[14]=(v*y-p*w-b*g)*T,t[15]=(c*w-f*y+h*g)*T,t}},{}],40:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],b=e[13],m=e[14],g=e[15],y=n[0],_=n[1],w=n[2],x=n[3];return t[0]=y*r+_*u+w*f+x*v,t[1]=y*i+_*s+w*h+x*b,t[2]=y*o+_*l+w*d+x*m,t[3]=y*a+_*c+w*p+x*g,y=n[4],_=n[5],w=n[6],x=n[7],t[4]=y*r+_*u+w*f+x*v,t[5]=y*i+_*s+w*h+x*b,t[6]=y*o+_*l+w*d+x*m,t[7]=y*a+_*c+w*p+x*g,y=n[8],_=n[9],w=n[10],x=n[11],t[8]=y*r+_*u+w*f+x*v,t[9]=y*i+_*s+w*h+x*b,t[10]=y*o+_*l+w*d+x*m,t[11]=y*a+_*c+w*p+x*g,y=n[12],_=n[13],w=n[14],x=n[15],t[12]=y*r+_*u+w*f+x*v,t[13]=y*i+_*s+w*h+x*b,t[14]=y*o+_*l+w*d+x*m,t[15]=y*a+_*c+w*p+x*g,t}},{}],41:[function(t,e,n){!function(){function t(){var t=[].slice.call(arguments),e=null;function n(t){if(null==t);else if("string"==typeof t)e?e.appendChild(document.createTextNode(t)):t.split(/([\.#]?[a-zA-Z0-9_-]+)/).forEach(function(t){var n=t.substring(1,t.length);t&&(e?"."===t[0]?e.classList.add(n):"#"===t[0]&&e.setAttribute("id",n):e=document.createElement(t))});else if("number"==typeof t||"boolean"==typeof t||t instanceof Date||t instanceof RegExp)e.appendChild(document.createTextNode(t.toString()));else if(Array.isArray(t))t.forEach(n);else if(t instanceof HTMLElement)e.appendChild(t);else if("object"==typeof t)for(var r in t)if("function"==typeof t[r])e.addEventListener(r,t[r]);else if("style"===r)for(var i in t[r])e.style.setProperty(i,t[r][i]);else e.setAttribute(r,t[r])}for(;t.length;)n(t.shift());return e}"object"==typeof e?e.exports=t:this.h=t}()},{}],42:[function(t,e,n){var r=[],i=[],o="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function a(t,e){if(e=e||{},void 0===t)throw new Error(o);var n,a=!0===e.prepend?"prepend":"append",u=void 0!==e.container?e.container:document.querySelector("head"),s=r.indexOf(u);return-1===s&&(s=r.push(u)-1,i[s]={}),void 0!==i[s]&&void 0!==i[s][a]?n=i[s][a]:(n=i[s][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?u.insertBefore(n,u.childNodes[0]):u.appendChild(n)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),n.styleSheet?n.styleSheet.cssText+=t:n.textContent+=t,n}e.exports=a,e.exports.insertCss=a},{}],43:[function(t,e,n){var r,i;r=this,i=function(){function t(t,e){this.id=F++,this.type=t,this.data=e}function e(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(1<e.length&&n===r&&('"'===n||"'"===n))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,n.index)).concat(t(n[1])).concat(t(e.substr(n.index+n[0].length)));if(1===(n=e.split(".")).length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],r=0;r<n.length;++r)e=e.concat(t(n[r]));return e}(t).join("][")+"]"}function n(t){return"string"==typeof t?t.split():t}function r(t){return"string"==typeof t?document.querySelector(t):t}function i(t){var e,i,o,a,u=t||{};t={};var s=[],l=[],c="undefined"==typeof window?1:window.devicePixelRatio,f=!1,h=function(t){},d=function(){};if("string"==typeof u?e=document.querySelector(u):"object"==typeof u&&("string"==typeof u.nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?e=u:"function"==typeof u.drawArrays||"function"==typeof u.drawElements?o=(a=u).canvas:("gl"in u?a=u.gl:"canvas"in u?o=r(u.canvas):"container"in u&&(i=r(u.container)),"attributes"in u&&(t=u.attributes),"extensions"in u&&(s=n(u.extensions)),"optionalExtensions"in u&&(l=n(u.optionalExtensions)),"onDone"in u&&(h=u.onDone),"profile"in u&&(f=!!u.profile),"pixelRatio"in u&&(c=+u.pixelRatio))),e&&("canvas"===e.nodeName.toLowerCase()?o=e:i=e),!a){if(!o){if(!(e=function(t,e,n){function r(){var e=window.innerWidth,r=window.innerHeight;t!==document.body&&(e=(r=o.getBoundingClientRect()).right-r.left,r=r.bottom-r.top),o.width=n*e,o.height=n*r}var i,o=document.createElement("canvas");return I(o.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(o),t===document.body&&(o.style.position="absolute",I(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver(function(){setTimeout(r)})).observe(t):window.addEventListener("resize",r,!1),r(),{canvas:o,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",r),t.removeChild(o)}}}(i||document.body,0,c)))return null;o=e.canvas,d=e.onDestroy}void 0===t.premultipliedAlpha&&(t.premultipliedAlpha=!0),a=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,t)}return a?{gl:a,canvas:o,container:i,extensions:s,optionalExtensions:l,pixelRatio:c,profile:f,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function o(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function a(t){var e,n;return e=(65535<t)<<4,e|=n=(255<(t>>>=e))<<3,(e|=n=(15<(t>>>=n))<<2)|(n=(3<(t>>>=n))<<1)|t>>>n>>1}function u(){function t(t){t:{for(var e=16;268435456>=e;e*=16)if(t<=e){t=e;break t}t=0}return 0<(e=n[a(t)>>2]).length?e.pop():new ArrayBuffer(t)}function e(t){n[a(t.byteLength)>>2].push(t)}var n=o(8,function(){return[]});return{alloc:t,free:e,allocType:function(e,n){var r=null;switch(e){case 5120:r=new Int8Array(t(n),0,n);break;case 5121:r=new Uint8Array(t(n),0,n);break;case 5122:r=new Int16Array(t(2*n),0,n);break;case 5123:r=new Uint16Array(t(2*n),0,n);break;case 5124:r=new Int32Array(t(4*n),0,n);break;case 5125:r=new Uint32Array(t(4*n),0,n);break;case 5126:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){e(t.buffer)}}}function s(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||G(t.data))}function l(t,e,n,r,i,o){for(var a=0;a<e;++a)for(var u=t[a],s=0;s<n;++s)for(var l=u[s],c=0;c<r;++c)i[o++]=l[c]}function c(t){return 0|$[Object.prototype.toString.call(t)]}function f(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function h(t,e,n,r,i,o,a){for(var u=0,s=0;s<n;++s)for(var l=0;l<r;++l)t[u++]=e[i*s+o*l+a]}function d(t,e,n,r){function i(e){this.id=l++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function a(t,e,n,r,i,a){if(t.usage=n,Array.isArray(e)){if(t.dtype=r||5126,0<e.length)if(Array.isArray(e[0])){i=tt(e);for(var u=r=1;u<i.length;++u)r*=i[u];t.dimension=r,o(t,e=J(e,i,t.dtype),n),a?t.persistentData=e:Y.freeType(e)}else"number"==typeof e[0]?(t.dimension=i,f(i=Y.allocType(t.dtype,e.length),e),o(t,i,n),a?t.persistentData=i:Y.freeType(i)):G(e[0])&&(t.dimension=e[0].length,t.dtype=r||c(e[0])||5126,o(t,e=J(e,[e.length,e[0].length],t.dtype),n),a?t.persistentData=e:Y.freeType(e))}else if(G(e))t.dtype=r||c(e),t.dimension=i,o(t,e,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(s(e)){i=e.shape;var l=e.stride,d=(u=e.offset,0),p=0,v=0,b=0;1===i.length?(d=i[0],p=1,v=l[0],b=0):2===i.length&&(d=i[0],p=i[1],v=l[0],b=l[1]),t.dtype=r||c(e.data)||5126,t.dimension=p,h(i=Y.allocType(t.dtype,d*p),e.data,d,p,v,b,u),o(t,i,n),a?t.persistentData=i:Y.freeType(i)}else e instanceof ArrayBuffer&&(t.dtype=5121,t.dimension=i,o(t,e,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(e))))}function u(n){e.bufferCount--,r(n),t.deleteBuffer(n.buffer),n.buffer=null,delete d[n.id]}var l=0,d={};i.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){u(this)};var p=[];return n.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(d).forEach(function(e){t+=d[e].stats.size}),t}),{create:function(r,o,l,p){function v(e){var r=35044,i=null,o=0,u=0,l=1;return Array.isArray(e)||G(e)||s(e)||e instanceof ArrayBuffer?i=e:"number"==typeof e?o=0|e:e&&("data"in e&&(i=e.data),"usage"in e&&(r=Z[e.usage]),"type"in e&&(u=Q[e.type]),"dimension"in e&&(l=0|e.dimension),"length"in e&&(o=0|e.length)),b.bind(),i?a(b,i,r,u,l,p):(o&&t.bufferData(b.type,o,r),b.dtype=u||5121,b.usage=r,b.dimension=l,b.byteLength=o),n.profile&&(b.stats.size=b.byteLength*et[b.dtype]),v}e.bufferCount++;var b=new i(o);return d[b.id]=b,l||v(r),v._reglType="buffer",v._buffer=b,v.subdata=function(e,n){var r,i=0|(n||0);if(b.bind(),G(e)||e instanceof ArrayBuffer)t.bufferSubData(b.type,i,e);else if(Array.isArray(e)){if(0<e.length)if("number"==typeof e[0]){var o=Y.allocType(b.dtype,e.length);f(o,e),t.bufferSubData(b.type,i,o),Y.freeType(o)}else(Array.isArray(e[0])||G(e[0]))&&(r=tt(e),o=J(e,r,b.dtype),t.bufferSubData(b.type,i,o),Y.freeType(o))}else if(s(e)){r=e.shape;var a=e.stride,u=o=0,l=0,d=0;1===r.length?(o=r[0],u=1,l=a[0],d=0):2===r.length&&(o=r[0],u=r[1],l=a[0],d=a[1]),r=Array.isArray(e.data)?b.dtype:c(e.data),h(r=Y.allocType(r,o*u),e.data,o,u,l,d,e.offset),t.bufferSubData(b.type,i,r),Y.freeType(r)}return v},n.profile&&(v.stats=b.stats),v.destroy=function(){u(b)},v},createStream:function(t,e){var n=p.pop();return n||(n=new i(t)),n.bind(),a(n,e,35040,0,1,!1),n},destroyStream:function(t){p.push(t)},clear:function(){W(d).forEach(u),p.forEach(u)},getBuffer:function(t){return t&&t._buffer instanceof i?t._buffer:null},restore:function(){W(d).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:a}}function p(t,e,n,r){function i(t){this.id=l++,u[this.id]=this,this.buffer=t,this.primType=4,this.type=this.vertCount=0}function o(r,i,o,a,u,l,c){var f;if(r.buffer.bind(),i?((f=c)||G(i)&&(!s(i)||G(i.data))||(f=e.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,i,o,f,3)):(t.bufferData(34963,l,o),r.buffer.dtype=f||5121,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=l),f=c,!c){switch(r.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}r.buffer.dtype=f}r.type=f,0>(i=u)&&(i=r.buffer.byteLength,5123===f?i>>=1:5125===f&&(i>>=2)),r.vertCount=i,i=a,0>a&&(i=4,1===(a=r.buffer.dimension)&&(i=0),2===a&&(i=1),3===a&&(i=4)),r.primType=i}function a(t){r.elementsCount--,delete u[t.id],t.buffer.destroy(),t.buffer=null}var u={},l=0,c={uint8:5121,uint16:5123};e.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(t,e){function u(t){if(t)if("number"==typeof t)l(t),f.primType=4,f.vertCount=0|t,f.type=5121;else{var e=null,n=35044,r=-1,i=-1,a=0,h=0;Array.isArray(t)||G(t)||s(t)?e=t:("data"in t&&(e=t.data),"usage"in t&&(n=Z[t.usage]),"primitive"in t&&(r=nt[t.primitive]),"count"in t&&(i=0|t.count),"type"in t&&(h=c[t.type]),"length"in t?a=0|t.length:(a=i,5123===h||5122===h?a*=2:5125!==h&&5124!==h||(a*=4))),o(f,e,n,r,i,a,h)}else l(),f.primType=4,f.vertCount=0,f.type=5121;return u}var l=n.create(null,34963,!0),f=new i(l._buffer);return r.elementsCount++,u(t),u._reglType="elements",u._elements=f,u.subdata=function(t,e){return l.subdata(t,e),u},u.destroy=function(){a(f)},u},createStream:function(t){var e=f.pop();return e||(e=new i(n.create(null,34963,!0,!1)._buffer)),o(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){f.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){W(u).forEach(a)}}}function v(t){for(var e=Y.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(1/0===t[n])e[n]=31744;else if(-1/0===t[n])e[n]=64512;else{rt[0]=t[n];var r=(o=it[0])>>>31<<15,i=(o<<1>>>24)-127,o=o>>13&1023;e[n]=-24>i?r:-14>i?r+(o+1024>>-14-i):15<i?r+31744:r+(i+15<<10)+o}return e}function b(t){return Array.isArray(t)||G(t)}function m(t){return"[object "+t+"]"}function g(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function y(t){return!(!Array.isArray(t)||0===t.length||!b(t[0]))}function _(t){return Object.prototype.toString.call(t)}function w(t){if(!t)return!1;var e=_(t);return 0<=pt.indexOf(e)||(g(t)||y(t)||s(t))}function x(t,e){36193===t.type?(t.data=v(e),Y.freeType(e)):t.data=e}function k(t,e,n,r,i,o){if(t=void 0!==bt[t]?bt[t]:ut[t]*vt[e],o&&(t*=6),i){for(r=0;1<=n;)r+=t*n*n,n/=2;return r}return t*n*r}function C(t,e,n,r,i,o,a){function u(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function l(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function c(t,e){if("object"==typeof e&&e){"premultiplyAlpha"in e&&(t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(t.flipY=e.flipY),"alignment"in e&&(t.unpackAlignment=e.alignment),"colorSpace"in e&&(t.colorSpace=U[e.colorSpace]),"type"in e&&(t.type=q[e.type]);var n=t.width,r=t.height,i=t.channels,o=!1;"shape"in e?(n=e.shape[0],r=e.shape[1],3===e.shape.length&&(i=e.shape[2],o=!0)):("radius"in e&&(n=r=e.radius),"width"in e&&(n=e.width),"height"in e&&(r=e.height),"channels"in e&&(i=e.channels,o=!0)),t.width=0|n,t.height=0|r,t.channels=0|i,n=!1,"format"in e&&(n=e.format,r=t.internalformat=H[n],t.format=it[r],n in q&&!("type"in e)&&(t.type=q[n]),n in K&&(t.compressed=!0),n=!0),!o&&n?t.channels=ut[t.format]:o&&!n&&t.channels!==at[t.format]&&(t.format=t.internalformat=at[t.channels])}}function f(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function h(){u.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(t,e){var n=null;if(w(e)?n=e:e&&(c(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),w(e.data)&&(n=e.data)),e.copy){var r=i.viewportWidth,o=i.viewportHeight;t.width=t.width||r-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0}else if(n){if(G(n))t.channels=t.channels||4,t.data=n,"type"in e||5121!==t.type||(t.type=0|$[Object.prototype.toString.call(n)]);else if(g(n)){switch(t.channels=t.channels||4,o=(r=n).length,t.type){case 5121:case 5123:case 5125:case 5126:(o=Y.allocType(t.type,o)).set(r),t.data=o;break;case 36193:t.data=v(r)}t.alignment=1,t.needsFree=!0}else if(s(n)){r=n.data,Array.isArray(r)||5121!==t.type||(t.type=0|$[Object.prototype.toString.call(r)]);o=n.shape;var a,u,l,f,h=n.stride;3===o.length?(l=o[2],f=h[2]):f=l=1,a=o[0],u=o[1],o=h[0],h=h[1],t.alignment=1,t.width=a,t.height=u,t.channels=l,t.format=t.internalformat=at[l],t.needsFree=!0,a=f,n=n.offset,l=t.width,f=t.height,u=t.channels;for(var d=Y.allocType(36193===t.type?5126:t.type,l*f*u),p=0,m=0;m<f;++m)for(var k=0;k<l;++k)for(var C=0;C<u;++C)d[p++]=r[o*k+h*m+a*C+n];x(t,d)}else if(_(n)===st||_(n)===lt||_(n)===ct)_(n)===st||_(n)===lt?t.element=n:t.element=n.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(_(n)===ft)t.element=n,t.width=n.width,t.height=n.height,t.channels=4;else if(_(n)===ht)t.element=n,t.width=n.naturalWidth,t.height=n.naturalHeight,t.channels=4;else if(_(n)===dt)t.element=n,t.width=n.videoWidth,t.height=n.videoHeight,t.channels=4;else if(y(n)){for(r=t.width||n[0].length,o=t.height||n.length,h=t.channels,h=b(n[0][0])?h||n[0][0].length:h||1,a=X.shape(n),l=1,f=0;f<a.length;++f)l*=a[f];l=Y.allocType(36193===t.type?5126:t.type,l),X.flatten(n,a,"",l),x(t,l),t.alignment=1,t.width=r,t.height=o,t.channels=h,t.format=t.internalformat=at[h],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4}function p(e,n,i,o,a){var u=e.element,s=e.data,l=e.internalformat,c=e.format,h=e.type,d=e.width,p=e.height;f(e),u?t.texSubImage2D(n,a,i,o,c,h,u):e.compressed?t.compressedTexSubImage2D(n,a,i,o,l,d,p,s):e.needsCopy?(r(),t.copyTexSubImage2D(n,a,i,o,e.xOffset,e.yOffset,d,p)):t.texSubImage2D(n,a,i,o,d,p,c,h,s)}function m(){return pt.pop()||new h}function C(t){t.needsFree&&Y.freeType(t.data),h.call(t),pt.push(t)}function E(t,e,n){var r=t.images[0]=m();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function M(t,e){var n=null;if(w(e))l(n=t.images[0]=m(),t),d(n,e),t.mipmask=1;else if(c(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)l(n=t.images[i]=m(),t),n.width>>=i,n.height>>=i,d(n,r[i]),t.mipmask|=1<<i;else l(n=t.images[0]=m(),t),d(n,e),t.mipmask=1;l(t,t.images[0])}function P(e,n){for(var i=e.images,o=0;o<i.length&&i[o];++o){var a=i[o],u=n,s=o,l=a.element,c=a.data,h=a.internalformat,d=a.format,p=a.type,v=a.width,b=a.height;f(a),l?t.texImage2D(u,s,d,d,p,l):a.compressed?t.compressedTexImage2D(u,s,h,v,b,0,c):a.needsCopy?(r(),t.copyTexImage2D(u,s,d,a.xOffset,a.yOffset,v,b,0)):t.texImage2D(u,s,d,v,b,0,d,p,c||null)}}function A(){var t=vt.pop()||new function(){u.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)};u.call(t);for(var e=t.mipmask=0;16>e;++e)t.images[e]=null;return t}function S(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&C(e[n]),e[n]=null;vt.push(t)}function T(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function O(t,e){"min"in e&&(t.minFilter=F[e.min],0<=ot.indexOf(t.minFilter)&&!("faces"in e)&&(t.genMipmaps=!0)),"mag"in e&&(t.magFilter=B[e.mag]);var n=t.wrapS,r=t.wrapT;if("wrap"in e){var i=e.wrap;"string"==typeof i?n=r=R[i]:Array.isArray(i)&&(n=R[i[0]],r=R[i[1]])}else"wrapS"in e&&(n=R[e.wrapS]),"wrapT"in e&&(r=R[e.wrapT]);if(t.wrapS=n,t.wrapT=r,"anisotropic"in e&&(t.anisotropic=e.anisotropic),"mipmap"in e){switch(n=!1,typeof e.mipmap){case"string":t.mipmapHint=z[e.mipmap],n=t.genMipmaps=!0;break;case"boolean":n=t.genMipmaps=e.mipmap;break;case"object":t.genMipmaps=!1,n=!0}!n||"min"in e||(t.minFilter=9984)}}function V(n,r){t.texParameteri(r,10241,n.minFilter),t.texParameteri(r,10240,n.magFilter),t.texParameteri(r,10242,n.wrapS),t.texParameteri(r,10243,n.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(t.hint(33170,n.mipmapHint),t.generateMipmap(r))}function j(e){u.call(this),this.mipmask=0,this.internalformat=6408,this.id=bt++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new T,a.profile&&(this.stats={size:0})}function D(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function N(){var e=yt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function L(e){var n=e.texture,r=e.unit,i=e.target;0<=r&&(t.activeTexture(33984+r),t.bindTexture(i,null),yt[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete mt[e.id],o.textureCount--}var z={"don't care":4352,"dont care":4352,nice:4354,fast:4353},R={repeat:10497,clamp:33071,mirror:33648},B={nearest:9728,linear:9729},F=I({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},B),U={none:0,browser:37444},q={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},H={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},K={};e.ext_srgb&&(H.srgb=35904,H.srgba=35906),e.oes_texture_float&&(q.float32=q.float=5126),e.oes_texture_half_float&&(q.float16=q["half float"]=36193),e.webgl_depth_texture&&(I(H,{depth:6402,"depth stencil":34041}),I(q,{uint16:5123,uint32:5125,"depth stencil":34042})),e.webgl_compressed_texture_s3tc&&I(K,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),e.webgl_compressed_texture_atc&&I(K,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),e.webgl_compressed_texture_pvrtc&&I(K,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),e.webgl_compressed_texture_etc1&&(K["rgb etc1"]=36196);var Q=Array.prototype.slice.call(t.getParameter(34467));Object.keys(K).forEach(function(t){var e=K[t];0<=Q.indexOf(e)&&(H[t]=e)});var Z=Object.keys(H);n.textureFormats=Z;var J=[];Object.keys(H).forEach(function(t){J[H[t]]=t});var tt=[];Object.keys(q).forEach(function(t){tt[q[t]]=t});var et=[];Object.keys(B).forEach(function(t){et[B[t]]=t});var nt=[];Object.keys(F).forEach(function(t){nt[F[t]]=t});var rt=[];Object.keys(R).forEach(function(t){rt[R[t]]=t});var it=Z.reduce(function(t,n){var r=H[n];return 6409===r||6406===r||6409===r||6410===r||6402===r||34041===r||e.ext_srgb&&(35904===r||35906===r)?t[r]=r:32855===r||0<=n.indexOf("rgba")?t[r]=6408:t[r]=6407,t},{}),pt=[],vt=[],bt=0,mt={},gt=n.maxTextureUnits,yt=Array(gt).map(function(){return null});return I(j.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var n=0;n<gt;++n){var r=yt[n];if(r){if(0<r.bindCount)continue;r.unit=-1}yt[n]=this,e=n;break}a.profile&&o.maxTextureUnits<e+1&&(o.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&L(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(mt).forEach(function(e){t+=mt[e].stats.size}),t}),{create2D:function(e,n){function r(t,e){var n=i.texInfo;T.call(n);var o=A();return"number"==typeof t?E(o,0|t,"number"==typeof e?0|e:0|t):t?(O(n,t),M(o,t)):E(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),i.mipmask=o.mipmask,l(i,o),i.internalformat=o.internalformat,r.width=o.width,r.height=o.height,D(i),P(o,3553),V(n,3553),N(),S(o),a.profile&&(i.stats.size=k(i.internalformat,i.type,o.width,o.height,n.genMipmaps,!1)),r.format=J[i.internalformat],r.type=tt[i.type],r.mag=et[n.magFilter],r.min=nt[n.minFilter],r.wrapS=rt[n.wrapS],r.wrapT=rt[n.wrapT],r}var i=new j(3553);return mt[i.id]=i,o.textureCount++,r(e,n),r.subimage=function(t,e,n,o){e|=0,n|=0,o|=0;var a=m();return l(a,i),a.width=0,a.height=0,d(a,t),a.width=a.width||(i.width>>o)-e,a.height=a.height||(i.height>>o)-n,D(i),p(a,3553,e,n,o),N(),C(a),r},r.resize=function(e,n){var o=0|e,u=0|n||o;if(o===i.width&&u===i.height)return r;r.width=i.width=o,r.height=i.height=u,D(i);for(var s=0;i.mipmask>>s;++s){var l=o>>s,c=u>>s;if(!l||!c)break;t.texImage2D(3553,s,i.format,l,c,0,i.format,i.type,null)}return N(),a.profile&&(i.stats.size=k(i.internalformat,i.type,o,u,!1,!1)),r},r._reglType="texture2d",r._texture=i,a.profile&&(r.stats=i.stats),r.destroy=function(){i.decRef()},r},createCube:function(e,n,r,i,u,s){function f(t,e,n,r,i,o){var u,s=h.texInfo;for(T.call(s),u=0;6>u;++u)v[u]=A();if("number"!=typeof t&&t){if("object"==typeof t)if(e)M(v[0],t),M(v[1],e),M(v[2],n),M(v[3],r),M(v[4],i),M(v[5],o);else if(O(s,t),c(h,t),"faces"in t)for(t=t.faces,u=0;6>u;++u)l(v[u],h),M(v[u],t[u]);else for(u=0;6>u;++u)M(v[u],t)}else for(t=0|t||1,u=0;6>u;++u)E(v[u],t,t);for(l(h,v[0]),h.mipmask=s.genMipmaps?(v[0].width<<1)-1:v[0].mipmask,h.internalformat=v[0].internalformat,f.width=v[0].width,f.height=v[0].height,D(h),u=0;6>u;++u)P(v[u],34069+u);for(V(s,34067),N(),a.profile&&(h.stats.size=k(h.internalformat,h.type,f.width,f.height,s.genMipmaps,!0)),f.format=J[h.internalformat],f.type=tt[h.type],f.mag=et[s.magFilter],f.min=nt[s.minFilter],f.wrapS=rt[s.wrapS],f.wrapT=rt[s.wrapT],u=0;6>u;++u)S(v[u]);return f}var h=new j(34067);mt[h.id]=h,o.cubeCount++;var v=Array(6);return f(e,n,r,i,u,s),f.subimage=function(t,e,n,r,i){n|=0,r|=0,i|=0;var o=m();return l(o,h),o.width=0,o.height=0,d(o,e),o.width=o.width||(h.width>>i)-n,o.height=o.height||(h.height>>i)-r,D(h),p(o,34069+t,n,r,i),N(),C(o),f},f.resize=function(e){if((e|=0)!==h.width){f.width=h.width=e,f.height=h.height=e,D(h);for(var n=0;6>n;++n)for(var r=0;h.mipmask>>r;++r)t.texImage2D(34069+n,r,h.format,e>>r,e>>r,0,h.format,h.type,null);return N(),a.profile&&(h.stats.size=k(h.internalformat,h.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=h,a.profile&&(f.stats=h.stats),f.destroy=function(){h.decRef()},f},clear:function(){for(var e=0;e<gt;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),yt[e]=null;W(mt).forEach(L),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){for(var e=0;e<gt;++e){var n=yt[e];n&&(n.bindCount=0,n.unit=-1,yt[e]=null)}W(mt).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;32>n;++n)if(0!=(e.mipmask&1<<n))if(3553===e.target)t.texImage2D(3553,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;6>r;++r)t.texImage2D(34069+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);V(e.texInfo,e.target)})},refresh:function(){for(var e=0;e<gt;++e){var n=yt[e];n&&(n.bindCount=0,n.unit=-1,yt[e]=null),t.activeTexture(33984+e),t.bindTexture(3553,null),t.bindTexture(34067,null)}}}}function E(t,e,n,r,i,o){function a(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=t=0;e?(t=e.width,r=e.height):n&&(t=n.width,r=n.height),this.width=t,this.height=r}function u(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function s(t,e,n){t&&(t.texture?t.texture._texture.refCount+=1:t.renderbuffer._renderbuffer.refCount+=1)}function l(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=3553,n=null,r=null,i=t;return"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),"texture2d"===(t=i._reglType)?n=i:"textureCube"===t?n=i:"renderbuffer"===t&&(r=i,e=36161),new a(e,n,r)}function f(t,e,n,o,u){return n?((t=r.create2D({width:t,height:e,format:o,type:u}))._texture.refCount=0,new a(3553,t,null)):((t=i.create({width:t,height:e,format:o}))._renderbuffer.refCount=0,new a(36161,null,t))}function h(t){return t&&(t.texture||t.renderbuffer)}function d(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}function p(){this.id=k++,C[this.id]=this,this.framebuffer=t.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function v(t){t.colorAttachments.forEach(u),u(t.depthAttachment),u(t.stencilAttachment),u(t.depthStencilAttachment)}function b(e){t.deleteFramebuffer(e.framebuffer),e.framebuffer=null,o.framebufferCount--,delete C[e.id]}function m(e){var r;t.bindFramebuffer(36160,e.framebuffer);var i=e.colorAttachments;for(r=0;r<i.length;++r)l(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(36160,36064+r,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),l(36096,e.depthAttachment),l(36128,e.stencilAttachment),l(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.isContextLost(),t.bindFramebuffer(36160,y.next?y.next.framebuffer:null),y.cur=y.next,t.getError()}function g(t,e){function n(t,e){var i,o=0,a=0,u=!0,l=!0;i=null;var d=!0,p="rgba",b="uint8",g=1,y=null,x=null,k=null,C=!1;"number"==typeof t?(o=0|t,a=0|e||o):t?("shape"in t?(o=(a=t.shape)[0],a=a[1]):("radius"in t&&(o=a=t.radius),"width"in t&&(o=t.width),"height"in t&&(a=t.height)),("color"in t||"colors"in t)&&(i=t.color||t.colors,Array.isArray(i)),i||("colorCount"in t&&(g=0|t.colorCount),"colorTexture"in t&&(d=!!t.colorTexture,p="rgba4"),"colorType"in t&&(b=t.colorType,!d)&&("half float"===b||"float16"===b?p="rgba16f":"float"!==b&&"float32"!==b||(p="rgba32f")),"colorFormat"in t&&(p=t.colorFormat,0<=_.indexOf(p)?d=!0:0<=w.indexOf(p)&&(d=!1))),("depthTexture"in t||"depthStencilTexture"in t)&&(C=!(!t.depthTexture&&!t.depthStencilTexture)),"depth"in t&&("boolean"==typeof t.depth?u=t.depth:(y=t.depth,l=!1)),"stencil"in t&&("boolean"==typeof t.stencil?l=t.stencil:(x=t.stencil,u=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?u=l=t.depthStencil:(k=t.depthStencil,l=u=!1))):o=a=1;var E=null,M=null,P=null,A=null;if(Array.isArray(i))E=i.map(c);else if(i)E=[c(i)];else for(E=Array(g),i=0;i<g;++i)E[i]=f(o,a,d,p,b);for(o=o||E[0].width,a=a||E[0].height,y?M=c(y):u&&!l&&(M=f(o,a,C,"depth","uint32")),x?P=c(x):l&&!u&&(P=f(o,a,!1,"stencil","uint8")),k?A=c(k):!y&&!x&&l&&u&&(A=f(o,a,C,"depth stencil","depth stencil")),u=null,i=0;i<E.length;++i)s(E[i]),E[i]&&E[i].texture&&(l=yt[E[i].texture._texture.format]*_t[E[i].texture._texture.type],null===u&&(u=l));return s(M),s(P),s(A),v(r),r.width=o,r.height=a,r.colorAttachments=E,r.depthAttachment=M,r.stencilAttachment=P,r.depthStencilAttachment=A,n.color=E.map(h),n.depth=h(M),n.stencil=h(P),n.depthStencil=h(A),n.width=r.width,n.height=r.height,m(r),n}var r=new p;return o.framebufferCount++,n(t,e),I(n,{resize:function(t,e){var i=Math.max(0|t,1),o=Math.max(0|e||i,1);if(i===r.width&&o===r.height)return n;for(var a=r.colorAttachments,u=0;u<a.length;++u)d(a[u],i,o);return d(r.depthAttachment,i,o),d(r.stencilAttachment,i,o),d(r.depthStencilAttachment,i,o),r.width=n.width=i,r.height=n.height=o,m(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){b(r),v(r)},use:function(t){y.setFBO({framebuffer:n},t)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},_=["rgba"],w=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&w.push("srgba"),e.ext_color_buffer_half_float&&w.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&w.push("rgba32f");var x=["uint8"];e.oes_texture_half_float&&x.push("half float","float16"),e.oes_texture_float&&x.push("float","float32");var k=0,C={};return I(y,{getFramebuffer:function(t){return"function"==typeof t&&"framebuffer"===t._reglType&&(t=t._framebuffer)instanceof p?t:null},create:g,createCube:function(t){function e(t){var i,o={color:null},a=0,u=null;i="rgba";var s="uint8",l=1;if("number"==typeof t?a=0|t:t?("shape"in t?a=t.shape[0]:("radius"in t&&(a=0|t.radius),"width"in t?a=0|t.width:"height"in t&&(a=0|t.height)),("color"in t||"colors"in t)&&(u=t.color||t.colors,Array.isArray(u)),u||("colorCount"in t&&(l=0|t.colorCount),"colorType"in t&&(s=t.colorType),"colorFormat"in t&&(i=t.colorFormat)),"depth"in t&&(o.depth=t.depth),"stencil"in t&&(o.stencil=t.stencil),"depthStencil"in t&&(o.depthStencil=t.depthStencil)):a=1,u)if(Array.isArray(u))for(t=[],i=0;i<u.length;++i)t[i]=u[i];else t=[u];else for(t=Array(l),u={radius:a,format:i,type:s},i=0;i<l;++i)t[i]=r.createCube(u);for(o.color=Array(t.length),i=0;i<t.length;++i)l=t[i],a=a||l.width,o.color[i]={target:34069,data:t[i]};for(i=0;6>i;++i){for(l=0;l<t.length;++l)o.color[l].target=34069+i;0<i&&(o.depth=n[0].depth,o.stencil=n[0].stencil,o.depthStencil=n[0].depthStencil),n[i]?n[i](o):n[i]=g(o)}return I(e,{width:a,height:a,color:t})}var n=Array(6);return e(t),I(e,{faces:n,resize:function(t){var r=0|t;if(r===e.width)return e;var i=e.color;for(t=0;t<i.length;++t)i[t].resize(r);for(t=0;6>t;++t)n[t].resize(r);return e.width=e.height=r,e},_reglType:"framebufferCube",destroy:function(){n.forEach(function(t){t.destroy()})}})},clear:function(){W(C).forEach(b)},restore:function(){y.cur=null,y.next=null,y.dirty=!0,W(C).forEach(function(e){e.framebuffer=t.createFramebuffer(),m(e)})}})}function M(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(t,e,n,r,i,o,a){function u(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var t=e.oes_vertex_array_object;this.vao=t?t.createVertexArrayOES():null,h[this.id]=this,this.buffers=[]}var l=n.maxAttributes,c=Array(l);for(n=0;n<l;++n)c[n]=new M;var f=0,h={},d={Record:M,scope:{},state:c,currentVAO:null,targetVAO:null,restore:e.oes_vertex_array_object?function(){e.oes_vertex_array_object&&W(h).forEach(function(t){t.refresh()})}:function(){},createVAO:function(t){function e(t){var r;Array.isArray(t)?(r=t,n.elements&&n.ownsElements&&n.elements.destroy(),n.elements=null,n.ownsElements=!1,n.offset=0,n.count=0,n.instances=-1,n.primitive=4):(t.elements?(r=t.elements,n.ownsElements?("function"==typeof r&&"elements"===r._reglType?n.elements.destroy():n.elements(r),n.ownsElements=!1):o.getElements(t.elements)?(n.elements=t.elements,n.ownsElements=!1):(n.elements=o.create(t.elements),n.ownsElements=!0)):(n.elements=null,n.ownsElements=!1),r=t.attributes,n.offset=0,n.count=-1,n.instances=-1,n.primitive=4,n.elements&&(n.count=n.elements._elements.vertCount,n.primitive=n.elements._elements.primType),"offset"in t&&(n.offset=0|t.offset),"count"in t&&(n.count=0|t.count),"instances"in t&&(n.instances=0|t.instances),"primitive"in t&&(n.primitive=nt[t.primitive])),t={};var a=n.attributes;a.length=r.length;for(var u=0;u<r.length;++u){var l,c=r[u],f=a[u]=new M,h=c.data||c;if(Array.isArray(h)||G(h)||s(h))n.buffers[u]&&(l=n.buffers[u],G(h)&&l._buffer.byteLength>=h.byteLength?l.subdata(h):(l.destroy(),n.buffers[u]=null)),n.buffers[u]||(l=n.buffers[u]=i.create(c,34962,!1,!0)),f.buffer=i.getBuffer(l),f.size=0|f.buffer.dimension,f.normalized=!1,f.type=f.buffer.dtype,f.offset=0,f.stride=0,f.divisor=0,f.state=1,t[u]=1;else i.getBuffer(c)?(f.buffer=i.getBuffer(c),f.size=0|f.buffer.dimension,f.normalized=!1,f.type=f.buffer.dtype,f.offset=0,f.stride=0,f.divisor=0,f.state=1):i.getBuffer(c.buffer)?(f.buffer=i.getBuffer(c.buffer),f.size=0|(+c.size||f.buffer.dimension),f.normalized=!!c.normalized||!1,f.type="type"in c?Q[c.type]:f.buffer.dtype,f.offset=0|(c.offset||0),f.stride=0|(c.stride||0),f.divisor=0|(c.divisor||0),f.state=1):"x"in c&&(f.x=+c.x||0,f.y=+c.y||0,f.z=+c.z||0,f.w=+c.w||0,f.state=2)}for(l=0;l<n.buffers.length;++l)!t[l]&&n.buffers[l]&&(n.buffers[l].destroy(),n.buffers[l]=null);return n.refresh(),e}var n=new u;return r.vaoCount+=1,e.destroy=function(){for(var t=0;t<n.buffers.length;++t)n.buffers[t]&&n.buffers[t].destroy();n.buffers.length=0,n.ownsElements&&(n.elements.destroy(),n.elements=null,n.ownsElements=!1),n.destroy()},e._vao=n,e._reglType="vao",e(t)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(e){for(var n=0;n<c.length;++n){var r=c[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}},setVAO:e.oes_vertex_array_object?function(t){if(t!==d.currentVAO){var n=e.oes_vertex_array_object;t?n.bindVertexArrayOES(t.vao):n.bindVertexArrayOES(null),d.currentVAO=t}}:function(n){if(n!==d.currentVAO){if(n)n.bindAttrs();else{for(var r=e.angle_instanced_arrays,i=0;i<c.length;++i){var o=c[i];o.buffer?(t.enableVertexAttribArray(i),o.buffer.bind(),t.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offfset),r&&o.divisor&&r.vertexAttribDivisorANGLE(i,o.divisor)):(t.disableVertexAttribArray(i),t.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}a.elements?t.bindBuffer(34963,a.elements.buffer.buffer):t.bindBuffer(34963,null)}d.currentVAO=n}},clear:e.oes_vertex_array_object?function(){W(h).forEach(function(t){t.destroy()})}:function(){}};return u.prototype.bindAttrs=function(){for(var n=e.angle_instanced_arrays,r=this.attributes,i=0;i<r.length;++i){var a=r[i];a.buffer?(t.enableVertexAttribArray(i),t.bindBuffer(34962,a.buffer.buffer),t.vertexAttribPointer(i,a.size,a.type,a.normalized,a.stride,a.offset),n&&a.divisor&&n.vertexAttribDivisorANGLE(i,a.divisor)):(t.disableVertexAttribArray(i),t.vertexAttrib4f(i,a.x,a.y,a.z,a.w))}for(n=r.length;n<l;++n)t.disableVertexAttribArray(n);(n=o.getElements(this.elements))?t.bindBuffer(34963,n.buffer.buffer):t.bindBuffer(34963,null)},u.prototype.refresh=function(){var t=e.oes_vertex_array_object;t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),d.currentVAO=null,t.bindVertexArrayOES(null))},u.prototype.destroy=function(){if(this.vao){var t=e.oes_vertex_array_object;this===d.currentVAO&&(d.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),h[this.id]&&(delete h[this.id],--r.vaoCount)},d}function A(t,e,n,r){function i(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function a(n,r,i){if(!(a=(i=35632===n?l:c)[r])){var o=e.str(r),a=t.createShader(n);t.shaderSource(a,o),t.compileShader(a),i[r]=a}return a}function u(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(n,u,s){var l;l=a(35632,n.fragId);var c=a(35633,n.vertId);if(u=n.program=t.createProgram(),t.attachShader(u,l),t.attachShader(u,c),s)for(l=0;l<s.length;++l)c=s[l],t.bindAttribLocation(u,c[0],c[1]);t.linkProgram(u),c=t.getProgramParameter(u,35718),r.profile&&(n.stats.uniformsCount=c);var f=n.uniforms;for(l=0;l<c;++l)if(s=t.getActiveUniform(u,l)){if(1<s.size)for(var h=0;h<s.size;++h){var d=s.name.replace("[0]","["+h+"]");o(f,new i(d,e.id(d),t.getUniformLocation(u,d),s))}h=s.name,1<s.size&&(h=h.replace("[0]","")),o(f,new i(h,e.id(h),t.getUniformLocation(u,h),s))}for(c=t.getProgramParameter(u,35721),r.profile&&(n.stats.attributesCount=c),n=n.attributes,l=0;l<c;++l)(s=t.getActiveAttrib(u,l))&&o(n,new i(s.name,e.id(s.name),t.getAttribLocation(u,s.name),s))}var l={},c={},f={},h=[],d=0;return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);W(l).forEach(e),l={},W(c).forEach(e),c={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,f={},n.shaderCount=0},program:function(e,r,i,o){var a=f[r];a||(a=f[r]={});var d=a[e];if(d&&(d.refCount++,!o))return d;var p=new u(r,e);return n.shaderCount++,s(p,i,o),d||(a[e]=p),h.push(p),I(p,{destroy:function(){if(p.refCount--,0>=p.refCount){t.deleteProgram(p.program);var e=h.indexOf(p);h.splice(e,1),n.shaderCount--}0>=a[p.vertId].refCount&&(t.deleteShader(c[p.vertId]),delete c[p.vertId],delete f[p.fragId][p.vertId]),Object.keys(f[p.fragId]).length||(t.deleteShader(l[p.fragId]),delete l[p.fragId],delete f[p.fragId])}})},restore:function(){l={},c={};for(var t=0;t<h.length;++t)s(h[t],null,h[t].attributes.map(function(t){return[t.location,t.name]}))},shader:a,frag:-1,vert:-1}}function S(t,e,n,r,i,o,a){function u(i){var o;o=null===e.next?5121:e.next.colorAttachments[0].texture._texture.type;var a=0,u=0,s=r.framebufferWidth,l=r.framebufferHeight,c=null;return G(i)?c=i:i&&(a=0|i.x,u=0|i.y,s=0|(i.width||r.framebufferWidth-a),l=0|(i.height||r.framebufferHeight-u),c=i.data||null),n(),i=s*l*4,c||(5121===o?c=new Uint8Array(i):5126===o&&(c=c||new Float32Array(i))),t.pixelStorei(3333,4),t.readPixels(a,u,s,l,6408,o,c),c}return function(t){return t&&"framebuffer"in t?function(t){var n;return e.setFBO({framebuffer:t.framebuffer},function(){n=u(t)}),n}(t):u(t)}}function T(t){return Array.prototype.slice.call(t)}function O(t){return T(t).join("")}function V(t){return Array.isArray(t)||G(t)||s(t)}function j(t){return t.sort(function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1})}function D(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function N(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function L(t){return new D(!1,!1,!1,t)}function z(t,e){var n=t.type;if(0===n)return new D(!0,1<=(n=t.data.length),2<=n,e);if(4===n)return new D((n=t.data).thisDep,n.contextDep,n.propDep,e);if(5===n)return new D(!1,!1,!1,e);if(6===n){for(var r=n=!1,i=!1,o=0;o<t.data.length;++o){var a=t.data[o];1===a.type?i=!0:2===a.type?r=!0:3===a.type?n=!0:0===a.type?(n=!0,1<=(a=a.data)&&(r=!0),2<=a&&(i=!0)):4===a.type&&(n=n||a.data.thisDep,r=r||a.data.contextDep,i=i||a.data.propDep)}return new D(n,r,i,e)}return new D(3===n,2===n,1===n,e)}function R(t,e,n,r,i,a,u,s,l,c,f,h,d,p,v){function m(t){return t.replace(".","_")}function g(t,e,n){var r=m(t);at.push(t),ot[r]=it[r]=!!n,ut[r]=e}function y(t,e,n){var r=m(t);at.push(t),Array.isArray(n)?(it[r]=n.slice(),ot[r]=n.slice()):it[r]=ot[r]=n,st[r]=e}function _(){var t=function(){function t(){var t=[],e=[];return I(function(){t.push.apply(t,T(arguments))},{def:function(){var r="v"+n++;return e.push(r),0<arguments.length&&(t.push(r,"="),t.push.apply(t,T(arguments)),t.push(";")),r},toString:function(){return O([0<e.length?"var "+e.join(",")+";":"",O(t)])}})}function e(){function e(t,e){r(t,e,"=",n.def(t,e),";")}var n=t(),r=t(),i=n.toString,o=r.toString;return I(function(){n.apply(n,T(arguments))},{def:n.def,entry:n,exit:r,save:e,set:function(t,r,i){e(t,r),n(t,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=t(),a={};return{global:o,link:function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return r[e];return e="g"+n++,r.push(e),i.push(t),e},block:t,proc:function(t,n){function r(){var t="a"+i.length;return i.push(t),t}var i=[];n=n||0;for(var o=0;o<n;++o)r();var u=(o=e()).toString;return a[t]=I(o,{arg:r,toString:function(){return O(["function(",i.join(),"){",u(),"}"])}})},scope:e,cond:function(){var t=O(arguments),n=e(),r=e(),i=n.toString,o=r.toString;return I(n,{then:function(){return n.apply(n,T(arguments)),this},else:function(){return r.apply(r,T(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),O(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',o,"return {"];Object.keys(a).forEach(function(e){t.push('"',e,'":',a[e].toString(),",")}),t.push("}");var e=O(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(e)).apply(null,i)}}}(),n=t.link,r=t.global;t.id=ft++,t.batchId="0";var i=n(lt),o=t.shared={props:"a0"};Object.keys(lt).forEach(function(t){o[t]=r.def(i,".",t)});var a=t.next={},u=t.current={};Object.keys(st).forEach(function(t){Array.isArray(it[t])&&(a[t]=r.def(o.next,".",t),u[t]=r.def(o.current,".",t))});var s=t.constants={};Object.keys(ct).forEach(function(t){s[t]=r.def(JSON.stringify(ct[t]))}),t.invoke=function(e,r){switch(r.type){case 0:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return e.def(o.props,r.data);case 2:return e.def(o.context,r.data);case 3:return e.def("this",r.data);case 4:return r.data.append(t,e),r.data.ref;case 5:return r.data.toString();case 6:return r.data.map(function(n){return t.invoke(e,n)})}},t.attribCache={};var l={};return t.scopeAttrib=function(t){if((t=e.id(t))in l)return l[t];var r=c.scope[t];return r||(r=c.scope[t]=new Z),l[t]=n(r)},t}function w(t,e){var n=t.static,r=t.dynamic;if("framebuffer"in n){var i=n.framebuffer;return i?(i=s.getFramebuffer(i),L(function(t,e){var n=t.link(i),r=t.shared;return e.set(r.framebuffer,".next",n),r=r.context,e.set(r,".framebufferWidth",n+".width"),e.set(r,".framebufferHeight",n+".height"),n})):L(function(t,e){var n=t.shared;return e.set(n.framebuffer,".next","null"),n=n.context,e.set(n,".framebufferWidth",n+".drawingBufferWidth"),e.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})}if("framebuffer"in r){var o=r.framebuffer;return z(o,function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer;n=e.def(i,".getFramebuffer(",n,")");return e.set(i,".next",n),r=r.context,e.set(r,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),e.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n})}return null}function x(t,n,r){function i(t){if(t in o){var n=e.id(o[t]);return(t=L(function(){return n})).id=n,t}if(t in a){var r=a[t];return z(r,function(t,e){var n=t.invoke(e,r);return e.def(t.shared.strings,".id(",n,")")})}return null}var o=t.static,a=t.dynamic,u=i("frag"),s=i("vert"),l=null;return N(u)&&N(s)?(l=f.program(s.id,u.id,null,r),t=L(function(t,e){return t.link(l)})):t=new D(u&&u.thisDep||s&&s.thisDep,u&&u.contextDep||s&&s.contextDep,u&&u.propDep||s&&s.propDep,function(t,e){var n,r,i=t.shared.shader;return n=u?u.append(t,e):e.def(i,".","frag"),r=s?s.append(t,e):e.def(i,".","vert"),e.def(i+".program("+r+","+n+")")}),{frag:u,vert:s,progVar:t,program:l}}function k(t,e){function n(t,e){if(t in r){var n=0|r[t];return e?o.offset=n:o.instances=n,L(function(t,r){return e&&(t.OFFSET=n),n})}if(t in i){var a=i[t];return z(a,function(t,n){var r=t.invoke(n,a);return e&&(t.OFFSET=r),r})}if(e){if(l)return L(function(t,e){return t.OFFSET=0});if(u)return new D(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.offset:0")})}else if(u)return new D(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.instances:-1")});return null}var r=t.static,i=t.dynamic,o={},u=!1,s=function(){if("vao"in r){var t=r.vao;return null!==t&&null===c.getVAO(t)&&(t=c.createVAO(t)),u=!0,o.vao=t,L(function(e){var n=c.getVAO(t);return n?e.link(n):"null"})}if("vao"in i){u=!0;var e=i.vao;return z(e,function(t,n){var r=t.invoke(n,e);return n.def(t.shared.vao+".getVAO("+r+")")})}return null}(),l=!1,f=function(){if("elements"in r){var t=r.elements;if(o.elements=t,V(t)){var e=o.elements=a.create(t,!0);t=a.getElements(e);l=!0}else t&&(t=a.getElements(t),l=!0);return(e=L(function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r}return e.ELEMENTS=null})).value=t,e}if("elements"in i){l=!0;var n=i.elements;return z(n,function(t,e){var r=(i=t.shared).isBufferArgs,i=i.elements,o=t.invoke(e,n),a=e.def("null");r=e.def(r,"(",o,")"),o=t.cond(r).then(a,"=",i,".createStream(",o,");").else(a,"=",i,".getElements(",o,");");return e.entry(o),e.exit(t.cond(r).then(i,".destroyStream(",a,");")),t.ELEMENTS=a})}return u?new D(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.elements+".getElements("+t.shared.vao+".currentVAO.elements):null")}):null}(),h=n("offset",!0),d=function(){if("primitive"in r){var t=r.primitive;return o.primitive=t,L(function(e,n){return nt[t]})}if("primitive"in i){var e=i.primitive;return z(e,function(t,n){var r=t.constants.primTypes,i=t.invoke(n,e);return n.def(r,"[",i,"]")})}return l?N(f)?f.value?L(function(t,e){return e.def(t.ELEMENTS,".primType")}):L(function(){return 4}):new D(f.thisDep,f.contextDep,f.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)}):u?new D(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.primitive:4")}):null}(),p=function(){if("count"in r){var t=0|r.count;return o.count=t,L(function(){return t})}if("count"in i){var e=i.count;return z(e,function(t,n){return t.invoke(n,e)})}return l?N(f)?f?h?new D(h.thisDep,h.contextDep,h.propDep,function(t,e){return e.def(t.ELEMENTS,".vertCount-",t.OFFSET)}):L(function(t,e){return e.def(t.ELEMENTS,".vertCount")}):L(function(){return-1}):new D(f.thisDep||h.thisDep,f.contextDep||h.contextDep,f.propDep||h.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}):u?new D(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.shared.vao,".currentVAO?",t.shared.vao,".currentVAO.count:-1")}):null}(),v=n("instances",!1);return{elements:f,primitive:d,count:p,instances:v,offset:h,vao:s,vaoActive:u,elementsActive:l,static:o}}function C(t,n){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach(function(t){var n=r[t],o=e.id(t),u=new Z;if(V(n))u.state=1,u.buffer=i.getBuffer(i.create(n,34962,!1,!0)),u.type=0;else if(l=i.getBuffer(n))u.state=1,u.buffer=l,u.type=0;else if("constant"in n){var s=n.constant;u.buffer="null",u.state=2,"number"==typeof s?u.x=s:wt.forEach(function(t,e){e<s.length&&(u[t]=s[e])})}else{var l=V(n.buffer)?i.getBuffer(i.create(n.buffer,34962,!1,!0)):i.getBuffer(n.buffer),c=0|n.offset,f=0|n.stride,h=0|n.size,d=!!n.normalized,p=0;"type"in n&&(p=Q[n.type]),n=0|n.divisor,u.buffer=l,u.state=1,u.size=h,u.normalized=d,u.type=p||l.dtype,u.offset=c,u.stride=f,u.divisor=n}a[t]=L(function(t,e){var n=t.attribCache;if(o in n)return n[o];var r={isStream:!1};return Object.keys(u).forEach(function(t){r[t]=u[t]}),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[o]=r})}),Object.keys(o).forEach(function(t){var e=o[t];a[t]=z(e,function(t,n){function r(t){n(s[t],"=",i,".",t,"|0;")}var i=t.invoke(n,e),o=t.shared,a=t.constants,u=o.isBufferArgs,s=(o=o.buffer,{isStream:n.def(!1)}),l=new Z;l.state=1,Object.keys(l).forEach(function(t){s[t]=n.def(""+l[t])});var c=s.buffer,f=s.type;return n("if(",u,"(",i,")){",s.isStream,"=true;",c,"=",o,".createStream(",34962,",",i,");",f,"=",c,".dtype;","}else{",c,"=",o,".getBuffer(",i,");","if(",c,"){",f,"=",c,".dtype;",'}else if("constant" in ',i,"){",s.state,"=",2,";","if(typeof "+i+'.constant === "number"){',s[wt[0]],"=",i,".constant;",wt.slice(1).map(function(t){return s[t]}).join("="),"=0;","}else{",wt.map(function(t,e){return s[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"}).join(""),"}}else{","if(",u,"(",i,".buffer)){",c,"=",o,".createStream(",34962,",",i,".buffer);","}else{",c,"=",o,".getBuffer(",i,".buffer);","}",f,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",s.normalized,"=!!",i,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",s.isStream,"){",o,".destroyStream(",c,");","}"),s})}),a}function E(t,e,r,i,a){function u(t){var e=l[t];e&&(h[t]=e)}var s=function(t,e){if("string"==typeof(n=t.static).frag&&"string"==typeof n.vert){if(0<Object.keys(e.dynamic).length)return null;var n=e.static,r=Object.keys(n);if(0<r.length&&"number"==typeof n[r[0]]){for(var i=[],o=0;o<r.length;++o)i.push([0|n[r[o]],r[o]]);return i}}return null}(t,e),l=function(t,e,n){function r(t){if(t in i){var n=i[t];t=!0;var r,a,u=0|n.x,s=0|n.y;return"width"in n?r=0|n.width:t=!1,"height"in n?a=0|n.height:t=!1,new D(!t&&e&&e.thisDep,!t&&e&&e.contextDep,!t&&e&&e.propDep,function(t,e){var i=t.shared.context,o=r;"width"in n||(o=e.def(i,".","framebufferWidth","-",u));var l=a;return"height"in n||(l=e.def(i,".","framebufferHeight","-",s)),[u,s,o,l]})}if(t in o){var l=o[t];return t=z(l,function(t,e){var n=t.invoke(e,l),r=t.shared.context,i=e.def(n,".x|0"),o=e.def(n,".y|0");return[i,o,e.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",i,")"),n=e.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",o,")")]}),e&&(t.thisDep=t.thisDep||e.thisDep,t.contextDep=t.contextDep||e.contextDep,t.propDep=t.propDep||e.propDep),t}return e?new D(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".","framebufferWidth"),e.def(n,".","framebufferHeight")]}):null}var i=t.static,o=t.dynamic;if(t=r("viewport")){var a=t;t=new D(t.thisDep,t.contextDep,t.propDep,function(t,e){var n=a.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n})}return{viewport:t,scissor_box:r("scissor.box")}}(t,p=w(t)),f=k(t),h=function(t,e){var n=t.static,r=t.dynamic,i={};return at.forEach(function(t){function e(e,o){if(t in n){var u=e(n[t]);i[a]=L(function(){return u})}else if(t in r){var s=r[t];i[a]=z(s,function(t,e){return o(t,e,t.invoke(e,s))})}}var a=m(t);switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return e(function(t){return t},function(t,e,n){return n});case"depth.func":return e(function(t){return Ct[t]},function(t,e,n){return e.def(t.constants.compareFuncs,"[",n,"]")});case"depth.range":return e(function(t){return t},function(t,e,n){return[e.def("+",n,"[0]"),e=e.def("+",n,"[1]")]});case"blend.func":return e(function(t){return[kt["srcRGB"in t?t.srcRGB:t.src],kt["dstRGB"in t?t.dstRGB:t.dst],kt["srcAlpha"in t?t.srcAlpha:t.src],kt["dstAlpha"in t?t.dstAlpha:t.dst]]},function(t,e,n){function r(t,r){return e.def('"',t,r,'" in ',n,"?",n,".",t,r,":",n,".",t)}t=t.constants.blendFuncs;var i=r("src","RGB"),o=r("dst","RGB"),a=(i=e.def(t,"[",i,"]"),e.def(t,"[",r("src","Alpha"),"]"));return[i,o=e.def(t,"[",o,"]"),a,t=e.def(t,"[",r("dst","Alpha"),"]")]});case"blend.equation":return e(function(t){return"string"==typeof t?[J[t],J[t]]:"object"==typeof t?[J[t.rgb],J[t.alpha]]:void 0},function(t,e,n){var r=t.constants.blendEquations,i=e.def(),o=e.def();return(t=t.cond("typeof ",n,'==="string"')).then(i,"=",o,"=",r,"[",n,"];"),t.else(i,"=",r,"[",n,".rgb];",o,"=",r,"[",n,".alpha];"),e(t),[i,o]});case"blend.color":return e(function(t){return o(4,function(e){return+t[e]})},function(t,e,n){return o(4,function(t){return e.def("+",n,"[",t,"]")})});case"stencil.mask":return e(function(t){return 0|t},function(t,e,n){return e.def(n,"|0")});case"stencil.func":return e(function(t){return[Ct[t.cmp||"keep"],t.ref||0,"mask"in t?t.mask:-1]},function(t,e,n){return[t=e.def('"cmp" in ',n,"?",t.constants.compareFuncs,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e=e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return e(function(e){return["stencil.opBack"===t?1029:1028,Et[e.fail||"keep"],Et[e.zfail||"keep"],Et[e.zpass||"keep"]]},function(e,n,r){function i(t){return n.def('"',t,'" in ',r,"?",o,"[",r,".",t,"]:",7680)}var o=e.constants.stencilOps;return["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return e(function(t){return[0|t.factor,0|t.units]},function(t,e,n){return[e.def(n,".factor|0"),e=e.def(n,".units|0")]});case"cull.face":return e(function(t){var e=0;return"front"===t?e=1028:"back"===t&&(e=1029),e},function(t,e,n){return e.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return e(function(t){return t},function(t,e,n){return n});case"frontFace":return e(function(t){return Mt[t]},function(t,e,n){return e.def(n+'==="cw"?2304:2305')});case"colorMask":return e(function(t){return t.map(function(t){return!!t})},function(t,e,n){return o(4,function(t){return"!!"+n+"["+t+"]"})});case"sample.coverage":return e(function(t){return["value"in t?t.value:1,!!t.invert]},function(t,e,n){return[e.def('"value" in ',n,"?+",n,".value:1"),e=e.def("!!",n,".invert")]})}}),i}(t),d=x(t,0,s);u("viewport"),u(m("scissor.box"));var p,v=0<Object.keys(h).length;if((p={framebuffer:p,draw:f,shader:d,state:h,dirty:v,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(t){var e,n=t.static;if(t=t.dynamic,"profile"in n){var r=!!n.profile;(e=L(function(t,e){return r})).enable=r}else if("profile"in t){var i=t.profile;e=z(i,function(t,e){return t.invoke(e,i)})}return e}(t),p.uniforms=function(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach(function(t){var e,r=n[t];if("number"==typeof r||"boolean"==typeof r)e=L(function(){return r});else if("function"==typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?e=L(function(t){return t.link(r)}):"framebuffer"!==a&&"framebufferCube"!==a||(e=L(function(t){return t.link(r.color[0])}))}else b(r)&&(e=L(function(t){return t.global.def("[",o(r.length,function(t){return r[t]}),"]")}));e.value=r,i[t]=e}),Object.keys(r).forEach(function(t){var e=r[t];i[t]=z(e,function(t,n){return t.invoke(n,e)})}),i}(r),p.drawVAO=p.scopeVAO=f.vao,!p.drawVAO&&d.program&&!s&&n.angle_instanced_arrays&&f.static.elements){var g=!0;if(t=d.program.attributes.map(function(t){return t=e.static[t],g=g&&!!t,t}),g&&0<t.length){var y=c.getVAO(c.createVAO({attributes:t,elements:f.static.elements}));p.drawVAO=new D(null,null,null,function(t,e){return t.link(y)}),p.useVAO=!0}}return s?p.useVAO=!0:p.attributes=C(e),p.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach(function(t){var n=e[t];r[t]=L(function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)})}),Object.keys(n).forEach(function(t){var e=n[t];r[t]=z(e,function(t,n){return t.invoke(n,e)})}),r}(i),p}function M(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach(function(o){e.save(r,"."+o);var a=n[o].append(t,e);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")}),e(i)}function P(t,e,n,r){var i,o=(u=t.shared).gl,a=u.framebuffer;et&&(i=e.def(u.extensions,".webgl_draw_buffers"));var u=(s=t.constants).drawBuffer,s=s.backBuffer;t=n?n.append(t,e):e.def(a,".next"),r||e("if(",t,"!==",a,".cur){"),e("if(",t,"){",o,".bindFramebuffer(",36160,",",t,".framebuffer);"),et&&e(i,".drawBuffersWEBGL(",u,"[",t,".colorAttachments.length]);"),e("}else{",o,".bindFramebuffer(",36160,",null);"),et&&e(i,".drawBuffersWEBGL(",s,");"),e("}",a,".cur=",t,";"),r||e("}")}function A(t,e,n){var r=t.shared,i=r.gl,a=t.current,u=t.next,s=r.current,l=r.next,c=t.cond(s,".dirty");at.forEach(function(e){var r,f;if(!((e=m(e))in n.state))if(e in u){r=u[e],f=a[e];var h=o(it[e].length,function(t){return c.def(r,"[",t,"]")});c(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(i,".",st[e],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else r=c.def(l,".",e),h=t.cond(r,"!==",s,".",e),c(h),e in ut?h(t.cond(r).then(i,".enable(",ut[e],");").else(i,".disable(",ut[e],");"),s,".",e,"=",r,";"):h(i,".",st[e],"(",r,");",s,".",e,"=",r,";")}),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function S(t,e,n,r){var i=t.shared,o=t.current,a=i.current,u=i.gl;j(Object.keys(n)).forEach(function(i){var s=n[i];if(!r||r(s)){var l=s.append(t,e);if(ut[i]){var c=ut[i];N(s)?e(u,l?".enable(":".disable(",c,");"):e(t.cond(l).then(u,".enable(",c,");").else(u,".disable(",c,");")),e(a,".",i,"=",l,";")}else if(b(l)){var f=o[i];e(u,".",st[i],"(",l,");",l.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(u,".",st[i],"(",l,");",a,".",i,"=",l,";")}})}function R(t,e){tt&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function B(t,e,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){t(l=e.def(),"=",o(),";"),"string"==typeof i?t(h,".count+=",i,";"):t(h,".count++;"),p&&(r?t(c=e.def(),"=",v,".getNumPendingQueries();"):t(v,".beginQuery(",h,");"))}function u(t){t(h,".cpuTime+=",o(),"-",l,";"),p&&(r?t(v,".pushScopeStats(",c,",",v,".getNumPendingQueries(),",h,");"):t(v,".endQuery();"))}function s(t){var n=e.def(d,".profile");e(d,".profile=",t,";"),e.exit(d,".profile=",n,";")}var l,c,f=t.shared,h=t.stats,d=f.current,v=f.timer;if(n=n.profile){if(N(n))return void(n.enable?(a(e),u(e.exit),s("true")):s("false"));s(n=n.append(t,e))}else n=e.def(d,".profile");a(f=t.block()),e("if(",n,"){",f,"}"),u(t=t.block()),e.exit("if(",n,"){",t,"}")}function F(t,e,n,r,i){function o(n,r,i){function o(){e("if(!",c,".buffer){",s,".enableVertexAttribArray(",l,");}");var n,o=i.type;n=i.size?e.def(i.size,"||",r):r,e("if(",c,".type!==",o,"||",c,".size!==",n,"||",d.map(function(t){return c+"."+t+"!=="+i[t]}).join("||"),"){",s,".bindBuffer(",34962,",",f,".buffer);",s,".vertexAttribPointer(",[l,n,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",n,";",d.map(function(t){return c+"."+t+"="+i[t]+";"}).join(""),"}"),tt&&(o=i.divisor,e("if(",c,".divisor!==",o,"){",t.instancing,".vertexAttribDivisorANGLE(",[l,o],");",c,".divisor=",o,";}"))}function u(){e("if(",c,".buffer){",s,".disableVertexAttribArray(",l,");",c,".buffer=null;","}if(",wt.map(function(t,e){return c+"."+t+"!=="+h[e]}).join("||"),"){",s,".vertexAttrib4f(",l,",",h,");",wt.map(function(t,e){return c+"."+t+"="+h[e]+";"}).join(""),"}")}var s=a.gl,l=e.def(n,".location"),c=e.def(a.attributes,"[",l,"]");n=i.state;var f=i.buffer,h=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];1===n?o():2===n?u():(e("if(",n,"===",1,"){"),o(),e("}else{"),u(),e("}"))}var a=t.shared;r.forEach(function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!i(s))return;a=s.append(t,e)}else{if(!i(Pt))return;var l=t.scopeAttrib(u);a={},Object.keys(new Z).forEach(function(t){a[t]=e.def(l,".",t)})}o(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)})}function q(t,n,r,i,a,u){for(var s,l=t.shared,c=l.gl,f={},h=0;h<i.length;++h){var d=(_=i[h]).name,p=_.info.type,v=_.info.size,m=r.uniforms[d];if(1<v){if(!m)continue;var g=d.replace("[0]","");if(f[g])continue;f[g]=1}var y,_=t.link(_)+".location";if(m){if(!a(m))continue;if(N(m)){if(d=m.value,35678===p||35680===p)n(c,".uniform1i(",_,",",(p=t.link(d._texture||d.color[0]._texture))+".bind());"),n.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)v=t.global.def("new Float32Array(["+Array.prototype.slice.call(d)+"])"),d=2,35675===p?d=3:35676===p&&(d=4),n(c,".uniformMatrix",d,"fv(",_,",false,",v,");");else{switch(p){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}1<v?(s+="v",d=t.global.def("["+Array.prototype.slice.call(d)+"]")):d=b(d)?Array.prototype.slice.call(d):d,n(c,".uniform",s,"(",_,",",d,");")}continue}y=m.append(t,n)}else{if(!a(Pt))continue;y=n.def(l.uniforms,"[",e.id(d),"]")}switch(35678===p?n("if(",y,"&&",y,'._reglType==="framebuffer"){',y,"=",y,".color[0];","}"):35680===p&&n("if(",y,"&&",y,'._reglType==="framebufferCube"){',y,"=",y,".color[0];","}"),d=1,p){case 35678:case 35680:n(c,".uniform1i(",_,",",p=n.def(y,"._texture"),".bind());"),n.exit(p,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",d=2;break;case 35668:case 35672:s="3i",d=3;break;case 35669:case 35673:s="4i",d=4;break;case 5126:s="1f";break;case 35664:s="2f",d=2;break;case 35665:s="3f",d=3;break;case 35666:s="4f",d=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(-1===s.indexOf("Matrix")&&1<v&&(s+="v",d=1),"M"===s.charAt(0)){n(c,".uniform",s,"(",_,",");_=Math.pow(p-35674+2,2);var w=t.global.def("new Float32Array(",_,")");Array.isArray(y)?n("false,(",o(_,function(t){return w+"["+t+"]="+y[t]}),",",w,")"):n("false,(Array.isArray(",y,")||",y," instanceof Float32Array)?",y,":(",o(_,function(t){return w+"["+t+"]="+y+"["+t+"]"}),",",w,")"),n(");")}else{if(1<d){p=[];var x=[];for(v=0;v<d;++v)Array.isArray(y)?x.push(y[v]):x.push(n.def(y+"["+v+"]")),u&&p.push(n.def());u&&n("if(!",t.batchId,"||",p.map(function(t,e){return t+"!=="+x[e]}).join("||"),"){",p.map(function(t,e){return t+"="+x[e]+";"}).join("")),n(c,".uniform",s,"(",_,",",x.join(","),");")}else u&&(p=n.def(),n("if(!",t.batchId,"||",p,"!==",y,"){",p,"=",y,";")),n(c,".uniform",s,"(",_,",",y,");");u&&n("}")}}}function H(t,e,n,r){function i(i){var o=h[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(f,".",i)}function o(){function t(){n(s,".drawElementsInstancedANGLE(",[p,b,m,v+"<<(("+m+"-5121)>>1)",u],");")}function e(){n(s,".drawArraysInstancedANGLE(",[p,v,b,u],");")}d&&"null"!==d?g?t():(n("if(",d,"){"),t(),n("}else{"),e(),n("}")):e()}function a(){function t(){n(c+".drawElements("+[p,b,m,v+"<<(("+m+"-5121)>>1)"]+");")}function e(){n(c+".drawArrays("+[p,v,b]+");")}d&&"null"!==d?g?t():(n("if(",d,"){"),t(),n("}else{"),e(),n("}")):e()}var u,s,l=t.shared,c=l.gl,f=l.draw,h=r.draw,d=function(){var i=h.elements,o=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(t,o),h.elementsActive&&o("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);")):o(i=o.def(),"=",f,".","elements",";","if(",i,"){",c,".bindBuffer(",34963,",",i,".buffer.buffer);}","else if(",l.vao,".currentVAO){",i,"=",t.shared.elements+".getElements("+l.vao,".currentVAO.elements);",rt?"":"if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);","}"),i}(),p=i("primitive"),v=i("offset"),b=function(){var i=h.count,o=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(t,o)):i=o.def(f,".","count"),i}();if("number"==typeof b){if(0===b)return}else n("if(",b,"){"),n.exit("}");tt&&(u=i("instances"),s=t.instancing);var m=d+".type",g=h.elements&&N(h.elements)&&!h.vaoActive;tt&&("number"!=typeof u||0<=u)?"string"==typeof u?(n("if(",u,">0){"),o(),n("}else if(",u,"<0){"),a(),n("}")):o():a()}function Y(t,e,n,r,i){return i=(e=_()).proc("body",i),tt&&(e.instancing=i.def(e.shared.extensions,".angle_instanced_arrays")),t(e,i,n,r),e.compile().body}function K(t,e,n,r){R(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),F(t,e,n,r.attributes,function(){return!0})),q(t,e,n,r.uniforms,function(){return!0},!1),H(t,e,e,n)}function G(t,e,n,r){function i(){return!0}t.batchId="a1",R(t,e),F(t,e,n,r.attributes,i),q(t,e,n,r.uniforms,i,!1),H(t,e,e,n)}function W(t,e,n,r){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}R(t,e);var a=n.contextDep,u=e.def(),s=e.def();t.shared.props=s,t.batchId=u;var l=t.scope(),c=t.scope();e(l.entry,"for(",u,"=0;",u,"<","a1",";++",u,"){",s,"=","a0","[",u,"];",c,"}",l.exit),n.needsContext&&M(t,c,n.context),n.needsFramebuffer&&P(t,c,n.framebuffer),S(t,c,n.state,i),n.profile&&i(n.profile)&&B(t,c,n,!1,!0),r?(n.useVAO?n.drawVAO?i(n.drawVAO)?c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):l(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(l(t.shared.vao,".setVAO(null);"),F(t,l,n,r.attributes,o),F(t,c,n,r.attributes,i)),q(t,l,n,r.uniforms,o,!1),q(t,c,n,r.uniforms,i,!0),H(t,l,c,n)):(e=t.global.def("{}"),r=n.shader.progVar.append(t,c),s=c.def(r,".id"),l=c.def(e,"[",s,"]"),c(t.shared.gl,".useProgram(",r,".program);","if(!",l,"){",l,"=",e,"[",s,"]=",t.link(function(e){return Y(G,t,n,e,2)}),"(",r,");}",l,".call(this,a0[",u,"],",u,");"))}function X(t,n){function r(e){var r=n.shader[e];r&&i.set(o.shader,"."+e,r.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;M(t,i,n.context),n.framebuffer&&n.framebuffer.append(t,i),j(Object.keys(n.state)).forEach(function(e){var r=n.state[e].append(t,i);b(r)?r.forEach(function(n,r){i.set(t.next[e],"["+r+"]",n)}):i.set(o.next,"."+e,r)}),B(t,i,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(e){var r=n.draw[e];r&&i.set(o.draw,"."+e,""+r.append(t,i))}),Object.keys(n.uniforms).forEach(function(r){var a=n.uniforms[r].append(t,i);Array.isArray(a)&&(a="["+a.join()+"]"),i.set(o.uniforms,"["+e.id(r)+"]",a)}),Object.keys(n.attributes).forEach(function(e){var r=n.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new Z).forEach(function(t){i.set(o,"."+t,r[t])})}),n.scopeVAO&&i.set(o.vao,".targetVAO",n.scopeVAO.append(t,i)),r("vert"),r("frag"),0<Object.keys(n.state).length&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function $(t,e,n){var r=e.static[n];if(r&&function(t){if("object"==typeof t&&!b(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(U.isDynamic(t[e[n]]))return!0;return!1}}(r)){var i=t.global,o=Object.keys(r),a=!1,u=!1,s=!1,l=t.global.def("{}");o.forEach(function(e){var n=r[e];if(U.isDynamic(n))"function"==typeof n&&(n=r[e]=U.unbox(n)),e=z(n,null),a=a||e.thisDep,s=s||e.propDep,u=u||e.contextDep;else{switch(i(l,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}}),e.dynamic[n]=new U.DynamicVariable(4,{thisDep:a,contextDep:u,propDep:s,ref:l,append:function(t,e){o.forEach(function(n){var i=r[n];U.isDynamic(i)&&(i=t.invoke(e,i),e(l,".",n,"=",i,";"))})}}),delete e.static[n]}}var Z=c.Record,J={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(J.min=32775,J.max=32776);var tt=n.angle_instanced_arrays,et=n.webgl_draw_buffers,rt=n.oes_vertex_array_object,it={dirty:!0,profile:v.profile},ot={},at=[],ut={},st={};g("dither",3024),g("blend.enable",3042),y("blend.color","blendColor",[0,0,0,0]),y("blend.equation","blendEquationSeparate",[32774,32774]),y("blend.func","blendFuncSeparate",[1,0,1,0]),g("depth.enable",2929,!0),y("depth.func","depthFunc",513),y("depth.range","depthRange",[0,1]),y("depth.mask","depthMask",!0),y("colorMask","colorMask",[!0,!0,!0,!0]),g("cull.enable",2884),y("cull.face","cullFace",1029),y("frontFace","frontFace",2305),y("lineWidth","lineWidth",1),g("polygonOffset.enable",32823),y("polygonOffset.offset","polygonOffset",[0,0]),g("sample.alpha",32926),g("sample.enable",32928),y("sample.coverage","sampleCoverage",[1,!1]),g("stencil.enable",2960),y("stencil.mask","stencilMask",-1),y("stencil.func","stencilFunc",[519,0,-1]),y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),g("scissor.enable",3089),y("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),y("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var lt={gl:t,context:d,strings:e,next:ot,current:it,draw:h,elements:a,buffer:i,shader:f,attributes:c.state,vao:c,uniforms:l,framebuffer:s,extensions:n,timer:p,isBufferArgs:V},ct={primTypes:nt,compareFuncs:Ct,blendFuncs:kt,blendEquations:J,stencilOps:Et,glTypes:Q,orientationType:Mt};et&&(ct.backBuffer=[1029],ct.drawBuffer=o(r.maxDrawbuffers,function(t){return 0===t?[0]:o(t,function(t){return 36064+t})}));var ft=0;return{next:ot,current:it,procs:function(){var t=_(),e=t.proc("poll"),i=t.proc("refresh"),a=t.block();e(a),i(a);var u,s=t.shared,l=s.gl,c=s.next,f=s.current;a(f,".dirty=false;"),P(t,e),P(t,i,null,!0),tt&&(u=t.link(tt)),n.oes_vertex_array_object&&i(t.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<r.maxAttributes;++h){var d=i.def(s.attributes,"[",h,"]"),p=t.cond(d,".buffer");p.then(l,".enableVertexAttribArray(",h,");",l,".bindBuffer(",34962,",",d,".buffer.buffer);",l,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",h,");",l,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),i(p),tt&&i(u,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return i(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(ut).forEach(function(n){var r=ut[n],o=a.def(c,".",n),u=t.block();u("if(",o,"){",l,".enable(",r,")}else{",l,".disable(",r,")}",f,".",n,"=",o,";"),i(u),e("if(",o,"!==",f,".",n,"){",u,"}")}),Object.keys(st).forEach(function(n){var r,u,s=st[n],h=it[n],d=t.block();d(l,".",s,"("),b(h)?(s=h.length,r=t.global.def(c,".",n),u=t.global.def(f,".",n),d(o(s,function(t){return r+"["+t+"]"}),");",o(s,function(t){return u+"["+t+"]="+r+"["+t+"];"}).join("")),e("if(",o(s,function(t){return r+"["+t+"]!=="+u+"["+t+"]"}).join("||"),"){",d,"}")):(r=a.def(c,".",n),u=a.def(f,".",n),d(r,");",f,".",n,"=",r,";"),e("if(",r,"!==",u,"){",d,"}")),i(d)}),t.compile()}(),compile:function(t,e,n,r,i){var o=_();o.stats=o.link(i),Object.keys(e.static).forEach(function(t){$(o,e,t)}),xt.forEach(function(e){$(o,t,e)});var a=E(t,e,n,r);return function(t,e){var n=t.proc("draw",1);R(t,n),M(t,n,e.context),P(t,n,e.framebuffer),A(t,n,e),S(t,n,e.state),B(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)K(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(n){return Y(K,t,e,n,1)}),"(",r,");",a,".call(this,a0);"))}0<Object.keys(e.state).length&&n(t.shared.current,".dirty=true;"),t.shared.vao&&n(t.shared.vao,".setVAO(null);")}(o,a),X(o,a),function(t,e){function n(t){return t.contextDep&&i||t.propDep}var r=t.proc("batch",2);t.batchId="0",R(t,r);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(M(t,r,e.context),o=!1);var a=!1;if((u=e.framebuffer)?(u.propDep?i=a=!0:u.contextDep&&i&&(a=!0),a||P(t,r,u)):P(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),A(t,r,e),S(t,r,e.state,function(t){return!n(t)}),e.profile&&n(e.profile)||B(t,r,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=a,(o=e.shader.progVar).contextDep&&i||o.propDep)W(t,r,e,null);else if(o=o.append(t,r),r(t.shared.gl,".useProgram(",o,".program);"),e.shader.program)W(t,r,e,e.shader.program);else{r(t.shared.vao,".setVAO(null);");var u=t.global.def("{}"),s=(a=r.def(o,".id"),r.def(u,"[",a,"]"));r(t.cond(s).then(s,".call(this,a0,a1);").else(s,"=",u,"[",a,"]=",t.link(function(n){return Y(W,t,e,n,2)}),"(",o,");",s,".call(this,a0,a1);"))}0<Object.keys(e.state).length&&r(t.shared.current,".dirty=true;"),t.shared.vao&&r(t.shared.vao,".setVAO(null);")}(o,a),I(o.compile(),{destroy:function(){a.shader.program.destroy()}})}}}function B(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var I=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},F=0,U={DynamicVariable:t,define:function(n,r){return new t(n,e(r+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof t},unbox:function e(n,r){return"function"==typeof n?new t(0,n):"number"==typeof n||"boolean"==typeof n?new t(5,n):Array.isArray(n)?new t(6,n.map(function(t,n){return e(t,r+"["+n+"]")})):n instanceof t?n:void 0},accessor:e},q={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},H="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Y=u();Y.zero=u();var K=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063));var o=!!e.oes_texture_float;if(o){o=t.createTexture(),t.bindTexture(3553,o),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var a=t.createFramebuffer();if(t.bindFramebuffer(36160,a),t.framebufferTexture2D(36160,36064,3553,o,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=Y.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,u),t.getError()?o=!1:(t.deleteFramebuffer(a),t.deleteTexture(o),o=1===u[0]),Y.freeType(u)}}return u=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(u=t.createTexture(),a=Y.allocType(5121,36),t.activeTexture(33984),t.bindTexture(34067,u),t.texImage2D(34069,0,6408,3,3,0,6408,5121,a),Y.freeType(a),t.bindTexture(34067,null),t.deleteTexture(u),u=!t.getError()),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:o,npotTextureCube:u}},G=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},W=function(t){return Object.keys(t).map(function(e){return t[e]})},X={shape:function(t){for(var e=[];t.length;t=t[0])e.push(t.length);return e},flatten:function(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;switch(n=r||Y.allocType(n,i),e.length){case 0:break;case 1:for(r=e[0],e=0;e<r;++e)n[e]=t[e];break;case 2:for(r=e[0],e=e[1],o=i=0;o<r;++o)for(var a=t[o],u=0;u<e;++u)n[i++]=a[u];break;case 3:l(t,e[0],e[1],e[2],n,0);break;default:!function t(e,n,r,i,o){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(4==n.length-r){var c=n[r+1],f=n[r+2];for(n=n[r+3],u=0;u<s;++u)l(e[u],c,f,n,i,o),o+=a}else for(u=0;u<s;++u)t(e[u],n,r+1,i,o),o+=a}(t,e,0,n,0)}return n}},$={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Z={dynamic:35048,stream:35040,static:35044},J=X.flatten,tt=X.shape,et=[];et[5120]=1,et[5122]=2,et[5124]=4,et[5121]=1,et[5123]=2,et[5125]=4,et[5126]=4;var nt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},rt=new Float32Array(1),it=new Uint32Array(rt.buffer),ot=[9984,9986,9985,9987],at=[0,6409,6410,6407,6408],ut={};ut[6409]=ut[6406]=ut[6402]=1,ut[34041]=ut[6410]=2,ut[6407]=ut[35904]=3,ut[6408]=ut[35906]=4;var st=m("HTMLCanvasElement"),lt=m("OffscreenCanvas"),ct=m("CanvasRenderingContext2D"),ft=m("ImageBitmap"),ht=m("HTMLImageElement"),dt=m("HTMLVideoElement"),pt=Object.keys($).concat([st,lt,ct,ft,ht,dt]),vt=[];vt[5121]=1,vt[5126]=4,vt[36193]=2,vt[5123]=2,vt[5125]=4;var bt=[];bt[32854]=2,bt[32855]=2,bt[36194]=2,bt[34041]=4,bt[33776]=.5,bt[33777]=.5,bt[33778]=1,bt[33779]=1,bt[35986]=.5,bt[35987]=1,bt[34798]=1,bt[35840]=.5,bt[35841]=.25,bt[35842]=.5,bt[35843]=.25,bt[36196]=.5;var mt=[];mt[32854]=2,mt[32855]=2,mt[36194]=2,mt[33189]=2,mt[36168]=1,mt[34041]=4,mt[35907]=4,mt[34836]=16,mt[34842]=8,mt[34843]=6;var gt=function(t,e,n,r,i){function o(t){this.id=l++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function a(e){var n=e.renderbuffer;t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}var u={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(u.srgba=35907),e.ext_color_buffer_half_float&&(u.rgba16f=34842,u.rgb16f=34843),e.webgl_color_buffer_float&&(u.rgba32f=34836);var s=[];Object.keys(u).forEach(function(t){s[u[t]]=t});var l=0,c={};return o.prototype.decRef=function(){0>=--this.refCount&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach(function(e){t+=c[e].stats.size}),t}),{create:function(e,n){function a(e,n){var r=0,o=0,c=32854;if("object"==typeof e&&e?("shape"in e?(r=0|(o=e.shape)[0],o=0|o[1]):("radius"in e&&(r=o=0|e.radius),"width"in e&&(r=0|e.width),"height"in e&&(o=0|e.height)),"format"in e&&(c=u[e.format])):"number"==typeof e?(r=0|e,o="number"==typeof n?0|n:r):e||(r=o=1),r!==l.width||o!==l.height||c!==l.format)return a.width=l.width=r,a.height=l.height=o,l.format=c,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,c,r,o),i.profile&&(l.stats.size=mt[l.format]*l.width*l.height),a.format=s[l.format],a}var l=new o(t.createRenderbuffer());return c[l.id]=l,r.renderbufferCount++,a(e,n),a.resize=function(e,n){var r=0|e,o=0|n||r;return r===l.width&&o===l.height?a:(a.width=l.width=r,a.height=l.height=o,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,l.format,r,o),i.profile&&(l.stats.size=mt[l.format]*l.width*l.height),a)},a._reglType="renderbuffer",a._renderbuffer=l,i.profile&&(a.stats=l.stats),a.destroy=function(){l.decRef()},a},clear:function(){W(c).forEach(a)},restore:function(){W(c).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)}),t.bindRenderbuffer(36161,null)}}},yt=[];yt[6408]=4,yt[6407]=3;var _t=[];_t[5121]=1,_t[5126]=4,_t[36193]=2;var wt=["x","y","z","w"],xt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),kt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ct={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Et={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Mt={cw:2304,ccw:2305},Pt=new D(!1,!1,!1,function(){});return function(t){function e(){if(0===$.length)x&&x.update(),tt=null;else{tt=q.next(e),f();for(var t=$.length-1;0<=t;--t){var n=$[t];n&&n(O,null,0)}b.flush(),x&&x.update()}}function n(){!tt&&0<$.length&&(tt=q.next(e))}function r(){tt&&(q.cancel(e),tt=null)}function o(t){t.preventDefault(),r(),Q.forEach(function(t){t()})}function a(t){b.getError(),g.restore(),L.restore(),j.restore(),z.restore(),F.restore(),Y.restore(),N.restore(),x&&x.restore(),G.procs.refresh(),n(),Z.forEach(function(t){t()})}function u(t){function e(t,e){var n={},r={};return Object.keys(t).forEach(function(i){var o=t[i];if(U.isDynamic(o))r[i]=U.unbox(o,i);else{if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(U.isDynamic(o[a]))return void(r[i]=U.unbox(o,i));n[i]=o}}),{dynamic:r,static:n}}var n=e(t.context||{},!0),r=e(t.uniforms||{},!0),i=e(t.attributes||{},!1);t=e(function(t){function e(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(r){n[t+"."+r]=e[r]})}}var n=I({},t);return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1);var o={gpuTime:0,cpuTime:0,count:0},a=G.compile(t,i,r,n,o),u=a.draw,s=a.batch,l=a.scope,c=[];return I(function(t,e){var n;if("function"==typeof t)return l.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)l.call(this,null,e,n);else{if(!Array.isArray(t))return l.call(this,t,e,0);for(n=0;n<t.length;++n)l.call(this,t[n],e,n)}else if("number"==typeof t){if(0<t)return s.call(this,function(t){for(;c.length<t;)c.push(null);return c}(0|t),0|t)}else{if(!Array.isArray(t))return u.call(this,t);if(t.length)return s.call(this,t,t.length)}},{stats:o,destroy:function(){a.destroy()}})}function s(t,e){var n=0;G.procs.poll();var r=e.color;r&&(b.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(b.clearDepth(+e.depth),n|=256),"stencil"in e&&(b.clearStencil(0|e.stencil),n|=1024),b.clear(n)}function l(t){return $.push(t),n(),{cancel:function(){var e=B($,t);$[e]=function t(){var e=B($,t);$[e]=$[$.length-1],--$.length,0>=$.length&&r()}}}}function c(){var t=W.viewport,e=W.scissor_box;t[0]=t[1]=e[0]=e[1]=0,O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=t[2]=e[2]=b.drawingBufferWidth,O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=t[3]=e[3]=b.drawingBufferHeight}function f(){O.tick+=1,O.time=v(),c(),G.procs.poll()}function h(){z.refresh(),c(),G.procs.refresh(),x&&x.update()}function v(){return(H()-k)/1e3}if(!(t=i(t)))return null;var b=t.gl,m=b.getContextAttributes();b.isContextLost();var g=function(t,e){function n(e){var n;e=e.toLowerCase();try{n=r[e]=t.getExtension(e)}catch(t){}return!!n}for(var r={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!n(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(r[t]&&!n(t))throw Error("(regl): error restoring extension "+t)})}}}(b,t);if(!g)return null;var y=function(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}(),_={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},w=g.extensions,x=function(t,e){function n(t,e,n){var r=o.pop()||new function(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null};r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,a.push(r)}if(!e.ext_disjoint_timer_query)return null;var r=[],i=[],o=[],a=[],u=[],s=[];return{beginQuery:function(t){var o=r.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,o),i.push(o),n(i.length-1,i.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var t,n;if(0!==(t=i.length)){s.length=Math.max(s.length,t+1),u.length=Math.max(u.length,t+1),u[0]=0;var l=s[0]=0;for(n=t=0;n<i.length;++n){var c=i[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(l+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r.push(c)):i[t++]=c,u[n+1]=l,s[n+1]=t}for(i.length=t,n=t=0;n<a.length;++n){var f=(l=a[n]).startQueryIndex;c=l.endQueryIndex,l.sum+=u[c]-u[f],f=s[f],(c=s[c])===f?(l.stats.gpuTime+=l.sum/1e6,o.push(l)):(l.startQueryIndex=f,l.endQueryIndex=c,a[t++]=l)}a.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){r.push.apply(r,i);for(var t=0;t<r.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(r[t]);i.length=0,r.length=0},restore:function(){i.length=0,r.length=0}}}(0,w),k=H(),M=b.drawingBufferWidth,T=b.drawingBufferHeight,O={tick:0,time:0,viewportWidth:M,viewportHeight:T,framebufferWidth:M,framebufferHeight:T,drawingBufferWidth:M,drawingBufferHeight:T,pixelRatio:t.pixelRatio},V=(M={elements:null,primitive:4,count:-1,offset:0,instances:-1},K(b,w)),j=d(b,_,t,function(t){return N.destroyBuffer(t)}),D=p(b,w,j,_),N=P(b,w,V,_,j,D,M),L=A(b,y,_,t),z=C(b,w,V,function(){G.procs.poll()},O,_,t),F=gt(b,w,0,_,t),Y=E(b,w,V,z,F,_),G=R(b,y,w,V,j,D,0,Y,{},N,L,M,O,x,t),W=(y=S(b,Y,G.procs.poll,O),G.next),X=b.canvas,$=[],Q=[],Z=[],J=[t.onDestroy],tt=null;X&&(X.addEventListener("webglcontextlost",o,!1),X.addEventListener("webglcontextrestored",a,!1));var et=Y.setFBO=u({framebuffer:U.define.call(null,1,"framebuffer")});return h(),m=I(u,{clear:function(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;6>e;++e)et(I({framebuffer:t.framebuffer.faces[e]},t),s);else et(t,s);else s(0,t)},prop:U.define.bind(null,1),context:U.define.bind(null,2),this:U.define.bind(null,3),draw:u({}),buffer:function(t){return j.create(t,34962,!1,!1)},elements:function(t){return D.create(t,!1)},texture:z.create2D,cube:z.createCube,renderbuffer:F.create,framebuffer:Y.create,framebufferCube:Y.createCube,vao:N.createVAO,attributes:m,frame:l,on:function(t,e){var n;switch(t){case"frame":return l(e);case"lost":n=Q;break;case"restore":n=Z;break;case"destroy":n=J}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e){n[t]=n[n.length-1],n.pop();break}}}},limits:V,hasExtension:function(t){return 0<=V.extensions.indexOf(t.toLowerCase())},read:y,destroy:function(){$.length=0,r(),X&&(X.removeEventListener("webglcontextlost",o),X.removeEventListener("webglcontextrestored",a)),L.clear(),Y.clear(),F.clear(),N.clear(),z.clear(),D.clear(),j.clear(),x&&x.clear(),J.forEach(function(t){t()})},_gl:b,_refresh:h,poll:function(){f(),x&&x.update()},now:v,stats:_}),t.onDone(null,m),m}},"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):r.createREGL=i()},{}],44:[function(t,e,n){"use strict";var r=t("gl-mat3/create"),i=t("gl-mat3/invert"),o=t("gl-mat4/create"),a=t("./mat3-from-linear-scales.js"),u=t("./mat4-from-mat3.js");e.exports=function(t){var e={view3:r(),inverseView3:r(),view:o(),inverseView:o(),xDomain:[0,0],yDomain:[0,0],dirty:!0},n=t({context:{view3:t.prop("view3"),inverseView3:t.prop("inverseView3"),view:t.prop("view"),inverseView:t.prop("inverseView"),xDomain:t.prop("xDomain"),yDomain:t.prop("yDomain"),dirty:t.prop("dirty")},uniforms:{view3:t.prop("view3"),inverseView3:t.prop("inverseView3"),view:t.prop("view"),inverseView:t.prop("inverseView"),xDomain:t.prop("xDomain"),yDomain:t.prop("yDomain")}});return function(t,r){a(e.view3,t),i(e.inverseView3,e.view3),u(e.view,e.view3),u(e.inverseView,e.inverseView3);var o=t.x.domain(),s=.5*(o[1]+o[0]),l=.5*(o[1]-o[0]),c=t.y.domain(),f=.5*(c[1]+c[0]),h=.5*(c[1]-c[0]);e.xDomain=[s-l,s+l],e.yDomain=[f-h,f+h],e.dirty=t.dirty,n(e,r),t.dirty=!1}}},{"./mat3-from-linear-scales.js":48,"./mat4-from-mat3.js":49,"gl-mat3/create":35,"gl-mat3/invert":36,"gl-mat4/create":37}],45:[function(t,e,n){"use strict";var r=t("gl-mat3/create"),i={t:0,r:0,b:0,l:0};e.exports=function(t){r();var e=t({viewport:{x:function(t,e){return t.pixelRatio*e.margin.l},y:function(t,e){return t.pixelRatio*e.margin.b},width:function(t,e){return t.viewportWidth-t.pixelRatio*(e.margin.r+e.margin.l)},height:function(t,e){return t.viewportHeight-t.pixelRatio*(e.margin.t+e.margin.b)}},uniforms:{viewportAspect:function(t,e){return t.viewportWidth/t.viewportHeight},viewportResolution:function(t,e){return[t.viewportWidth,t.viewportHeight]},framebufferResolution:function(t){return[t.framebufferWidth,t.framebufferHeight]},inverseViewportResolution:function(t,e){return[1/t.viewportWidth,1/t.viewportHeight]},inverseFramebufferResolution:function(t){return[1/t.framebufferWidth,1/t.framebufferHeight]},pixelRatio:t.context("pixelRatio")}});return function(t,n){var r=Object.assign({},i);t&&t.margin&&Object.assign(r,t.margin),e({margin:r},n)}}},{"gl-mat3/create":35}],46:[function(t,e,n){"use strict";var r=t("d3");e.exports=function(t,e,n){var i=e.x.range(),o=e.y.range(),a=(i[1]-i[0])/(o[0]-o[1]),u=e.x.domain(),s=e.y.domain(),l=.5*(s[1]-s[0]),c=.5*(u[1]+u[0]),f=c-l*a,h=c+l*a,d=s[0],p=s[1];e.x.domain([f,h]).range(i),e.y.domain([d,p]).range(o),t.__zoom=null,r.select(t).call(function(t,e){var n=t.x.copy(),i=t.y.copy();return r.zoom().scaleExtent([1e-5,1e5]).on("zoom",function(){var o=r.event.transform,a=t.x.range().map(o.invertX,o);t.x.domain(n.domain()),t.x.domain(a.map(t.x.invert,t.x)),a=t.y.range().map(o.invertY,o),t.y.domain(i.domain()),t.y.domain(a.map(t.y.invert,t.y)),t.dirty=!0,e&&e()})}(e,n)),n&&n()}},{d3:32}],47:[function(t,e,n){"use strict";var r=t("d3"),i=t("regl"),o=t("./create-zoom.js"),a=(t("gl-mat4/invert"),t("gl-mat4/create"),t("gl-mat4/multiply"),t("gl-mat4/fromScaling"),t("../../lib/tweakpane.js").Pane),u=window.p={k:3.5,h:.01,"":.1,"_noise":1},s=new a({title:"Parameters"});s.addBinding(u,"k",{min:0,max:4}),s.addBinding(u,"",{min:-1,max:1}),s.addBinding(u,"_noise",{min:0,max:4});var l=s.addButton({title:"Restart"});t("insert-css")("\nhtml, body {\n  background: black;\n}\nbody > canvas {\n  z-index: -1;\n}\n.sketch-nav {\n  right: auto !important;\n  left: 0 !important;\n}"),i({extensions:["OES_texture_float"],attributes:{antialias:!1,depthStencil:!1,alpha:!1},pixelRatio:window.devicePixelRatio,onDone:t("fail-nicely")(function(e){l.on("click",function(){e.poll(),h({out:m[0]})});var n=e({uniforms:{viewportRes:function(t){var e=t.viewportWidth,n=t.viewportHeight;t.pixelRatio;return[e,n]},resolutionInv:[1/128,1/128],k:e.prop("k"),h:e.prop("h"),omeganoise:e.prop("_noise"),omega0:e.prop("")}}),i=e._gl.canvas,a={x:r.scaleLinear().domain([-.5*i.width/i.height,.5*i.width/i.height]),y:r.scaleLinear().domain([-.5,.5])};function s(){a.x.range([0,window.innerWidth]),a.y.range([window.innerHeight,0]),o(i,a)}s(),window.addEventListener("resize",s);var c=t("./configure-viewport.js")(e),f=t("./configure-linear-scales.js")(e),h=e({vert:"\n      precision highp float;\n      attribute vec2 xy;\n      void main () {\n        gl_Position = vec4(xy, 0, 1);\n      }",frag:"\n      precision highp float;\n\n      highp float random(vec2 co) {\n          highp float a = 12.9898;\n          highp float b = 78.233;\n          highp float c = 43758.5453;\n          highp float dt= dot(co.xy ,vec2(a,b));\n          highp float sn= mod(dt,3.14);\n          return fract(sin(sn) * c);\n      }\n\n      void main () {\n        float u1 = random(gl_FragCoord.xy + 1.3852);\n        float u2 = random(gl_FragCoord.xy + 0.8352);\n\n        gl_FragColor = vec4(\n          random(gl_FragCoord.xy) * 1.0,\n          sqrt(max(0.0, -2.0 * log(max(1e-8, u1)))) * cos(2.0 * ".concat(Math.PI," * u2),\n          0,\n          0\n        );\n      }"),attributes:{xy:[-4,-4,4,-4,0,4]},framebuffer:e.prop("out"),depth:{enable:!1},count:3}),d=e({vert:"\n      precision highp float;\n      attribute vec2 xy;\n      void main () {\n        gl_Position = vec4(xy, 0, 1);\n      }",frag:"\n      precision highp float;\n      uniform vec2 resolutionInv;\n      uniform sampler2D x;\n      uniform float k, omeganoise, omega0;\n      #define TWOPI (".concat(2*Math.PI,")\n\n      void main () {\n        vec2 uv = resolutionInv * gl_FragCoord.xy;\n        vec2 f = texture2D(x, uv).xy;\n        float n = texture2D(x, vec2(uv.x, uv.y + resolutionInv.y)).x;\n        float s = texture2D(x, vec2(uv.x, uv.y - resolutionInv.y)).x;\n        float e = texture2D(x, vec2(uv.x + resolutionInv.x, uv.y)).x;\n        float w = texture2D(x, vec2(uv.x - resolutionInv.x, uv.y)).x;\n        float omega = omega0 + f.y * omeganoise;\n        gl_FragColor = vec4(\n          omega + k * (\n            sin(TWOPI * (n - f.x)) +\n            sin(TWOPI * (s - f.x)) +\n            sin(TWOPI * (e - f.x)) +\n            sin(TWOPI * (w - f.x))\n          ),\n          0, 0, 0\n        );\n      }"),attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{x:e.prop("x")},framebuffer:e.prop("out"),depth:{enable:!1},count:3}),p=e({vert:"\n      precision highp float;\n      attribute vec2 xy;\n      void main () {\n        gl_Position = vec4(xy, 0, 1);\n      }",frag:"\n      precision highp float;\n      uniform vec2 resolutionInv;\n      uniform sampler2D x, y;\n      uniform float a;\n      void main () {\n        vec2 uv = resolutionInv * gl_FragCoord.xy;\n        gl_FragColor = a * texture2D(x, uv) + texture2D(y, uv);\n      }",attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{a:e.prop("a"),x:e.prop("x"),y:e.prop("y")},framebuffer:e.prop("out"),depth:{enable:!1},count:3}),v=e({vert:"\n      precision highp float;\n      attribute vec2 xy;\n      void main () {\n        gl_Position = vec4(xy, 0, 1);\n      }",frag:"\n      precision highp float;\n      uniform vec2 resolutionInv;\n      uniform sampler2D x;\n      #define PI ".concat(Math.PI,"\n\n      vec4 rainbow(vec2 p) {\n        // A rainbow colorscale with p in [0, 1] x [0, 1]\n        float theta = p.x * (2.0 * 3.141592653589793);\n        float c = cos(theta);\n        float s = sin(theta);\n        return vec4(\n          mat3( 0.52308510,  0.56637411,  0.46725319,\n                0.12769652,  0.14082407,  0.13691271,\n               -0.25934743, -0.12121582,  0.23487050 ) *\n          vec3(1.0, 0.0, s) +\n          mat3( 0.35556640, -0.11472876, -0.01250831,\n                0.15243126, -0.03668075,  0.07652310 ,\n               -0.00192128, -0.01350681, -0.00365260 ) *\n          vec3(c, s * c, c * c - s * s),\n          1.0\n        );\n      }\n\n      void main () {\n        vec2 uv = gl_FragCoord.xy * resolutionInv;\n        float value = texture2D(x, uv).x;\n\n        float x = fract(value);\n        //gl_FragColor = vec4(vec3(fract(value)), 1);\n        gl_FragColor = rainbow(vec2(x, 0.5));\n      }"),attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{x:e.prop("x")},depth:{enable:!1},framebuffer:e.prop("out"),count:3}),b=e({vert:"\n      precision highp float;\n      attribute vec2 xy;\n      void main () {\n        gl_Position = vec4(xy, 0, 1);\n      }",frag:"\n      precision highp float;\n      uniform vec2 viewportRes;\n      uniform mat4 inverseView;\n      uniform sampler2D x;\n\n      void main () {\n        vec2 uv = (inverseView * vec4((-1.0 + 2.0 * gl_FragCoord.xy / viewportRes), 0, 1)).xy;\n        gl_FragColor = texture2D(x, uv);\n      }",attributes:{xy:[-4,-4,4,-4,0,4]},uniforms:{x:e.prop("x")},depth:{enable:!1},count:3}),m=[0,1,2].map(function(t){return e.framebuffer({depthStencil:!1,color:e.texture({width:128,height:128,type:"float",format:"rgba",wrapS:"repeat",wrapT:"repeat",min:"nearest",mag:"nearest"})})}),g=e.framebuffer({depthStencil:!1,color:e.texture({width:128,height:128,type:"uint8",format:"rgba",min:"linear",mag:"linear",wrapS:"repeat",wrapT:"repeat"})});e.poll(),h({out:m[0]});var y=e.frame(function(){try{n(u,function(){d({out:m[1],x:m[0]}),p({out:m[2],a:.5*u.h,x:m[1],y:m[0]}),d({out:m[1],x:m[2]}),p({out:m[2],a:u.h,x:m[1],y:m[0]});var t=m[0];m[0]=m[2],m[2]=t,v({x:m[0],out:g}),c({},function(){f(a,function(t){t.view;b({x:g})})})})}catch(t){console.error(t),y.cancel()}})})})},{"../../lib/tweakpane.js":1,"./configure-linear-scales.js":44,"./configure-viewport.js":45,"./create-zoom.js":46,d3:32,"fail-nicely":34,"gl-mat4/create":37,"gl-mat4/fromScaling":38,"gl-mat4/invert":39,"gl-mat4/multiply":40,"insert-css":42,regl:43}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n=e.x.domain(),r=e.y.domain(),i=2/(n[1]-n[0]),o=2/(r[1]-r[0]);return t[0]=i,t[1]=0,t[2]=0,t[3]=0,t[4]=o,t[5]=0,t[6]=-1-i*n[0],t[7]=-1-o*r[0],t[8]=1,t}},{}],49:[function(t,e,n){"use strict";e.exports=function(t,e){t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=e[4],t[6]=0,t[7]=e[5],t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[6],t[13]=e[7],t[14]=0,t[15]=e[8]}},{}]},{},[47]);