<!DOCTYPE html>
<html class='no-js sticky'>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Things I learned the hard way using React Native | Ricky Reusser</title>
    <meta name="og:image" content="https://s3.amazonaws.com/images.rickyreusser.com/DSC_0699.JPG" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="description" content="This post exists because I wish someone had sat me down and told me half of these things on Day One of using React Native." />
    <meta name="site" content="Ricky Reusser" />
    <meta name="og:site_name" content="Ricky Reusser" />
    <meta name="title" content="Things I learned the hard way using React Native" />
    <meta name="twitter:title" content="Things I learned the hard way using React Native" />
    <meta name="twitter:site" content="@rickyreusser" />
    <meta name="twitter:image:src" content="https://s3.amazonaws.com/images.rickyreusser.com/DSC_0699.JPG" />
    <meta name="og:title" content="Things I learned the hard way using React Native" />
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <link href="../../../../stylesheets/application-8c0872f0.css" rel="stylesheet" type="text/css" />
    <link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/default.min.css' rel='stylesheet'>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"></script>
    <script>
      MathJax.Hub.Config({
        'HTML-CSS': {
          scale: 115
        }
      })
    </script>
  </head>
  <body>
    <div class='wrapper'>
      <nav class='navbar' id='navbar'>
        <a class="menu-toggle" href="/"><span class='burger'></span>
        <span class='burger'></span>
        <span class='burger'></span>
        </a>
        <ul id='menu'>
          <li class='top'>
            <a class="brand" href="/">rickyreusser.com
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/tags/science"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <g>
                <circle fill="#ffffff" cx="37.915" cy="34.252" r="2.165"/>
                <circle fill="#ffffff" cx="35.086" cy="34.252" r="2.165"/>
                <circle fill="#ffffff" cx="37.915" cy="37.08" r="2.165"/>
                <circle fill="#ffffff" cx="35.086" cy="37.08" r="2.165"/>
                <circle fill="#ffffff" cx="59.5" cy="43.666" r="3.888"/>
                <ellipse fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" cx="36.5" cy="35.666" rx="33.333" ry="11.167"/>
                <circle fill="#ffffff" cx="18.39" cy="51.134" r="3.889"/>
                
                  <ellipse transform="matrix(-0.4996 0.8662 -0.8662 -0.4996 85.7024 20.9105)" fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" cx="36.812" cy="35.207" rx="33.333" ry="11.167"/>
                <circle fill="#ffffff" cx="32.201" cy="12.24" r="3.889"/>
                
                  <ellipse transform="matrix(-0.4988 -0.8667 0.8667 -0.4988 23.7217 86.0485)" fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" cx="36.74" cy="36.166" rx="33.333" ry="11.167"/>
              </g>
            </svg>
            <span class='label'>science</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/tags/dev"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <g>
                <path fill="#ffffff" d="M25.295,28.367l-14.941,7.489l14.941,7.42v4.284l-18.58-9.784v-3.886l18.58-9.784V28.367z"/>
                <path fill="#ffffff" d="M41.468,15.914h3.34L30.991,55.308h-3.357L41.468,15.914z"/>
                <path fill="#ffffff" d="M47.06,28.367v-4.261l18.58,9.784v3.886l-18.58,9.784v-4.284l14.941-7.42L47.06,28.367z"/>
              </g>
            </svg>
            <span class='label'>dev</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a id="fun" href="/tags/fun"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <g>
                <path fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" d="M54.566,58.368"/>
                <path fill="#ffffff" d="M54.244,40.188l-7.595,4.933L25.393,13.908L2.23,58.5h67.697L54.244,40.188z M25.707,19.157l7.821,11.502
                  l-1.919,5.119l-5.349-7.932l-3.208,5.65l-1.992-5.403L25.707,19.157z"/>
              </g>
            </svg>
            <span class='label'>fun</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="https://github.com/rreusser"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#ffffff" d="M36.21,8.152C20.488,8.152,7.738,20.9,7.738,36.629
            	c0,12.579,8.158,23.251,19.474,27.017c1.424,0.262,1.943-0.618,1.943-1.372c0-0.676-0.024-2.467-0.038-4.843
            	c-7.921,1.721-9.592-3.817-9.592-3.817c-1.295-3.289-3.161-4.165-3.161-4.165c-2.586-1.767,0.195-1.73,0.195-1.73
            	c2.857,0.201,4.361,2.934,4.361,2.934c2.54,4.352,6.664,3.096,8.287,2.366c0.258-1.84,0.994-3.095,1.808-3.807
            	c-6.323-0.719-12.971-3.161-12.971-14.072c0-3.109,1.11-5.65,2.932-7.641c-0.293-0.721-1.271-3.616,0.278-7.536
            	c0,0,2.392-0.766,7.831,2.919c2.271-0.632,4.707-0.947,7.128-0.958c2.417,0.011,4.855,0.326,7.13,0.958
            	c5.434-3.685,7.82-2.919,7.82-2.919c1.555,3.92,0.578,6.815,0.283,7.536c1.826,1.99,2.926,4.531,2.926,7.641
            	c0,10.938-6.656,13.345-13,14.05c1.023,0.88,1.934,2.617,1.934,5.273c0,3.807-0.035,6.878-0.035,7.812
            	c0,0.761,0.514,1.647,1.959,1.369c11.305-3.772,19.455-14.438,19.455-27.014C64.686,20.9,51.936,8.152,36.21,8.152z"/>
            </svg>
            <span class='label'>github</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/about"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <path fill="#ffffff" d="M53.5,55.333c-9.984-2.463-11.438-6.349-10.25-8.583c1.041-1.96,2.268-1.829,5.464-9.761
                c0.094,0.036,0.182,0.084,0.282,0.106c1.588,0.356,3.365-1.132,3.965-3.326c0.598-2.191-0.207-4.261-1.794-4.617
                c-0.083-0.019-0.168-0.012-0.252-0.021C54.667,8.497,38.667,5.997,30.167,11.247c-3.917-2.359-12.25,1.917-10.068,17.885
                c-0.084,0.009-0.155,0.002-0.238,0.021c-1.587,0.356-2.392,2.426-1.794,4.617c0.6,2.194,2.377,3.683,3.965,3.326
                c0.101-0.022,0.188-0.07,0.282-0.106c3.196,7.932,4.271,7.988,5.312,9.948c1.188,2.234,0.231,5.982-9.745,8.477
                C4.546,58.747,5.527,65.5,5.527,65.5H35.5h30C65.5,65.5,66.666,58.581,53.5,55.333z"/>
            </svg>
            <span class='label'>about me</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/feed.xml"><?xml version="1.0" encoding="utf-8"?>
            <!-- Generator: Adobe Illustrator 15.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
            <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
            <svg version="1.1" id="rss-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
            <g>
            	<path fill="#FFFFFF" d="M16.641,48.311c-3.875,0-7.023,3.16-7.023,7.012c0,3.873,3.148,6.998,7.023,6.998
            		c3.889,0,7.033-3.125,7.033-6.998C23.674,51.471,20.53,48.311,16.641,48.311z"/>
            	<path fill="#FFFFFF" d="M9.626,27.546v10.112c6.584,0,12.776,2.575,17.439,7.24c4.658,4.654,7.229,10.874,7.229,17.482h10.157
            		C44.451,43.172,28.824,27.546,9.626,27.546z"/>
            	<path fill="#FFFFFF" d="M9.638,9.618v10.118c23.485,0,42.6,19.133,42.6,42.645h10.143C62.381,33.296,38.718,9.618,9.638,9.618z"/>
            </g>
            </svg>
            <span class='label'>feed</span>
            </a>
          </li>
        </ul>
        <div class='content'></div>
        <div class='inner-content'>
          <h5 class='abbrev'>
            <span>Things I learned the hard way using React Native</span>
          </h5>
        </div>
      </nav>
      <article>
        <section class='frontmatter' data-abbrvd-target='#navbar'>
          <div class='container'>
            <div class='outer-container'>
              <div class='inner-container'>
                <h1 class='title'>Things I learned the hard way using React Native</h1>
                <h5 class='metadata'>
                  <span class='author'>Ricky Reusser</span>
                  <br>
                  <span class='published-at'>May 14, 2016</span>
                  <br>
                  <div class='tags'>
                    <span class='tag'><a href="/tags/dev/">#dev</a></span>
                    <span class='tag'><a href="/tags/javascript/">#javascript</a></span>
                  </div>
                </h5>
              </div>
            </div>
          </div>
        </section>
        <section class='content'>
          <h2>the tl;dr:</h2>
          
          <p>This post exists because I wish someone had sat me down and told me half of these things on Day One of using React Native.</p>
          
          <h2>The kinda long; might read:</h2>
          
          <p>I am decidedly not an expert in React Native, but that doesn&rsquo;t mean I haven&rsquo;t learned a lot of difficult lessons over the last <a href="http://www.thefoodstand.com">eight months</a>! And earlier today I had the chance to introduce a couple developers to React Native. They had JavaScript experience and knew their way around mobile apps, but React Native was a new beast. It made me recall what a foreign set of concepts <a href="https://facebook.github.io/react/">React</a> and <a href="facebook.github.io/react-native">React Native</a> were when we started out.</p>
          
          <p>This post is a loose collection of the things I wish someone had just told me from the beginning. Some are obvious; some aren&rsquo;t. The original gist is <a href="https://gist.github.com/rreusser/c673bb3ec5316cf3bd46a18d4777eff3">here</a>. It&rsquo;s not everything, but hopefully it&rsquo;s mostly valid information and can save someone else some of the time it took us to discover all of these things! If you know of improvements, please let me know in the comments section!</p>
          
          <h2>So the thoughts:</h2>
          
          <p><strong>Set up your environment carefully</strong>: It&rsquo;s important to have <em>one</em> canonical source of truth per environment, per platform. (i.e. iOS Development, iOS Testflight, iOS Production, ditto Android.) Every time you build, your config should propagate values from one input source (per platform) to either Java/JavaScript or Objective-C/JavaScript. <a href="https://gist.github.com/rreusser/77c18ca38a6848876c22a00d3fed99a9">Here&rsquo;s what we did for Android</a> and <a href="https://gist.github.com/rreusser/283e032fb1bb5f59256fd5b96f8b8e6c">here&rsquo;s what we did for iOS</a>. I don&rsquo;t doubt that you can do better. <em>Please do better.</em> But you can&rsquo;t say that we didn&rsquo;t have one canonical source of truth that worked very simply and effectively throughout the development process.</p>
          
          <p><strong>Don&rsquo;t wait until the end to develop Android and iOS concurrently:</strong> Even if you&rsquo;re not actively focusing on both platforms, don&rsquo;t assume that &ldquo;RN is cross platformâ€¦ we can develop iOS and flip the Android switch when we&rsquo;re done.&rdquo; It&rsquo;s mostly cross-platform. But there&rsquo;s lots of little stuff like iOS and Android handling margins on text differently. Small quirks, but not the sort of stuff you want to completely refactor at the end.</p>
          
          <p><strong>Use a linter:</strong> I like <a href="https://github.com/Flet/semistandard">semistandard</a>. We ran into lots of frustrating issues where we had duplicate keys in hashes that didn&rsquo;t fail until we moved to the web platform. A linter can be annoying, but it&rsquo;s not so bad if you get on board early. Prevents you from doing lots of stupid invalid stuff that doesn&rsquo;t actually cause errors.</p>
          
          <p><strong>Learning Redux</strong>: It was useful to read the source itself. It&rsquo;s actually relatively concise. It helped clear up my understanding of what&rsquo;s going on. Understanding exactly why components get updated helped us improve performance dramatically. <a href="https://github.com/reactjs/redux/blob/master/src/combineReducers.js#L123-L137">I think these are the lines that do it in redux</a>. As for connecting components, we debated whether to connect giant parts of the state tree or lots of little values. Also whether to connect tons of little components or just the big components. Short answer: understand why things get re-rendered and a happy medium is probably best because either extreme has tradeoffs. Connecting <strong>every</strong> component seems silly and expensive, but then it&rsquo;s overkill and unnecessarily verbose to unpack tons of values in every <code>mapStateToProps</code>. Happy medium, I think.</p>
          
          <p><strong>But what&rsquo;s the right data store???</strong> <em>The right data store is one that you understand.</em> We stored our stuff in some weird key-value store (okay, a glorified plain old javascript object). It worked pretty well, but what would have made it better would have been either to understand what triggers updates better from the start or maybe to take the plunge and get on board with immutablejs from the start. But there&rsquo;s no one true answer. Ours worked fine. If you use a library for your datastore, mainly try to understand <em>why</em> it does what it does (which doesn&rsquo;t necessarily include worrying about the internal workings).</p>
          
          <p><strong>Put <code>console.logs</code> in your render statements and figure out just how often things are getting rendered.</strong> You can get away with a lot for a while using react. It&rsquo;s magic. Until it feels laggy. The second major release of our iOS app was mainly a giant audit of why there was so much extra rendering going on. Performance increased dramatically.</p>
          
          <p><strong>Follow people on twitter</strong>
          <a href="https://twitter.com/dan_abramov">@dan_abramov</a>, <a href="https://twitter.com/JI">@JI</a>, <a href="https://twitter.com/ReactJSNews">@ReactJSNews</a>, <a href="https://twitter.com/Vjeux">@Vjeux</a>. Lots more. A good way to be a fly on the wall and find out about trendy stuff without getting sucked into a hacker-news-like rabbit hole.</p>
          
          <p><strong>React universal template</strong> (web, app, server): <a href="https://github.com/este/este">este/este.js</a></p>
          
          <p><strong>My template</strong> which has maybe a couple things going for it regarding redux setup (immutable part could be edited out): <a href="https://github.com/rreusser/react-native-with-everything">react-native-with-everything</a></p>
          
          <p><strong>This guyâ€™s stuff is outstanding</strong>:
          - <a href="https://github.com/oblador/react-native-animatable">oblador/react-native-animatable</a>
          - <a href="https://github.com/oblador/react-native-vector-icons">oblador/react-native-vector-icons</a></p>
          
          <p><strong>Corollary:</strong> <a href="https://icomoon.io/">icomoon.io</a> is the best thing ever for managing icons.</p>
          
          <p><strong>Keyboard spacer</strong>: I <em>highly</em> recommend a single keyboard spacer at the bottom of your top-level view. Or at least very few as high up in the DOM as possible. No need to add them all over the place (it&rsquo;s a mess), and best to avoid fixing the height of anything to the height of the viewport (Android and the in-call status bar will make your life unpleasant).
          <a href="https://www.npmjs.com/package/react-native-keyboard-spacer">react-native-keyboard-spacer</a></p>
          
          <p><strong>Higher order components</strong> (enhancing behavior without mixins or class inheritance):
          <a href="https://gist.github.com/sebmarkbage/ef0bf1f338a7182b6775">https://gist.github.com/sebmarkbage/ef0bf1f338a7182b6775</a></p>
          
          <p><strong>This is useful</strong>. Premature optimization is bad, but good to get a handle on what optimization means: <a href="https://github.com/garbles/why-did-you-update">garbles/why-did-you-update</a></p>
          
          <p><strong>Stateless functional components</strong>: <a href="https://facebook.github.io/react/blog/2015/10/07/react-v0.14.html#stateless-functional-components">Stateless functional components</a>: Good for components that can have no internal state.</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3</pre></td><td class="code"><pre><span class="kd">var</span> <span class="nx">Button</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">label</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text&gt;&lt;/</span><span class="nx">View</span><span class="o">&gt;</span>&#x000A;<span class="p">}</span></pre></td></tr></tbody></table>
          </div>
          
          <p><strong>But be careful with those because: An interesting discussion on avoid re-rendering the entire app</strong> on every state update: <a href="https://medium.com/@esamatti/react-js-pure-render-performance-anti-pattern-fb88c101332f#.u3tqgdf47">Pure Render Performance Anti-Pattern</a></p>
          
          <p><strong>Or just forget understanding optimization and use this:</strong> ðŸ˜„
          - <a href="https://github.com/thejameskyle/babel-react-optimize">thejameskyle/babel-react-optimize</a></p>
          
          <p><strong>A trivial optimization that may actually (somewhat surprisingly?) be noticable:</strong>
          Instead of this:</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">return</span> <span class="o">&lt;</span><span class="nx">Touchable</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">do</span> <span class="nx">something</span> <span class="nx">inline</span><span class="p">}}</span><span class="sr">/</span><span class="err">&gt;&#x000A;</span></pre></td></tr></tbody></table>
          </div>
          
          <p>Do this:</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7</pre></td><td class="code"><pre><span class="nx">_onPress</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;  <span class="nx">same</span> <span class="nx">thing</span> <span class="nx">but</span> <span class="nx">not</span> <span class="nx">inline</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">render</span> <span class="p">()</span> <span class="p">{</span>&#x000A;  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Touchable</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">_handlePress</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;&#x000A;</span><span class="p">}</span></pre></td></tr></tbody></table>
          </div>
          
          <p>For events like keypresses, the recreation of an unoptimized callback over and over and over actually seems to noticably slow down the UI. Who would have guessed?</p>
          
          <p><strong>Fun facts:</strong></p>
          
          <p>You can always return/insert an array of keyed nodes instead of jamming everything together (note to self: the actual return value of render needs to be a single node though, right?)</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6</pre></td><td class="code"><pre><span class="nx">renderSomePart</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;  <span class="k">return</span> <span class="p">[</span>&#x000A;    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">key</span><span class="o">=</span><span class="s2">"item-1"</span><span class="o">/&gt;</span><span class="p">,</span>&#x000A;    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">key</span><span class="o">=</span><span class="s2">"item-2"</span><span class="o">/&gt;</span>&#x000A;  <span class="p">];</span>&#x000A;<span class="p">};</span></pre></td></tr></tbody></table>
          </div>
          
          <p>OR:</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7</pre></td><td class="code"><pre><span class="nx">renderItem</span> <span class="o">=</span> <span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>&#x000A;  <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">key</span><span class="o">=</span><span class="err">`</span><span class="nx">item</span><span class="o">-</span><span class="nx">$</span><span class="p">{</span><span class="nx">i</span><span class="p">}</span><span class="err">`</span><span class="o">&gt;</span> <span class="p">...</span> <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;&#x000A;</span><span class="p">)</span>&#x000A;&#x000A;<span class="nx">renderSomePart</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>&#x000A;  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">someDataItems</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">renderItem</span><span class="p">);</span>&#x000A;<span class="p">};</span></pre></td></tr></tbody></table>
          </div>
          
          <p>And text nodes can contain other text nodes. Our first attempt was to split text by whitespace and lay out nodes with flexbox. That was crazy. You can just nest text nodes and make some of them pressable. Sounds obscure, but it wasn&rsquo;t obvious and if you need it, it&rsquo;s life-changing.</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7&#x000A;8&#x000A;9</pre></td><td class="code"><pre><span class="nx">render</span> <span class="p">()</span> <span class="p">{</span>&#x000A;  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="p">{[</span>&#x000A;    <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="s2">"1"</span><span class="o">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="o">&lt;</span><span class="sr">/Text&gt;</span><span class="err">,&#x000A;</span>    <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="s2">"2"</span><span class="o">&gt;</span><span class="p">{[</span>&#x000A;      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="s2">"1"</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{...}</span><span class="o">&gt;</span><span class="k">this</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">link</span><span class="o">&lt;</span><span class="sr">/Text&gt;</span><span class="err">,&#x000A;</span>      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="s2">"2"</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">and</span> <span class="k">this</span> <span class="nx">is</span> <span class="nx">just</span> <span class="nx">regular</span> <span class="nx">text</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;&#x000A;</span>    <span class="p">]}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;&#x000A;</span>  <span class="p">]}</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;&#x000A;</span><span class="p">}</span></pre></td></tr></tbody></table>
          </div>
          
          <p>Random fact: margins and padding on text elements more or less doesn&rsquo;t work on android, so really try to avoid them!</p>
          
          <p><strong>How to add a loading overlay</strong>.
          Absolutely position the overlay top/right/left/bottom: 0 and make sure itâ€™s <em>after</em> the rest of the content it needs to overlay. Draw order is last-on-top:</p>
          <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4</pre></td><td class="code"><pre><span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>&#x000A;  <span class="o">&lt;</span><span class="err">â€¦â€¦</span><span class="o">&gt;</span>&#x000A;  <span class="o">&lt;</span><span class="nx">LoadingOverlay</span><span class="o">&gt;</span>&#x000A;<span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;&#x000A;</span></pre></td></tr></tbody></table>
          </div>
          
          <h2>Android installation (Genymotion)</h2>
          
          <p>Ommitted for brevity (naturally), but you can see it in the original gist <a href="https://gist.github.com/rreusser/c673bb3ec5316cf3bd46a18d4777eff3">here</a>. Android Studio 2.0 seems better these days though. Great emulator.</p>
          
          <!--
          ## Android installation (Genymotion)
          
          This is for Genymotion setup. I think Android Studio 2.0 is maybe better now. In particular, I got confused about which android sdk directory things were pointed at, so however you install android stuff, take note of that.
          
          1. Install android sdk via homebrew. brew install android-sdk
          2. Download and install VirtualBox
          3. Run $ android and install lots of SDKs... Google Play + Google Repositories under Extras, in particular...
          4. Install genymotion
          5. In the genymotion settings tab, go to ADB and enter /usr/local/Cellar/android-sdk/24.4.1 (or similar, depending on what homebrew installed. Maybe .../24.1.1/bin?)
          6. Run $ANDROID_HOME/bin/android and select "Google Repository", amonng maybe a few other things that look reasonable
          7. Start your device! woot.
            - Install Google Play Serivces
            - Drag ARM_Translation_something_or_other.zip onto the simulator, flash, quit, and restart (note: youâ€™ll have to find this on a MEGAFREEDOWNLOADS.COM sort of site. Try to avoid malware. Itâ€™s crazy. Come on, Android. The gist below is a good place to find it.)
            - Ditto for gapps zip file
            - Restart the simulator
            - At this point you should get a message that says google play has stopped working ðŸ‘
            - Go to Play Store and sign in.
            - Click the hamburger menu, go to My Apps, and update all
            - If that doesn't work, check at: https://gist.github.com/wbroek/9321145
          8. BAM.
          -->
        </section>
      </article>
      <div class='push'></div>
    </div>
    <section class='footer'>
      <div class='container'>
        <div class='article-footer'>
          <div id='disqus_thread'></div>
          <script>
              var disqus_shortname = 'rickyreusser';
              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          <noscript>
            Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
          </noscript>
        </div>
        <!--div class="sharing">
        <a href="http://www.twitter.com/share?url=<%= data['site']['siteurl'] %><%= current_article.url %>&amp;text=<%= current_article.title %> by <%= data['site']['twitter_id'] %>" title="Share this post on Twitter" data-lang="en" onclick="return !window.open(this.href, 'Twitter', 'width=640,height=300')"><span class="socicon socicon-twitter fgcolor"></span></a>
        <a target="_blank" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=300')" href="http://www.facebook.com/sharer/sharer.php?u=<%= data['site']['siteurl'] %><%= current_article.url %>" title="Share this post on Facebook"><span class="socicon socicon-facebook fgcolor"></span></a>
        <a href="http://plus.google.com/share?url=<%= data['site']['siteurl'] %><%= current_article.url %>" target="_blank" onclick="return !window.open(this.href, 'Google +', 'width=640,height=300')" title="Share this post on Google +"><span class="socicon socicon-google fgcolor"></span></a>
        </div-->
      </div>
    </section>
    <script src="../../../../javascripts/all-7c4f32d1.js" type="text/javascript"></script>
    <script>
      var _gaq=[['_setAccount','UA-50197543-4'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
    <script>
      $('code').each(function(i,el) {
        var $el = $(el);
        var html = $el.html();
        if( html.match(/^\${1,2}.*\${1,2}$/) || html.match(/^\\\(.*\\\)$/) ){
          var container = $('<span>');
          container.html(html);
          $el.replaceWith(container);
        }
      });
    </script>
  </body>
</html>
